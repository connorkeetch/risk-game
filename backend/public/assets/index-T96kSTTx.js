var Qr=Object.defineProperty;var en=(s,t,r)=>t in s?Qr(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var ps=(s,t,r)=>en(s,typeof t!="symbol"?t+"":t,r);import{r as b,a as tn,b as zs}from"./vendor-Gm9i_4Ku.js";import{u as dt,a as z,c as X,b as es,d as sn,P as rn}from"./redux-C85R5ZgA.js";import{u as ts,L,N as je,a as Hs,b as nn,R as an,c as F,B as on}from"./router-DN7M8NsK.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Vs={exports:{}},mt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ln=b,cn=Symbol.for("react.element"),dn=Symbol.for("react.fragment"),mn=Object.prototype.hasOwnProperty,hn=ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,un={key:!0,ref:!0,__self:!0,__source:!0};function Js(s,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)mn.call(t,n)&&!un.hasOwnProperty(n)&&(a[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:cn,type:s,key:i,ref:o,props:a,_owner:hn.current}}mt.Fragment=dn;mt.jsx=Js;mt.jsxs=Js;Vs.exports=mt;var e=Vs.exports,Dt={},fs=tn;Dt.createRoot=fs.createRoot,Dt.hydrateRoot=fs.hydrateRoot;let xn={data:""},pn=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||xn,fn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gn=/\/\*[^]*?\*\/|  +/g,gs=/\n+/g,pe=(s,t)=>{let r="",n="",a="";for(let i in s){let o=s[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?pe(o,i):i+"{"+pe(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=pe(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=pe.p?pe.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},he={},Zs=s=>{if(typeof s=="object"){let t="";for(let r in s)t+=r+Zs(s[r]);return t}return s},bn=(s,t,r,n,a)=>{let i=Zs(s),o=he[i]||(he[i]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(i));if(!he[o]){let c=i!==s?s:(d=>{let h,m,g=[{}];for(;h=fn.exec(d.replace(gn,""));)h[4]?g.shift():h[3]?(m=h[3].replace(gs," ").trim(),g.unshift(g[0][m]=g[0][m]||{})):g[0][h[1]]=h[2].replace(gs," ").trim();return g[0]})(s);he[o]=pe(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&he.g?he.g:null;return r&&(he.g=he[o]),((c,d,h,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(he[o],t,n,l),o},yn=(s,t,r)=>s.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":pe(l,""):l===!1?"":l}return n+a+(o??"")},"");function ht(s){let t=this||{},r=s.call?s(t.p):s;return bn(r.unshift?r.raw?yn(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,pn(t.target),t.g,t.o,t.k)}let Ks,$t,It;ht.bind({g:1});let xe=ht.bind({k:1});function jn(s,t,r,n){pe.p=t,Ks=s,$t=r,It=n}function ge(s,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:$t&&$t()},l),r.o=/ *go\d+/.test(c),l.className=ht.apply(r,n)+(c?" "+c:"");let d=s;return s[0]&&(d=l.as||s,delete l.as),It&&d[0]&&It(l),Ks(d,l)}return a}}var vn=s=>typeof s=="function",ot=(s,t)=>vn(s)?s(t):s,Nn=(()=>{let s=0;return()=>(++s).toString()})(),Ys=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),wn=20,ss="default",Xs=(s,t)=>{let{toastLimit:r}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,r)};case 1:return{...s,toasts:s.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return Xs(s,{type:s.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...s,toasts:s.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let i=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ke=[],Qs={toasts:[],pausedAt:void 0,settings:{toastLimit:wn}},ce={},er=(s,t=ss)=>{ce[t]=Xs(ce[t]||Qs,s),Ke.forEach(([r,n])=>{r===t&&n(ce[t])})},tr=s=>Object.keys(ce).forEach(t=>er(s,t)),kn=s=>Object.keys(ce).find(t=>ce[t].toasts.some(r=>r.id===s)),ut=(s=ss)=>t=>{er(t,s)},_n={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Tn=(s={},t=ss)=>{let[r,n]=b.useState(ce[t]||Qs),a=b.useRef(ce[t]);b.useEffect(()=>(a.current!==ce[t]&&n(ce[t]),Ke.push([t,n]),()=>{let o=Ke.findIndex(([l])=>l===t);o>-1&&Ke.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var l,c,d;return{...s,...s[o.type],...o,removeDelay:o.removeDelay||((l=s[o.type])==null?void 0:l.removeDelay)||(s==null?void 0:s.removeDelay),duration:o.duration||((c=s[o.type])==null?void 0:c.duration)||(s==null?void 0:s.duration)||_n[o.type],style:{...s.style,...(d=s[o.type])==null?void 0:d.style,...o.style}}});return{...r,toasts:i}},Cn=(s,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Nn()}),De=s=>(t,r)=>{let n=Cn(t,s,r);return ut(n.toasterId||kn(n.id))({type:2,toast:n}),n.id},J=(s,t)=>De("blank")(s,t);J.error=De("error");J.success=De("success");J.loading=De("loading");J.custom=De("custom");J.dismiss=(s,t)=>{let r={type:3,toastId:s};t?ut(t)(r):tr(r)};J.dismissAll=s=>J.dismiss(void 0,s);J.remove=(s,t)=>{let r={type:4,toastId:s};t?ut(t)(r):tr(r)};J.removeAll=s=>J.remove(void 0,s);J.promise=(s,t,r)=>{let n=J.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof s=="function"&&(s=s()),s.then(a=>{let i=t.success?ot(t.success,a):void 0;return i?J.success(i,{id:n,...r,...r==null?void 0:r.success}):J.dismiss(n),a}).catch(a=>{let i=t.error?ot(t.error,a):void 0;i?J.error(i,{id:n,...r,...r==null?void 0:r.error}):J.dismiss(n)}),s};var Sn=1e3,An=(s,t="default")=>{let{toasts:r,pausedAt:n}=Tn(s,t),a=b.useRef(new Map).current,i=b.useCallback((m,g=Sn)=>{if(a.has(m))return;let f=setTimeout(()=>{a.delete(m),o({type:4,toastId:m})},g);a.set(m,f)},[]);b.useEffect(()=>{if(n)return;let m=Date.now(),g=r.map(f=>{if(f.duration===1/0)return;let u=(f.duration||0)+f.pauseDuration-(m-f.createdAt);if(u<0){f.visible&&J.dismiss(f.id);return}return setTimeout(()=>J.dismiss(f.id,t),u)});return()=>{g.forEach(f=>f&&clearTimeout(f))}},[r,n,t]);let o=b.useCallback(ut(t),[t]),l=b.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=b.useCallback((m,g)=>{o({type:1,toast:{id:m,height:g}})},[o]),d=b.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),h=b.useCallback((m,g)=>{let{reverseOrder:f=!1,gutter:u=8,defaultPosition:y}=g||{},x=r.filter(C=>(C.position||y)===(m.position||y)&&C.height),v=x.findIndex(C=>C.id===m.id),N=x.filter((C,k)=>k<v&&C.visible).length;return x.filter(C=>C.visible).slice(...f?[N+1]:[0,N]).reduce((C,k)=>C+(k.height||0)+u,0)},[r]);return b.useEffect(()=>{r.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let g=a.get(m.id);g&&(clearTimeout(g),a.delete(m.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:h}}},Ln=xe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,En=xe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pn=xe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Rn=ge("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ln} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${En} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Pn} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,On=xe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Mn=ge("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${On} 1s linear infinite;
`,Bn=xe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Fn=xe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Dn=ge("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Bn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Fn} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,$n=ge("div")`
  position: absolute;
`,In=ge("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,qn=xe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Un=ge("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${qn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Gn=({toast:s})=>{let{icon:t,type:r,iconTheme:n}=s;return t!==void 0?typeof t=="string"?b.createElement(Un,null,t):t:r==="blank"?null:b.createElement(In,null,b.createElement(Mn,{...n}),r!=="loading"&&b.createElement($n,null,r==="error"?b.createElement(Rn,{...n}):b.createElement(Dn,{...n})))},Wn=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,zn=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Hn="0%{opacity:0;} 100%{opacity:1;}",Vn="0%{opacity:1;} 100%{opacity:0;}",Jn=ge("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Zn=ge("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Kn=(s,t)=>{let r=s.includes("top")?1:-1,[n,a]=Ys()?[Hn,Vn]:[Wn(r),zn(r)];return{animation:t?`${xe(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xe(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Yn=b.memo(({toast:s,position:t,style:r,children:n})=>{let a=s.height?Kn(s.position||t||"top-center",s.visible):{opacity:0},i=b.createElement(Gn,{toast:s}),o=b.createElement(Zn,{...s.ariaProps},ot(s.message,s));return b.createElement(Jn,{className:s.className,style:{...a,...r,...s.style}},typeof n=="function"?n({icon:i,message:o}):b.createElement(b.Fragment,null,i,o))});jn(b.createElement);var Xn=({id:s,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=b.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(s,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[s,n]);return b.createElement("div",{ref:i,className:t,style:r},a)},Qn=(s,t)=>{let r=s.includes("top"),n=r?{top:0}:{bottom:0},a=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ys()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},ea=ht`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ve=16,ta=({reverseOrder:s,position:t="top-center",toastOptions:r,gutter:n,children:a,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=An(r,i);return b.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Ve,left:Ve,right:Ve,bottom:Ve,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let m=h.position||t,g=d.calculateOffset(h,{reverseOrder:s,gutter:n,defaultPosition:t}),f=Qn(m,g);return b.createElement(Xn,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?ea:"",style:f},h.type==="custom"?ot(h.message,h):a?a(h):b.createElement(Yn,{toast:h,position:m}))}))};const xt=()=>dt(),ue=z;function sr(s,t){return function(){return s.apply(t,arguments)}}const{toString:sa}=Object.prototype,{getPrototypeOf:rs}=Object,{iterator:pt,toStringTag:rr}=Symbol,ft=(s=>t=>{const r=sa.call(t);return s[r]||(s[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ie=s=>(s=s.toLowerCase(),t=>ft(t)===s),gt=s=>t=>typeof t===s,{isArray:Se}=Array,Fe=gt("undefined");function $e(s){return s!==null&&!Fe(s)&&s.constructor!==null&&!Fe(s.constructor)&&Q(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const nr=ie("ArrayBuffer");function ra(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&nr(s.buffer),t}const na=gt("string"),Q=gt("function"),ar=gt("number"),Ie=s=>s!==null&&typeof s=="object",aa=s=>s===!0||s===!1,Ye=s=>{if(ft(s)!=="object")return!1;const t=rs(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(rr in s)&&!(pt in s)},ia=s=>{if(!Ie(s)||$e(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},oa=ie("Date"),la=ie("File"),ca=ie("Blob"),da=ie("FileList"),ma=s=>Ie(s)&&Q(s.pipe),ha=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||Q(s.append)&&((t=ft(s))==="formdata"||t==="object"&&Q(s.toString)&&s.toString()==="[object FormData]"))},ua=ie("URLSearchParams"),[xa,pa,fa,ga]=["ReadableStream","Request","Response","Headers"].map(ie),ba=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qe(s,t,{allOwnKeys:r=!1}={}){if(s===null||typeof s>"u")return;let n,a;if(typeof s!="object"&&(s=[s]),Se(s))for(n=0,a=s.length;n<a;n++)t.call(null,s[n],n,s);else{if($e(s))return;const i=r?Object.getOwnPropertyNames(s):Object.keys(s),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,s[l],l,s)}}function ir(s,t){if($e(s))return null;t=t.toLowerCase();const r=Object.keys(s);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,or=s=>!Fe(s)&&s!==ye;function qt(){const{caseless:s}=or(this)&&this||{},t={},r=(n,a)=>{const i=s&&ir(t,a)||a;Ye(t[i])&&Ye(n)?t[i]=qt(t[i],n):Ye(n)?t[i]=qt({},n):Se(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&qe(arguments[n],r);return t}const ya=(s,t,r,{allOwnKeys:n}={})=>(qe(t,(a,i)=>{r&&Q(a)?s[i]=sr(a,r):s[i]=a},{allOwnKeys:n}),s),ja=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),va=(s,t,r,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),r&&Object.assign(s.prototype,r)},Na=(s,t,r,n)=>{let a,i,o;const l={};if(t=t||{},s==null)return t;do{for(a=Object.getOwnPropertyNames(s),i=a.length;i-- >0;)o=a[i],(!n||n(o,s,t))&&!l[o]&&(t[o]=s[o],l[o]=!0);s=r!==!1&&rs(s)}while(s&&(!r||r(s,t))&&s!==Object.prototype);return t},wa=(s,t,r)=>{s=String(s),(r===void 0||r>s.length)&&(r=s.length),r-=t.length;const n=s.indexOf(t,r);return n!==-1&&n===r},ka=s=>{if(!s)return null;if(Se(s))return s;let t=s.length;if(!ar(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=s[t];return r},_a=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&rs(Uint8Array)),Ta=(s,t)=>{const n=(s&&s[pt]).call(s);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(s,i[0],i[1])}},Ca=(s,t)=>{let r;const n=[];for(;(r=s.exec(t))!==null;)n.push(r);return n},Sa=ie("HTMLFormElement"),Aa=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),bs=(({hasOwnProperty:s})=>(t,r)=>s.call(t,r))(Object.prototype),La=ie("RegExp"),lr=(s,t)=>{const r=Object.getOwnPropertyDescriptors(s),n={};qe(r,(a,i)=>{let o;(o=t(a,i,s))!==!1&&(n[i]=o||a)}),Object.defineProperties(s,n)},Ea=s=>{lr(s,(t,r)=>{if(Q(s)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=s[r];if(Q(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Pa=(s,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Se(s)?n(s):n(String(s).split(t)),r},Ra=()=>{},Oa=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function Ma(s){return!!(s&&Q(s.append)&&s[rr]==="FormData"&&s[pt])}const Ba=s=>{const t=new Array(10),r=(n,a)=>{if(Ie(n)){if(t.indexOf(n)>=0)return;if($e(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Se(n)?[]:{};return qe(n,(o,l)=>{const c=r(o,a+1);!Fe(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(s,0)},Fa=ie("AsyncFunction"),Da=s=>s&&(Ie(s)||Q(s))&&Q(s.then)&&Q(s.catch),cr=((s,t)=>s?setImmediate:t?((r,n)=>(ye.addEventListener("message",({source:a,data:i})=>{a===ye&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ye.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Q(ye.postMessage)),$a=typeof queueMicrotask<"u"?queueMicrotask.bind(ye):typeof process<"u"&&process.nextTick||cr,Ia=s=>s!=null&&Q(s[pt]),p={isArray:Se,isArrayBuffer:nr,isBuffer:$e,isFormData:ha,isArrayBufferView:ra,isString:na,isNumber:ar,isBoolean:aa,isObject:Ie,isPlainObject:Ye,isEmptyObject:ia,isReadableStream:xa,isRequest:pa,isResponse:fa,isHeaders:ga,isUndefined:Fe,isDate:oa,isFile:la,isBlob:ca,isRegExp:La,isFunction:Q,isStream:ma,isURLSearchParams:ua,isTypedArray:_a,isFileList:da,forEach:qe,merge:qt,extend:ya,trim:ba,stripBOM:ja,inherits:va,toFlatObject:Na,kindOf:ft,kindOfTest:ie,endsWith:wa,toArray:ka,forEachEntry:Ta,matchAll:Ca,isHTMLForm:Sa,hasOwnProperty:bs,hasOwnProp:bs,reduceDescriptors:lr,freezeMethods:Ea,toObjectSet:Pa,toCamelCase:Aa,noop:Ra,toFiniteNumber:Oa,findKey:ir,global:ye,isContextDefined:or,isSpecCompliantForm:Ma,toJSONObject:Ba,isAsyncFn:Fa,isThenable:Da,setImmediate:cr,asap:$a,isIterable:Ia};function A(s,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}p.inherits(A,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const dr=A.prototype,mr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{mr[s]={value:s}});Object.defineProperties(A,mr);Object.defineProperty(dr,"isAxiosError",{value:!0});A.from=(s,t,r,n,a,i)=>{const o=Object.create(dr);return p.toFlatObject(s,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),A.call(o,s.message,t,r,n,a),o.cause=s,o.name=s.name,i&&Object.assign(o,i),o};const qa=null;function Ut(s){return p.isPlainObject(s)||p.isArray(s)}function hr(s){return p.endsWith(s,"[]")?s.slice(0,-2):s}function ys(s,t,r){return s?s.concat(t).map(function(a,i){return a=hr(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function Ua(s){return p.isArray(s)&&!s.some(Ut)}const Ga=p.toFlatObject(p,{},null,function(t){return/^is[A-Z]/.test(t)});function bt(s,t,r){if(!p.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,r=p.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,x){return!p.isUndefined(x[y])});const n=r.metaTokens,a=r.visitor||h,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(t);if(!p.isFunction(a))throw new TypeError("visitor must be a function");function d(u){if(u===null)return"";if(p.isDate(u))return u.toISOString();if(p.isBoolean(u))return u.toString();if(!c&&p.isBlob(u))throw new A("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(u)||p.isTypedArray(u)?c&&typeof Blob=="function"?new Blob([u]):Buffer.from(u):u}function h(u,y,x){let v=u;if(u&&!x&&typeof u=="object"){if(p.endsWith(y,"{}"))y=n?y:y.slice(0,-2),u=JSON.stringify(u);else if(p.isArray(u)&&Ua(u)||(p.isFileList(u)||p.endsWith(y,"[]"))&&(v=p.toArray(u)))return y=hr(y),v.forEach(function(C,k){!(p.isUndefined(C)||C===null)&&t.append(o===!0?ys([y],k,i):o===null?y:y+"[]",d(C))}),!1}return Ut(u)?!0:(t.append(ys(x,y,i),d(u)),!1)}const m=[],g=Object.assign(Ga,{defaultVisitor:h,convertValue:d,isVisitable:Ut});function f(u,y){if(!p.isUndefined(u)){if(m.indexOf(u)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(u),p.forEach(u,function(v,N){(!(p.isUndefined(v)||v===null)&&a.call(t,v,p.isString(N)?N.trim():N,y,g))===!0&&f(v,y?y.concat(N):[N])}),m.pop()}}if(!p.isObject(s))throw new TypeError("data must be an object");return f(s),t}function js(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ns(s,t){this._pairs=[],s&&bt(s,this,t)}const ur=ns.prototype;ur.append=function(t,r){this._pairs.push([t,r])};ur.toString=function(t){const r=t?function(n){return t.call(this,n,js)}:js;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Wa(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xr(s,t,r){if(!t)return s;const n=r&&r.encode||Wa;p.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=p.isURLSearchParams(t)?t.toString():new ns(t,r).toString(n),i){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class vs{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){p.forEach(this.handlers,function(n){n!==null&&t(n)})}}const pr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},za=typeof URLSearchParams<"u"?URLSearchParams:ns,Ha=typeof FormData<"u"?FormData:null,Va=typeof Blob<"u"?Blob:null,Ja={isBrowser:!0,classes:{URLSearchParams:za,FormData:Ha,Blob:Va},protocols:["http","https","file","blob","url","data"]},as=typeof window<"u"&&typeof document<"u",Gt=typeof navigator=="object"&&navigator||void 0,Za=as&&(!Gt||["ReactNative","NativeScript","NS"].indexOf(Gt.product)<0),Ka=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ya=as&&window.location.href||"http://localhost",Xa=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:as,hasStandardBrowserEnv:Za,hasStandardBrowserWebWorkerEnv:Ka,navigator:Gt,origin:Ya},Symbol.toStringTag,{value:"Module"})),Y={...Xa,...Ja};function Qa(s,t){return bt(s,new Y.classes.URLSearchParams,{visitor:function(r,n,a,i){return Y.isNode&&p.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function ei(s){return p.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ti(s){const t={},r=Object.keys(s);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=s[i];return t}function fr(s){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&p.isArray(a)?a.length:o,c?(p.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!p.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&p.isArray(a[o])&&(a[o]=ti(a[o])),!l)}if(p.isFormData(s)&&p.isFunction(s.entries)){const r={};return p.forEachEntry(s,(n,a)=>{t(ei(n),a,r,0)}),r}return null}function si(s,t,r){if(p.isString(s))try{return(t||JSON.parse)(s),p.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(s)}const Ue={transitional:pr,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=p.isObject(t);if(i&&p.isHTMLForm(t)&&(t=new FormData(t)),p.isFormData(t))return a?JSON.stringify(fr(t)):t;if(p.isArrayBuffer(t)||p.isBuffer(t)||p.isStream(t)||p.isFile(t)||p.isBlob(t)||p.isReadableStream(t))return t;if(p.isArrayBufferView(t))return t.buffer;if(p.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Qa(t,this.formSerializer).toString();if((l=p.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bt(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),si(t)):t}],transformResponse:[function(t){const r=this.transitional||Ue.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(p.isResponse(t)||p.isReadableStream(t))return t;if(t&&p.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?A.from(l,A.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Y.classes.FormData,Blob:Y.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],s=>{Ue.headers[s]={}});const ri=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ni=s=>{const t={};let r,n,a;return s&&s.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&ri[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Ns=Symbol("internals");function Pe(s){return s&&String(s).trim().toLowerCase()}function Xe(s){return s===!1||s==null?s:p.isArray(s)?s.map(Xe):String(s)}function ai(s){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(s);)t[n[1]]=n[2];return t}const ii=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function _t(s,t,r,n,a){if(p.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!p.isString(t)){if(p.isString(n))return t.indexOf(n)!==-1;if(p.isRegExp(n))return n.test(t)}}function oi(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function li(s,t){const r=p.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let ee=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const h=Pe(c);if(!h)throw new Error("header name must be a non-empty string");const m=p.findKey(a,h);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=Xe(l))}const o=(l,c)=>p.forEach(l,(d,h)=>i(d,h,c));if(p.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(p.isString(t)&&(t=t.trim())&&!ii(t))o(ni(t),r);else if(p.isObject(t)&&p.isIterable(t)){let l={},c,d;for(const h of t){if(!p.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?p.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=Pe(t),t){const n=p.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return ai(a);if(p.isFunction(r))return r.call(this,a,n);if(p.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Pe(t),t){const n=p.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||_t(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=Pe(o),o){const l=p.findKey(n,o);l&&(!r||_t(n,n[l],l,r))&&(delete n[l],a=!0)}}return p.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||_t(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return p.forEach(this,(a,i)=>{const o=p.findKey(n,i);if(o){r[o]=Xe(a),delete r[i];return}const l=t?oi(i):String(i).trim();l!==i&&delete r[i],r[l]=Xe(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return p.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&p.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Ns]=this[Ns]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Pe(o);n[l]||(li(a,o),n[l]=!0)}return p.isArray(t)?t.forEach(i):i(t),this}};ee.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(ee.prototype,({value:s},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[r]=n}}});p.freezeMethods(ee);function Tt(s,t){const r=this||Ue,n=t||r,a=ee.from(n.headers);let i=n.data;return p.forEach(s,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function gr(s){return!!(s&&s.__CANCEL__)}function Ae(s,t,r){A.call(this,s??"canceled",A.ERR_CANCELED,t,r),this.name="CanceledError"}p.inherits(Ae,A,{__CANCEL__:!0});function br(s,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?s(r):t(new A("Request failed with status code "+r.status,[A.ERR_BAD_REQUEST,A.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ci(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function di(s,t){s=s||10;const r=new Array(s),n=new Array(s);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),h=n[i];o||(o=d),r[a]=c,n[a]=d;let m=i,g=0;for(;m!==a;)g+=r[m++],m=m%s;if(a=(a+1)%s,a===i&&(i=(i+1)%s),d-o<t)return;const f=h&&d-h;return f?Math.round(g*1e3/f):void 0}}function mi(s,t){let r=0,n=1e3/t,a,i;const o=(d,h=Date.now())=>{r=h,a=null,i&&(clearTimeout(i),i=null),s(...d)};return[(...d)=>{const h=Date.now(),m=h-r;m>=n?o(d,h):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const lt=(s,t,r=3)=>{let n=0;const a=di(50,250);return mi(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),h=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};s(m)},r)},ws=(s,t)=>{const r=s!=null;return[n=>t[0]({lengthComputable:r,total:s,loaded:n}),t[1]]},ks=s=>(...t)=>p.asap(()=>s(...t)),hi=Y.hasStandardBrowserEnv?((s,t)=>r=>(r=new URL(r,Y.origin),s.protocol===r.protocol&&s.host===r.host&&(t||s.port===r.port)))(new URL(Y.origin),Y.navigator&&/(msie|trident)/i.test(Y.navigator.userAgent)):()=>!0,ui=Y.hasStandardBrowserEnv?{write(s,t,r,n,a,i){const o=[s+"="+encodeURIComponent(t)];p.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),p.isString(n)&&o.push("path="+n),p.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xi(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function pi(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function yr(s,t,r){let n=!xi(t);return s&&(n||r==!1)?pi(s,t):t}const _s=s=>s instanceof ee?{...s}:s;function Ne(s,t){t=t||{};const r={};function n(d,h,m,g){return p.isPlainObject(d)&&p.isPlainObject(h)?p.merge.call({caseless:g},d,h):p.isPlainObject(h)?p.merge({},h):p.isArray(h)?h.slice():h}function a(d,h,m,g){if(p.isUndefined(h)){if(!p.isUndefined(d))return n(void 0,d,m,g)}else return n(d,h,m,g)}function i(d,h){if(!p.isUndefined(h))return n(void 0,h)}function o(d,h){if(p.isUndefined(h)){if(!p.isUndefined(d))return n(void 0,d)}else return n(void 0,h)}function l(d,h,m){if(m in t)return n(d,h);if(m in s)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,h,m)=>a(_s(d),_s(h),m,!0)};return p.forEach(Object.keys({...s,...t}),function(h){const m=c[h]||a,g=m(s[h],t[h],h);p.isUndefined(g)&&m!==l||(r[h]=g)}),r}const jr=s=>{const t=Ne({},s);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=ee.from(o),t.url=xr(yr(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(p.isFormData(r)){if(Y.hasStandardBrowserEnv||Y.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...h]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...h].join("; "))}}if(Y.hasStandardBrowserEnv&&(n&&p.isFunction(n)&&(n=n(t)),n||n!==!1&&hi(t.url))){const d=a&&i&&ui.read(i);d&&o.set(a,d)}return t},fi=typeof XMLHttpRequest<"u",gi=fi&&function(s){return new Promise(function(r,n){const a=jr(s);let i=a.data;const o=ee.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,h,m,g,f,u;function y(){f&&f(),u&&u(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout;function v(){if(!x)return;const C=ee.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),_={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:C,config:s,request:x};br(function(O){r(O),y()},function(O){n(O),y()},_),x=null}"onloadend"in x?x.onloadend=v:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(v)},x.onabort=function(){x&&(n(new A("Request aborted",A.ECONNABORTED,s,x)),x=null)},x.onerror=function(){n(new A("Network Error",A.ERR_NETWORK,s,x)),x=null},x.ontimeout=function(){let k=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const _=a.transitional||pr;a.timeoutErrorMessage&&(k=a.timeoutErrorMessage),n(new A(k,_.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,s,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&p.forEach(o.toJSON(),function(k,_){x.setRequestHeader(_,k)}),p.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),l&&l!=="json"&&(x.responseType=a.responseType),d&&([g,u]=lt(d,!0),x.addEventListener("progress",g)),c&&x.upload&&([m,f]=lt(c),x.upload.addEventListener("progress",m),x.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(h=C=>{x&&(n(!C||C.type?new Ae(null,s,x):C),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const N=ci(a.url);if(N&&Y.protocols.indexOf(N)===-1){n(new A("Unsupported protocol "+N+":",A.ERR_BAD_REQUEST,s));return}x.send(i||null)})},bi=(s,t)=>{const{length:r}=s=s?s.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const h=d instanceof Error?d:this.reason;n.abort(h instanceof A?h:new Ae(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,i(new A(`timeout ${t} of ms exceeded`,A.ETIMEDOUT))},t);const l=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),s=null)};s.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>p.asap(l),c}},yi=function*(s,t){let r=s.byteLength;if(r<t){yield s;return}let n=0,a;for(;n<r;)a=n+t,yield s.slice(n,a),n=a},ji=async function*(s,t){for await(const r of vi(s))yield*yi(r,t)},vi=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Ts=(s,t,r,n)=>{const a=ji(s,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await a.next();if(d){l(),c.close();return}let m=h.byteLength;if(r){let g=i+=m;r(g)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},yt=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vr=yt&&typeof ReadableStream=="function",Ni=yt&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),Nr=(s,...t)=>{try{return!!s(...t)}catch{return!1}},wi=vr&&Nr(()=>{let s=!1;const t=new Request(Y.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),Cs=64*1024,Wt=vr&&Nr(()=>p.isReadableStream(new Response("").body)),ct={stream:Wt&&(s=>s.body)};yt&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ct[t]&&(ct[t]=p.isFunction(s[t])?r=>r[t]():(r,n)=>{throw new A(`Response type '${t}' is not supported`,A.ERR_NOT_SUPPORT,n)})})})(new Response);const ki=async s=>{if(s==null)return 0;if(p.isBlob(s))return s.size;if(p.isSpecCompliantForm(s))return(await new Request(Y.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(p.isArrayBufferView(s)||p.isArrayBuffer(s))return s.byteLength;if(p.isURLSearchParams(s)&&(s=s+""),p.isString(s))return(await Ni(s)).byteLength},_i=async(s,t)=>{const r=p.toFiniteNumber(s.getContentLength());return r??ki(t)},Ti=yt&&(async s=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:h,withCredentials:m="same-origin",fetchOptions:g}=jr(s);d=d?(d+"").toLowerCase():"text";let f=bi([a,i&&i.toAbortSignal()],o),u;const y=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let x;try{if(c&&wi&&r!=="get"&&r!=="head"&&(x=await _i(h,n))!==0){let _=new Request(t,{method:"POST",body:n,duplex:"half"}),M;if(p.isFormData(n)&&(M=_.headers.get("content-type"))&&h.setContentType(M),_.body){const[O,K]=ws(x,lt(ks(c)));n=Ts(_.body,Cs,O,K)}}p.isString(m)||(m=m?"include":"omit");const v="credentials"in Request.prototype;u=new Request(t,{...g,signal:f,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:v?m:void 0});let N=await fetch(u,g);const C=Wt&&(d==="stream"||d==="response");if(Wt&&(l||C&&y)){const _={};["status","statusText","headers"].forEach(T=>{_[T]=N[T]});const M=p.toFiniteNumber(N.headers.get("content-length")),[O,K]=l&&ws(M,lt(ks(l),!0))||[];N=new Response(Ts(N.body,Cs,O,()=>{K&&K(),y&&y()}),_)}d=d||"text";let k=await ct[p.findKey(ct,d)||"text"](N,s);return!C&&y&&y(),await new Promise((_,M)=>{br(_,M,{data:k,headers:ee.from(N.headers),status:N.status,statusText:N.statusText,config:s,request:u})})}catch(v){throw y&&y(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new A("Network Error",A.ERR_NETWORK,s,u),{cause:v.cause||v}):A.from(v,v&&v.code,s,u)}}),zt={http:qa,xhr:gi,fetch:Ti};p.forEach(zt,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const Ss=s=>`- ${s}`,Ci=s=>p.isFunction(s)||s===null||s===!1,wr={getAdapter:s=>{s=p.isArray(s)?s:[s];const{length:t}=s;let r,n;const a={};for(let i=0;i<t;i++){r=s[i];let o;if(n=r,!Ci(r)&&(n=zt[(o=String(r)).toLowerCase()],n===void 0))throw new A(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Ss).join(`
`):" "+Ss(i[0]):"as no adapter specified";throw new A("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:zt};function Ct(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Ae(null,s)}function As(s){return Ct(s),s.headers=ee.from(s.headers),s.data=Tt.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),wr.getAdapter(s.adapter||Ue.adapter)(s).then(function(n){return Ct(s),n.data=Tt.call(s,s.transformResponse,n),n.headers=ee.from(n.headers),n},function(n){return gr(n)||(Ct(s),n&&n.response&&(n.response.data=Tt.call(s,s.transformResponse,n.response),n.response.headers=ee.from(n.response.headers))),Promise.reject(n)})}const kr="1.11.0",jt={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{jt[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const Ls={};jt.transitional=function(t,r,n){function a(i,o){return"[Axios v"+kr+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new A(a(o," has been removed"+(r?" in "+r:"")),A.ERR_DEPRECATED);return r&&!Ls[o]&&(Ls[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};jt.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Si(s,t,r){if(typeof s!="object")throw new A("options must be an object",A.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=s[i],c=l===void 0||o(l,i,s);if(c!==!0)throw new A("option "+i+" must be "+c,A.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new A("Unknown option "+i,A.ERR_BAD_OPTION)}}const Qe={assertOptions:Si,validators:jt},oe=Qe.validators;let ve=class{constructor(t){this.defaults=t||{},this.interceptors={request:new vs,response:new vs}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ne(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Qe.assertOptions(n,{silentJSONParsing:oe.transitional(oe.boolean),forcedJSONParsing:oe.transitional(oe.boolean),clarifyTimeoutError:oe.transitional(oe.boolean)},!1),a!=null&&(p.isFunction(a)?r.paramsSerializer={serialize:a}:Qe.assertOptions(a,{encode:oe.function,serialize:oe.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Qe.assertOptions(r,{baseUrl:oe.spelling("baseURL"),withXsrfToken:oe.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&p.merge(i.common,i[r.method]);i&&p.forEach(["delete","get","head","post","put","patch","common"],u=>{delete i[u]}),r.headers=ee.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let h,m=0,g;if(!c){const u=[As.bind(this),void 0];for(u.unshift(...l),u.push(...d),g=u.length,h=Promise.resolve(r);m<g;)h=h.then(u[m++],u[m++]);return h}g=l.length;let f=r;for(m=0;m<g;){const u=l[m++],y=l[m++];try{f=u(f)}catch(x){y.call(this,x);break}}try{h=As.call(this,f)}catch(u){return Promise.reject(u)}for(m=0,g=d.length;m<g;)h=h.then(d[m++],d[m++]);return h}getUri(t){t=Ne(this.defaults,t);const r=yr(t.baseURL,t.url,t.allowAbsoluteUrls);return xr(r,t.params,t.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(t){ve.prototype[t]=function(r,n){return this.request(Ne(n||{},{method:t,url:r,data:(n||{}).data}))}});p.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(Ne(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ve.prototype[t]=r(),ve.prototype[t+"Form"]=r(!0)});let Ai=class _r{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Ae(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new _r(function(a){t=a}),cancel:t}}};function Li(s){return function(r){return s.apply(null,r)}}function Ei(s){return p.isObject(s)&&s.isAxiosError===!0}const Ht={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ht).forEach(([s,t])=>{Ht[t]=s});function Tr(s){const t=new ve(s),r=sr(ve.prototype.request,t);return p.extend(r,ve.prototype,t,{allOwnKeys:!0}),p.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Tr(Ne(s,a))},r}const q=Tr(Ue);q.Axios=ve;q.CanceledError=Ae;q.CancelToken=Ai;q.isCancel=gr;q.VERSION=kr;q.toFormData=bt;q.AxiosError=A;q.Cancel=q.CanceledError;q.all=function(t){return Promise.all(t)};q.spread=Li;q.isAxiosError=Ei;q.mergeConfig=Ne;q.AxiosHeaders=ee;q.formToJSON=s=>fr(p.isHTMLForm(s)?new FormData(s):s);q.getAdapter=wr.getAdapter;q.HttpStatusCode=Ht;q.default=q;const{Axios:Al,AxiosError:Ll,CanceledError:El,isCancel:Pl,CancelToken:Rl,VERSION:Ol,all:Ml,Cancel:Bl,isAxiosError:Fl,spread:Dl,toFormData:$l,AxiosHeaders:Il,HttpStatusCode:ql,formToJSON:Ul,getAdapter:Gl,mergeConfig:Wl}=q,Pi="https://conquestk.com/api",Oe=q.create({baseURL:Pi});Oe.interceptors.request.use(s=>{const t=localStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});const is={async login(s){return(await Oe.post("/auth/login",s)).data},async register(s){return(await Oe.post("/auth/register",s)).data},async getProfile(){return(await Oe.get("/auth/me")).data},async logout(){return(await Oe.post("/auth/logout")).data}},Ri={user:null,token:localStorage.getItem("token"),isLoading:!1,error:null,isAuthenticated:!1},et=X("auth/login",async s=>{const t=await is.login(s);return localStorage.setItem("token",t.token),t}),tt=X("auth/register",async s=>{const t=await is.register(s);return localStorage.setItem("token",t.token),t}),Vt=X("auth/checkAuth",async()=>{if(!localStorage.getItem("token"))throw new Error("No token found");return await is.getProfile()}),Cr=es({name:"auth",initialState:Ri,reducers:{logout:s=>{s.user=null,s.token=null,s.isAuthenticated=!1,localStorage.removeItem("token")},clearError:s=>{s.error=null}},extraReducers:s=>{s.addCase(et.pending,t=>{t.isLoading=!0,t.error=null}).addCase(et.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0}).addCase(et.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message||"Login failed"}).addCase(tt.pending,t=>{t.isLoading=!0,t.error=null}).addCase(tt.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0}).addCase(tt.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message||"Registration failed"}).addCase(Vt.fulfilled,(t,r)=>{t.user=r.payload.user,t.isAuthenticated=!0}).addCase(Vt.rejected,t=>{t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token")})}}),{logout:Oi,clearError:Sr}=Cr.actions,Mi=Cr.reducer,Bi=({isOpen:s,onClose:t})=>{const[r,n]=b.useState("account"),a=b.useRef(null);if(b.useEffect(()=>{const l=c=>{c.key==="Escape"&&t()};return s&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[s,t]),b.useEffect(()=>{const l=c=>{a.current&&!a.current.contains(c.target)&&t()};return s&&document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[s,t]),!s)return null;const i=[{id:"account",label:"Account",icon:"👤"},{id:"game",label:"Game",icon:"🎮"},{id:"audio",label:"Audio",icon:"🔊"},{id:"display",label:"Display",icon:"🖥️"},{id:"notifications",label:"Notifications",icon:"🔔"},{id:"privacy",label:"Privacy",icon:"🛡️"},{id:"advanced",label:"Advanced",icon:"⚙️"}],o=()=>{switch(r){case"account":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),e.jsx("input",{type:"text",className:"input w-full",placeholder:"Enter username",defaultValue:"Player123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",className:"input w-full",placeholder:"Enter email",defaultValue:"player@example.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Avatar"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-2xl font-bold",children:"P"}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-secondary btn-sm mb-2",children:"📁 Upload New Avatar"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Recommended: 256x256px, JPG or PNG"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"btn btn-secondary w-full justify-start",children:"🔑 Change Password"}),e.jsx("button",{className:"btn btn-secondary w-full justify-start",children:"📱 Two-Factor Authentication"}),e.jsx("button",{className:"btn btn-danger w-full justify-start",children:"🗑️ Delete Account"})]})]})]});case"game":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Gameplay Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Auto-end Turn"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Automatically end turn when no moves available"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Show Attack Animations"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Display dice rolling and battle animations"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Fast Battle Mode"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Skip individual dice animations for faster gameplay"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Turn Timer"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Turn Time (seconds)"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"60",children:"60 seconds"}),e.jsx("option",{value:"120",selected:!0,children:"120 seconds"}),e.jsx("option",{value:"180",children:"180 seconds"}),e.jsx("option",{value:"300",children:"300 seconds"}),e.jsx("option",{value:"0",children:"No limit"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Map Preferences"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Preferred Map Style"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"classic",children:"Classic Risk"}),e.jsx("option",{value:"custom",selected:!0,children:"Custom Maps"}),e.jsx("option",{value:"both",children:"Both"})]})]})})]})]});case"audio":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Volume Controls"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Master Volume"}),e.jsx("input",{type:"range",className:"w-full",min:"0",max:"100",defaultValue:"75"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sound Effects"}),e.jsx("input",{type:"range",className:"w-full",min:"0",max:"100",defaultValue:"60"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Background Music"}),e.jsx("input",{type:"range",className:"w-full",min:"0",max:"100",defaultValue:"40"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Voice Chat"}),e.jsx("input",{type:"range",className:"w-full",min:"0",max:"100",defaultValue:"80"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Audio Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Mute When Minimized"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Automatically mute when game window is not active"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Battle Sound Effects"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Play sounds during dice battles"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]})]});case"display":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Theme"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"border border-gray-600 rounded-lg p-3 cursor-pointer hover:border-blue-400 transition-colors bg-gray-800",children:[e.jsx("div",{className:"w-full h-8 bg-gradient-to-r from-gray-800 to-gray-900 rounded mb-2"}),e.jsx("p",{className:"text-sm text-center",children:"Dark (Current)"})]}),e.jsxs("div",{className:"border border-gray-600 rounded-lg p-3 cursor-pointer hover:border-blue-400 transition-colors",children:[e.jsx("div",{className:"w-full h-8 bg-gradient-to-r from-gray-100 to-gray-200 rounded mb-2"}),e.jsx("p",{className:"text-sm text-center",children:"Light"})]}),e.jsxs("div",{className:"border border-gray-600 rounded-lg p-3 cursor-pointer hover:border-blue-400 transition-colors",children:[e.jsx("div",{className:"w-full h-8 bg-gradient-to-r from-blue-800 to-purple-800 rounded mb-2"}),e.jsx("p",{className:"text-sm text-center",children:"Gaming"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Display Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Fullscreen Mode"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Use fullscreen for immersive gaming"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"High Contrast Mode"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Increase contrast for better visibility"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Reduce Motion"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Minimize animations and transitions"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Map Display"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Territory Label Size"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"small",children:"Small"}),e.jsx("option",{value:"medium",selected:!0,children:"Medium"}),e.jsx("option",{value:"large",children:"Large"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Show Territory Names"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Display territory names on map"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]})]});case"notifications":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Game Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Turn Notifications"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Get notified when it's your turn"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Game Invitations"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Receive notifications for game invites"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Game Ended"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Notification when games you're in end"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Social Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Friend Requests"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Notifications for new friend requests"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Messages"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Private message notifications"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Email Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Weekly Summary"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Receive weekly gameplay statistics"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Tournament Updates"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Get notified about tournaments"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]})]});case"privacy":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Profile Visibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Visibility"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"public",selected:!0,children:"Public - Anyone can view"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"private",children:"Private - Hidden"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Show Game Statistics"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Allow others to see your win/loss record"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Show Online Status"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Let friends see when you're online"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Communication"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Who can message you"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"everyone",children:"Everyone"}),e.jsx("option",{value:"friends",selected:!0,children:"Friends Only"}),e.jsx("option",{value:"nobody",children:"Nobody"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Who can invite you to games"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"everyone",selected:!0,children:"Everyone"}),e.jsx("option",{value:"friends",children:"Friends Only"}),e.jsx("option",{value:"nobody",children:"Nobody"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data & Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Gameplay Analytics"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Help improve the game with usage data"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Performance Metrics"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Share performance data to help optimize the game"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]})]})]})]});case"advanced":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Graphics Quality"}),e.jsxs("select",{className:"input w-full",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",selected:!0,children:"Medium"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"ultra",children:"Ultra"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Hardware Acceleration"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Use GPU for rendering (requires restart)"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Enable V-Sync"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Synchronize frame rate with display"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Developer Options"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Debug Mode"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Show additional debug information"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Console Logging"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Enable detailed console logs"})]}),e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{className:"slider"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Data Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"btn btn-secondary w-full justify-start",children:"📊 Export Game Data"}),e.jsx("button",{className:"btn btn-secondary w-full justify-start",children:"💾 Backup Settings"}),e.jsx("button",{className:"btn btn-danger w-full justify-start",children:"🗑️ Clear Cache"}),e.jsx("button",{className:"btn btn-danger w-full justify-start",children:"⚠️ Reset All Settings"})]})]})]});default:return e.jsx("div",{children:"Settings content not found"})}};return e.jsx("div",{className:"fixed inset-0 bg-black/75 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{ref:a,className:"bg-gray-800 rounded-xl border border-gray-600 w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"⚙️"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Settings"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Customize your game experience"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-400 hidden md:block",children:["Press ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs",children:"Esc"})," to close"]}),e.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center hover:bg-gray-700 rounded-lg transition-colors text-gray-400 hover:text-white",children:"✕"})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-64 bg-gray-900 border-r border-gray-700 flex-shrink-0 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:e.jsx("nav",{className:"space-y-1",children:i.map(l=>e.jsxs("button",{onClick:()=>n(l.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${r===l.id?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[e.jsx("span",{className:"text-lg",children:l.icon}),e.jsx("span",{className:"font-medium",children:l.label})]},l.id))})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-8",children:o()})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-700 bg-gray-900",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Changes are saved automatically"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{onClick:t,className:"btn btn-primary",children:"Save & Close"})]})]})]})})},Fi=()=>{const s=ts(),r=(()=>{const n=s.pathname.split("/").filter(Boolean),a=[{label:"Home",path:"/",icon:"🏠"}];let i="";for(let o=0;o<n.length;o++){const l=n[o];i+=`/${l}`;const c={lobby:{label:"Game Lobby",path:i,icon:"🎯"},games:{label:"My Games",path:i,icon:"🎮"},game:{label:"Game",icon:"⚔️"},create:{label:"Create Game",path:i,icon:"➕"},editor:{label:"Map Editor",path:i,icon:"✏️"},maps:{label:"Maps",path:i,icon:"🗺️"},community:{label:"Community",path:i,icon:"👥"},profile:{label:"Profile",path:i,icon:"👤"},leaderboard:{label:"Leaderboard",path:i,icon:"🏆"},learn:{label:"Learn & Help",path:i,icon:"📚"},browse:{label:"Browse Games",path:i,icon:"🌍"},private:{label:"Private Games",path:i,icon:"🔒"},tournaments:{label:"Tournaments",path:i,icon:"🏆"},active:{label:"Active Games",path:i,icon:"⚡"},completed:{label:"Completed",path:i,icon:"✅"},spectate:{label:"Spectate",path:i,icon:"👁️"},new:{label:"New Map",path:i,icon:"🆕"},forum:{label:"Forum",path:i,icon:"💬"},clans:{label:"Clans",path:i,icon:"⚔️"},events:{label:"Events",path:i,icon:"🎉"},stats:{label:"Statistics",path:i,icon:"📈"},achievements:{label:"Achievements",path:i,icon:"🎖️"},tutorial:{label:"Tutorial",path:i,icon:"🎯"},rules:{label:"Rules",path:i,icon:"📜"},strategies:{label:"Strategies",path:i,icon:"🧠"},videos:{label:"Videos",path:i,icon:"📹"},"map-creation":{label:"Map Creation Guide",path:i,icon:"🎓"},quick:{label:"Quick Match",path:i,icon:"⚡"},custom:{label:"Custom Game",path:i,icon:"🎨"},tournament:{label:"Tournament",path:i,icon:"🏆"},login:{label:"Login",path:i,icon:"🔑"},register:{label:"Register",path:i,icon:"📝"},dashboard:{label:"Dashboard",path:i,icon:"📊"},play:{label:"Play",path:i,icon:"🎮"},"map-editor":{label:"Map Editor",path:i,icon:"✏️"},"simple-map":{label:"Simple Map Demo",path:i,icon:"🏰"},"risk-map":{label:"Risk Map Demo",path:i,icon:"🌍"},room:{label:"Game Room",icon:"🏠"}};if(c[l])a.push(c[l]);else{const d=n[o-1];if(d==="game")a.push({label:`Game #${l.slice(0,8)}`,icon:"⚔️"});else if(d==="room")a.push({label:`Room #${l.slice(0,8)}`,icon:"🏠"});else if(d==="profile"&&l!=="stats"&&l!=="achievements")a.push({label:l,icon:"👤"});else if(d==="editor"&&l!=="new"&&l!=="browse")a.push({label:`Map #${l.slice(0,8)}`,icon:"🗺️"});else if(d==="leaderboard"){const h={weekly:"Weekly Rankings",monthly:"Monthly Rankings",alltime:"All-Time Rankings",tournament:"Tournament Rankings"};a.push({label:h[l]||l,path:i,icon:"🏆"})}else a.push({label:l.charAt(0).toUpperCase()+l.slice(1),path:i})}}return a})();return s.pathname==="/"||r.length<=1?null:e.jsx("nav",{className:"breadcrumb bg-gray-900/50 border-b border-gray-700 px-6 py-3",children:e.jsx("ol",{className:"flex items-center space-x-2 text-sm",children:r.map((n,a)=>e.jsxs("li",{className:"flex items-center",children:[a>0&&e.jsx("span",{className:"mx-2 text-gray-500 select-none",children:"/"}),n.path&&a<r.length-1?e.jsxs(L,{to:n.path,className:"flex items-center gap-1.5 text-gray-400 hover:text-blue-400 transition-colors",children:[n.icon&&e.jsx("span",{className:"text-xs",children:n.icon}),e.jsx("span",{children:n.label})]}):e.jsxs("span",{className:"flex items-center gap-1.5 text-white font-medium",children:[n.icon&&e.jsx("span",{className:"text-xs",children:n.icon}),e.jsx("span",{children:n.label})]})]},a))})})};function Di({children:s}){const{isAuthenticated:t,user:r}=ue(y=>y.auth),n=xt();ts();const[a,i]=b.useState(!1),[o,l]=b.useState(new Set),[c,d]=b.useState(!1),h=[{id:"game",title:"Game",icon:"🎮",items:[{path:"/lobby",label:"Quick Match",icon:"🎯"},{path:"/create",label:"Create Private Room",icon:"🏠"},{path:"/lobby/browse",label:"Browse Public Games",icon:"🌍"},{path:"/community",label:"Find Friends",icon:"👥"},{path:"/learn/tutorial",label:"Tutorial",icon:"📚"},{path:"/simple-map",label:"Practice vs AI",icon:"🤖"}]},{id:"stats",title:"Stats & Progress",icon:"📊",items:[{path:"/leaderboard",label:"Leaderboard",icon:"🏆"},{path:"/games/completed",label:"Match History",icon:"📈"},{path:"/profile/achievements",label:"Achievements",icon:"🎖️"},{path:"/profile/stats",label:"Personal Stats",icon:"📊"},{path:"/maps",label:"Territory Heatmap",icon:"🗺️"}]},{id:"maps",title:"Maps & Editor",icon:"🗺️",items:[{path:"/editor/browse",label:"Browse Maps",icon:"🖼️"},{path:"/editor/new",label:"Create Map",icon:"✏️"},{path:"/maps",label:"My Maps",icon:"📁"},{path:"/simple-map",label:"Simple Demo",icon:"🏰"},{path:"/risk-map",label:"Risk Demo",icon:"🌍"}]}];b.useEffect(()=>{const y=x=>{(x.metaKey||x.ctrlKey)&&x.key===","&&(x.preventDefault(),d(!0)),x.key==="Escape"&&(i(!1),d(!1))};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[]);const m=()=>{i(!a)},g=y=>{const x=new Set(o);x.has(y)?x.delete(y):x.add(y),l(x)},f=()=>{n(Oi()),i(!1)},u=()=>{var y;return((y=r==null?void 0:r.username)==null?void 0:y.charAt(0).toUpperCase())||"U"};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"nav-bar",children:e.jsxs("div",{className:"nav-container",children:[e.jsxs("div",{className:"nav-left",children:[e.jsxs("div",{className:`hamburger ${a?"active":""}`,onClick:m,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]}),e.jsx(L,{to:"/",className:"logo",children:"⚔️ CONQUEST"})]}),e.jsx("div",{className:"nav-links",children:t?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d(!0),className:"btn btn-ghost",title:"Settings (Cmd/Ctrl + ,)",children:"⚙️"}),e.jsx(L,{to:"/lobby",className:"btn btn-secondary",children:"Quick Match"}),e.jsx(L,{to:"/create",className:"btn btn-primary",children:"Create Game"})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/login",className:"btn btn-secondary",children:"Login"}),e.jsx(L,{to:"/register",className:"btn btn-primary",children:"Register"})]})})]})}),e.jsxs("div",{className:`slide-menu ${a?"active":""}`,children:[e.jsxs("div",{className:"menu-header",children:[e.jsx("div",{className:"logo",style:{fontSize:"1.25rem"},children:"⚔️ CONQUEST"}),e.jsx("div",{className:"menu-close",onClick:m,children:"✕"})]}),t&&e.jsxs("div",{className:"user-profile",children:[e.jsx("div",{className:"user-avatar",children:u()}),e.jsx("div",{className:"user-name",children:r==null?void 0:r.username}),e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"0.875rem"},children:"Rank: Field Marshal"}),e.jsxs("div",{className:"user-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"147"}),e.jsx("div",{className:"stat-label",children:"WINS"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"82%"}),e.jsx("div",{className:"stat-label",children:"WIN RATE"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("div",{className:"stat-value",children:"2,341"}),e.jsx("div",{className:"stat-label",children:"RATING"})]})]})]}),h.map(y=>e.jsxs("div",{className:"menu-section",children:[e.jsxs("div",{className:"menu-section-header",onClick:()=>g(y.id),children:[e.jsxs("div",{className:"menu-section-title",children:[e.jsx("span",{className:"menu-icon",children:y.icon}),e.jsx("span",{children:y.title})]}),e.jsx("span",{className:`chevron ${o.has(y.id)?"open":""}`,children:"▼"})]}),e.jsx("div",{className:`menu-dropdown ${o.has(y.id)?"open":""}`,children:y.items.map(x=>e.jsx(L,{to:x.path,className:"menu-item",onClick:()=>i(!1),children:e.jsxs("span",{children:[x.icon," ",x.label]})},x.path))})]},y.id)),e.jsx("div",{className:"menu-section",children:e.jsxs("div",{className:"menu-section-header",onClick:()=>{d(!0),i(!1)},children:[e.jsxs("div",{className:"menu-section-title",children:[e.jsx("span",{className:"menu-icon",children:"⚙️"}),e.jsx("span",{children:"Settings"})]}),e.jsx("span",{className:"chevron",children:"→"})]})}),e.jsx("div",{style:{padding:"1rem"},children:t?e.jsx("button",{onClick:f,className:"btn btn-danger",style:{width:"100%"},children:"🚪 Sign Out"}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[e.jsx(L,{to:"/login",className:"btn btn-secondary",style:{width:"100%"},children:"Login"}),e.jsx(L,{to:"/register",className:"btn btn-primary",style:{width:"100%"},children:"Register"})]})})]}),e.jsx("div",{className:`menu-overlay ${a?"active":""}`,onClick:m}),e.jsxs("div",{className:"page-container",children:[e.jsx(Fi,{}),e.jsx("main",{className:"main-content",children:s})]}),e.jsx(Bi,{isOpen:c,onClose:()=>d(!1)})]})}const D=({children:s,requireAuth:t=!0,requireAdmin:r=!1})=>{const{isAuthenticated:n,user:a}=ue(o=>o.auth),i=ts();return t&&!n?e.jsx(je,{to:"/login",state:{from:i},replace:!0}):r&&(!a||a.role!=="admin")?e.jsx(je,{to:"/",replace:!0}):n&&(i.pathname==="/login"||i.pathname==="/register")?e.jsx(je,{to:"/lobby",replace:!0}):e.jsx(e.Fragment,{children:s})},$i=()=>{const{isAuthenticated:s}=ue(c=>c.auth),[t,r]=b.useState("ATTACK"),n=[{id:"1",name:"World Domination",players:4,maxPlayers:6,map:"Classic Map",timer:"2min",status:"waiting"},{id:"2",name:"Pirate's Cove",players:2,maxPlayers:4,map:"Pirate Theme",status:"waiting"},{id:"3",name:"Speed Conquest",players:5,maxPlayers:6,map:"Small Map",timer:"30s",status:"waiting"}],a=[{icon:"🎲",title:"Real-time Battles",description:"Authentic dice mechanics with smooth animations"},{icon:"🌍",title:"Multiple Maps",description:"Classic world map plus themed variations"},{icon:"👥",title:"6 Player Support",description:"Epic battles with up to 6 simultaneous players"},{icon:"🎨",title:"Custom Themes",description:"Choose from multiple visual themes"}],i=[{id:"1",x:20,y:25,armies:8,player:1},{id:"2",x:30,y:20,armies:5,player:2},{id:"3",x:40,y:30,armies:12,player:1},{id:"4",x:25,y:40,armies:3,player:3},{id:"5",x:50,y:25,armies:7,player:4},{id:"6",x:60,y:35,armies:15,player:1},{id:"7",x:70,y:30,armies:9,player:2},{id:"8",x:35,y:50,armies:4,player:3},{id:"9",x:55,y:45,armies:6,player:4},{id:"10",x:45,y:60,armies:10,player:1},{id:"11",x:65,y:55,armies:11,player:2},{id:"12",x:75,y:50,armies:2,player:3}],o=c=>["","#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899"][c]||"#6b7280",l=(c,d)=>{const h=[],m=["A","B","C","D","E","F"],g=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899"];for(let f=0;f<d;f++)f<c?h.push(e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-600 flex items-center justify-center text-xs font-bold",style:{backgroundColor:g[f]},children:m[f]},f)):h.push(e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-600 bg-gray-700 flex items-center justify-center text-xs text-gray-400",children:"?"},f));return h};return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("section",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-transparent"}),e.jsxs("div",{className:"relative container mx-auto px-8 py-16 text-center",children:[e.jsx("h1",{className:"text-6xl font-bold mb-6 gradient-text",children:"Conquer the World"}),e.jsx("p",{className:"text-xl text-gray-300 mb-8 max-w-2xl mx-auto",children:"Strategic multiplayer warfare. Command armies, forge alliances, dominate territories."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:s?e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/lobby",className:"btn btn-primary btn-lg",children:"⚡ Quick Match"}),e.jsx(L,{to:"/lobby",className:"btn btn-secondary btn-lg",children:"🎮 Create Private Room"})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/register",className:"btn btn-primary btn-lg",children:"⚡ Join the Battle"}),e.jsx(L,{to:"/simple-map",className:"btn btn-secondary btn-lg",children:"🎮 Try Demo"})]})})]})]}),e.jsx("section",{className:"container mx-auto px-8 py-16",children:e.jsxs("div",{className:"card max-w-6xl mx-auto overflow-hidden",children:[e.jsxs("div",{className:"card-header bg-gray-800 border-b border-gray-700",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:`px-4 py-2 rounded text-sm font-medium transition-colors ${t==="REINFORCE"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,onClick:()=>r("REINFORCE"),children:"REINFORCE"}),e.jsx("button",{className:`px-4 py-2 rounded text-sm font-medium transition-colors ${t==="ATTACK"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,onClick:()=>r("ATTACK"),children:"ATTACK"}),e.jsx("button",{className:`px-4 py-2 rounded text-sm font-medium transition-colors ${t==="FORTIFY"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300"}`,onClick:()=>r("FORTIFY"),children:"FORTIFY"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Turn 12"}),e.jsx("span",{className:"text-blue-400 font-bold",children:"Your Turn"})]})]}),e.jsxs("div",{className:"relative h-96 bg-gradient-to-br from-blue-900 to-purple-900 overflow-hidden",children:[i.map(c=>e.jsx("div",{className:"absolute w-12 h-12 rounded-full border-4 border-white flex items-center justify-center font-bold cursor-pointer transition-all duration-300 hover:scale-125 hover:z-10 shadow-lg",style:{left:`${c.x}%`,top:`${c.y}%`,backgroundColor:o(c.player),transform:"translate(-50%, -50%)"},children:c.armies},c.id)),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-gray-300",children:"Current Phase:"}),e.jsx("div",{className:"text-lg font-bold text-blue-400",children:t})]})]})]})}),s&&e.jsxs("section",{className:"container mx-auto px-8 py-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Active Games"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(c=>e.jsxs("div",{className:"card hover:border-blue-500 cursor-pointer transition-all duration-300",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{className:"card-title",children:c.name}),e.jsxs("span",{className:"badge badge-success",children:[c.players,"/",c.maxPlayers," Players"]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"flex gap-2 mb-4",children:l(c.players,c.maxPlayers)}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-400",children:[c.timer&&e.jsxs("span",{children:["⏱️ ",c.timer]}),e.jsxs("span",{children:["🗺️ ",c.map]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("button",{className:"btn btn-primary w-full",children:"Join Game"})})]},c.id))}),e.jsx("div",{className:"text-center mt-8",children:e.jsx(L,{to:"/play",className:"btn btn-secondary",children:"View All Games"})})]}),e.jsx("section",{className:"container mx-auto px-8 py-16",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((c,d)=>e.jsxs("div",{className:"card text-center hover:bg-gray-700 transition-all duration-300",children:[e.jsx("div",{className:"text-4xl mb-4",children:c.icon}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:c.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:c.description})]},d))})}),!s&&e.jsx("section",{className:"container mx-auto px-8 py-16 text-center",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Ready to Begin Your Conquest?"}),e.jsx("p",{className:"text-gray-300 mb-8",children:"Join thousands of strategists in the ultimate battle for world domination"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(L,{to:"/register",className:"btn btn-primary btn-lg",children:"Create Account"}),e.jsx(L,{to:"/login",className:"btn btn-secondary btn-lg",children:"Sign In"})]})]})})]})};function Ii(){const[s,t]=b.useState(""),[r,n]=b.useState(""),a=xt(),{isLoading:i,error:o,isAuthenticated:l}=ue(d=>d.auth);if(l)return e.jsx(je,{to:"/lobby",replace:!0});const c=async d=>{d.preventDefault(),a(Sr()),a(et({email:s,password:r}))};return e.jsxs("div",{className:"max-w-md mx-auto bg-gray-800 rounded-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Login"}),o&&e.jsx("div",{className:"bg-red-600 text-white p-3 rounded mb-4",children:o}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:s,onChange:d=>t(d.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:d=>n(d.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-800 text-white font-bold py-2 px-4 rounded transition-colors",children:i?"Logging in...":"Login"})]}),e.jsxs("p",{className:"mt-4 text-center text-gray-400",children:["Don't have an account?"," ",e.jsx(L,{to:"/register",className:"text-blue-400 hover:text-blue-300",children:"Register here"})]})]})}function qi(){const[s,t]=b.useState(""),[r,n]=b.useState(""),[a,i]=b.useState(""),[o,l]=b.useState(""),c=xt(),{isLoading:d,error:h,isAuthenticated:m}=ue(f=>f.auth);if(m)return e.jsx(je,{to:"/lobby",replace:!0});const g=async f=>{f.preventDefault(),c(Sr()),a===o&&c(tt({username:s,email:r,password:a}))};return e.jsxs("div",{className:"max-w-md mx-auto bg-gray-800 rounded-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Register"}),h&&e.jsx("div",{className:"bg-red-600 text-white p-3 rounded mb-4",children:h}),a!==o&&o&&e.jsx("div",{className:"bg-red-600 text-white p-3 rounded mb-4",children:"Passwords do not match"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"Username"}),e.jsx("input",{type:"text",id:"username",value:s,onChange:f=>t(f.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:r,onChange:f=>n(f.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:a,onChange:f=>i(f.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:f=>l(f.target.value),required:!0,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white"})]}),e.jsx("button",{type:"submit",disabled:d||a!==o,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-green-800 text-white font-bold py-2 px-4 rounded transition-colors",children:d?"Creating account...":"Register"})]}),e.jsxs("p",{className:"mt-4 text-center text-gray-400",children:["Already have an account?"," ",e.jsx(L,{to:"/login",className:"text-blue-400 hover:text-blue-300",children:"Login here"})]})]})}const Es=()=>{const[s,t]=b.useState("global");return e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Leaderboard"}),e.jsx("p",{className:"text-gray-400",children:"Top players and competitive rankings"})]})}),e.jsxs("div",{className:"flex gap-2 mb-8 border-b border-gray-700",children:[e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="global"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("global"),children:"🌍 Global Rankings"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="friends"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("friends"),children:"👥 Friends"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="clans"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("clans"),children:"⚔️ Clans"})]}),e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("p",{className:"text-lg",children:"Leaderboard system will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show player rankings, statistics, and competitive data"})]})]})},Ps=()=>{const[s,t]=b.useState("tutorial");return e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Learn to Play"}),e.jsx("p",{className:"text-gray-400",children:"Master the art of strategic warfare"})]})}),e.jsxs("div",{className:"flex gap-2 mb-8 border-b border-gray-700",children:[e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="tutorial"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("tutorial"),children:"🎯 Tutorial"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="rules"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("rules"),children:"📜 Rules"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="strategies"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("strategies"),children:"🧠 Strategies"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="videos"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("videos"),children:"📹 Videos"})]}),e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📚"}),e.jsx("p",{className:"text-lg",children:"Learning resources will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will include interactive tutorials, strategy guides, and video content"})]})]})},Ui=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-8xl mb-8",children:"🗺️"}),e.jsx("h1",{className:"text-6xl font-bold gradient-text mb-4",children:"404"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Territory Not Found"}),e.jsx("p",{className:"text-gray-400 mb-8 max-w-md",children:"The page you're looking for has been conquered by another player. Let's get you back to safer territory."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(L,{to:"/",className:"btn btn-primary",children:"🏠 Return Home"}),e.jsx(L,{to:"/lobby",className:"btn btn-secondary",children:"🎮 Find a Game"})]})]})}),Rs=()=>{const[s,t]=b.useState("browse");return e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Game Lobby"}),e.jsx("p",{className:"text-gray-400",children:"Find and join games, or create your own"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{to:"/create",className:"btn btn-primary",children:"🎮 Create Game"}),e.jsx("button",{className:"btn btn-secondary",children:"🔍 Filter Games"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-8 border-b border-gray-700",children:[e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="browse"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("browse"),children:"🌍 Browse Public Games"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="private"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("private"),children:"🔒 Join Private Game"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="tournaments"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("tournaments"),children:"🏆 Tournaments"})]}),e.jsxs("div",{className:"min-h-96",children:[s==="browse"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Public Games"}),e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎲"}),e.jsx("p",{className:"text-lg",children:"Browse and join public games will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show active lobbies, player counts, maps, and join buttons"})]})]}),s==="private"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Join Private Game"}),e.jsxs("div",{className:"max-w-md mx-auto text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔐"}),e.jsx("p",{className:"text-lg mb-6",children:"Enter game code to join private game"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Enter game code...",className:"input w-full text-center text-lg"}),e.jsx("button",{className:"btn btn-primary w-full",children:"Join Game"})]})]})]}),s==="tournaments"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Tournaments"}),e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("p",{className:"text-lg",children:"Tournament system will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show active tournaments, brackets, and registration"})]})]})]})]})},Gi=()=>{const[s,t]=b.useState("active"),r=[{id:"game1",name:"World Conquest",turn:"Your Turn",players:4,map:"Classic World",timeLeft:"2h 15m",status:"active"},{id:"game2",name:"European Theater",turn:"Player 3",players:6,map:"Europe",timeLeft:"45m",status:"waiting"}];return e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"My Games"}),e.jsx("p",{className:"text-gray-400",children:"Manage your active and completed games"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{to:"/lobby",className:"btn btn-primary",children:"🎮 New Game"}),e.jsx("button",{className:"btn btn-secondary",children:"📊 Statistics"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-8 border-b border-gray-700",children:[e.jsxs("button",{className:`px-6 py-3 font-medium transition-colors relative ${s==="active"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("active"),children:["⚡ Active Games",e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center",children:"2"})]}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="completed"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("completed"),children:"✅ Completed"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="spectate"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("spectate"),children:"👁️ Spectate"})]}),e.jsxs("div",{className:"min-h-96",children:[s==="active"&&e.jsx("div",{children:e.jsx("div",{className:"grid gap-4",children:r.map(n=>e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"card-title",children:n.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[n.players," players • ",n.map]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-lg font-bold ${n.turn==="Your Turn"?"text-green-400":"text-yellow-400"}`,children:n.turn}),e.jsxs("div",{className:"text-sm text-gray-400",children:[n.timeLeft," left"]})]}),e.jsx(L,{to:`/game/${n.id}`,className:`btn ${n.turn==="Your Turn"?"btn-primary":"btn-secondary"}`,children:n.turn==="Your Turn"?"⚡ Take Turn":"👁️ Spectate"})]})]})},n.id))})}),s==="completed"&&e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📚"}),e.jsx("p",{className:"text-lg",children:"Completed games history will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show match results, statistics, and replay options"})]}),s==="spectate"&&e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"👁️"}),e.jsx("p",{className:"text-lg",children:"Live game spectating will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will show public games you can watch"})]})]})]})},Ar=({territories:s,onTerritoryClick:t,onTerritoryHover:r,getTerritoryColor:n,hoveredTerritory:a,selectedTerritory:i,selectedTargetTerritory:o,validTargets:l,pendingAction:c})=>{const d=m=>{const g="cursor-pointer transition-all duration-200";let f="",u="2",y="#333";return i===m?(f+=" drop-shadow-lg",u="4",y="#FFD700"):o===m?(f+=" drop-shadow-md",u="3",y="#FF4444"):l.includes(m)?(f+=" drop-shadow-sm",u="3",y="#44FF44"):a===m&&(f+=" brightness-110",u="3",y="#666"),c&&(c==="attack"&&l.includes(m)||c==="deploy"&&i===m||c==="fortify"&&l.includes(m))&&(f+=" animate-pulse"),{className:`${g} ${f}`,strokeWidth:u,stroke:y}},h={frozen_wastes:"M 50 50 L 200 40 L 220 100 L 180 120 L 80 110 Z",ice_peaks:"M 220 40 L 380 50 L 400 110 L 350 130 L 240 120 L 220 100 Z",tundra_plains:"M 120 110 L 320 120 L 340 170 L 280 180 L 140 170 Z",forest_realm:"M 50 170 L 180 160 L 200 220 L 160 240 L 70 230 Z",mountain_pass:"M 200 150 L 380 140 L 420 200 L 380 220 L 220 210 Z",river_valley:"M 30 230 L 120 220 L 140 280 L 90 300 L 50 290 Z",golden_fields:"M 320 210 L 450 200 L 470 260 L 430 280 L 340 270 Z",crystal_caverns:"M 70 290 L 200 280 L 220 340 L 180 360 L 90 350 Z",coastal_haven:"M 30 350 L 120 340 L 140 400 L 90 420 L 50 410 Z",burning_sands:"M 140 360 L 280 350 L 320 410 L 260 430 L 160 420 Z",trade_crossroads:"M 280 350 L 450 340 L 480 400 L 430 420 L 300 410 Z",dragon_spine:"M 420 200 L 520 190 L 540 280 L 500 300 L 440 290 L 430 250 Z",jade_peaks:"M 430 320 L 520 310 L 540 380 L 500 400 L 450 390 Z",mystic_isles:"M 520 290 L 580 280 L 600 340 L 570 360 L 540 350 Z"};return e.jsxs("div",{className:"relative w-full h-full bg-gradient-to-br from-blue-100 to-green-100 rounded-lg overflow-hidden",children:[e.jsxs("svg",{viewBox:"0 0 600 450",className:"w-full h-full",style:{maxHeight:"70vh"},children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"mountainGradient",cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f0f0f0"}),e.jsx("stop",{offset:"100%",stopColor:"#d0d0d0"})]}),e.jsx("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:e.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"#000000",floodOpacity:"0.3"})})]}),Object.keys(s).map(m=>{var u,y,x,v,N;const g=d(m),f=h[m];return f?e.jsxs("g",{children:[e.jsx("path",{id:m,d:f,fill:n(m),stroke:g.stroke,strokeWidth:g.strokeWidth,className:g.className,filter:"url(#shadow)",onClick:()=>t(m),onMouseEnter:()=>r(m),onMouseLeave:()=>r(null)}),a===m&&e.jsx("text",{x:((y=(u=s[m])==null?void 0:u.armyPosition)==null?void 0:y.x)||0,y:(((v=(x=s[m])==null?void 0:x.armyPosition)==null?void 0:v.y)||0)-20,textAnchor:"middle",className:"fill-gray-800 text-sm font-semibold pointer-events-none",style:{textShadow:"1px 1px 2px white"},children:(N=s[m])==null?void 0:N.name})]},m):null}),e.jsx("circle",{cx:"50",cy:"50",r:"3",fill:"#4CAF50",opacity:"0.5"}),e.jsx("circle",{cx:"550",cy:"400",r:"3",fill:"#9C27B0",opacity:"0.5"}),e.jsx("circle",{cx:"300",cy:"225",r:"2",fill:"#FF9800",opacity:"0.5"})]}),e.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-60 text-white px-3 py-1 rounded-lg text-sm font-semibold",children:"Fantasy Realms"}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 p-2 rounded-lg text-xs",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Continents:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"Northern (3)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:"Central (4)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),e.jsx("span",{children:"Southern (2)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded"}),e.jsx("span",{children:"Eastern (3)"})]})]})]})},de=Object.create(null);de.open="0";de.close="1";de.ping="2";de.pong="3";de.message="4";de.upgrade="5";de.noop="6";const st=Object.create(null);Object.keys(de).forEach(s=>{st[de[s]]=s});const Jt={type:"error",data:"parser error"},Lr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Er=typeof ArrayBuffer=="function",Pr=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,os=({type:s,data:t},r,n)=>Lr&&t instanceof Blob?r?n(t):Os(t,n):Er&&(t instanceof ArrayBuffer||Pr(t))?r?n(t):Os(new Blob([t]),n):n(de[s]+(t||"")),Os=(s,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(s)};function Ms(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let St;function Wi(s,t){if(Lr&&s.data instanceof Blob)return s.data.arrayBuffer().then(Ms).then(t);if(Er&&(s.data instanceof ArrayBuffer||Pr(s.data)))return t(Ms(s.data));os(s,!1,r=>{St||(St=new TextEncoder),t(St.encode(r))})}const Bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Bs.length;s++)Me[Bs.charCodeAt(s)]=s;const zi=s=>{let t=s.length*.75,r=s.length,n,a=0,i,o,l,c;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const d=new ArrayBuffer(t),h=new Uint8Array(d);for(n=0;n<r;n+=4)i=Me[s.charCodeAt(n)],o=Me[s.charCodeAt(n+1)],l=Me[s.charCodeAt(n+2)],c=Me[s.charCodeAt(n+3)],h[a++]=i<<2|o>>4,h[a++]=(o&15)<<4|l>>2,h[a++]=(l&3)<<6|c&63;return d},Hi=typeof ArrayBuffer=="function",ls=(s,t)=>{if(typeof s!="string")return{type:"message",data:Rr(s,t)};const r=s.charAt(0);return r==="b"?{type:"message",data:Vi(s.substring(1),t)}:st[r]?s.length>1?{type:st[r],data:s.substring(1)}:{type:st[r]}:Jt},Vi=(s,t)=>{if(Hi){const r=zi(s);return Rr(r,t)}else return{base64:!0,data:s}},Rr=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Or="",Ji=(s,t)=>{const r=s.length,n=new Array(r);let a=0;s.forEach((i,o)=>{os(i,!1,l=>{n[o]=l,++a===r&&t(n.join(Or))})})},Zi=(s,t)=>{const r=s.split(Or),n=[];for(let a=0;a<r.length;a++){const i=ls(r[a],t);if(n.push(i),i.type==="error")break}return n};function Ki(){return new TransformStream({transform(s,t){Wi(s,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let At;function Je(s){return s.reduce((t,r)=>t+r.length,0)}function Ze(s,t){if(s[0].length===t)return s.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),r}function Yi(s,t){At||(At=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(n===0){if(Je(r)<1)break;const c=Ze(r,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Je(r)<2)break;const c=Ze(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Je(r)<8)break;const c=Ze(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),h=d.getUint32(0);if(h>Math.pow(2,21)-1){l.enqueue(Jt);break}a=h*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Je(r)<a)break;const c=Ze(r,a);l.enqueue(ls(i?c:At.decode(c),t)),n=0}if(a===0||a>s){l.enqueue(Jt);break}}}})}const Mr=4;function G(s){if(s)return Xi(s)}function Xi(s){for(var t in G.prototype)s[t]=G.prototype[t];return s}G.prototype.on=G.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};G.prototype.once=function(s,t){function r(){this.off(s,r),t.apply(this,arguments)}return r.fn=t,this.on(s,r),this};G.prototype.off=G.prototype.removeListener=G.prototype.removeAllListeners=G.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+s];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+s],this};G.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+s],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};G.prototype.emitReserved=G.prototype.emit;G.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};G.prototype.hasListeners=function(s){return!!this.listeners(s).length};const vt=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),ne=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Qi="arraybuffer";function Br(s,...t){return t.reduce((r,n)=>(s.hasOwnProperty(n)&&(r[n]=s[n]),r),{})}const eo=ne.setTimeout,to=ne.clearTimeout;function Nt(s,t){t.useNativeTimers?(s.setTimeoutFn=eo.bind(ne),s.clearTimeoutFn=to.bind(ne)):(s.setTimeoutFn=ne.setTimeout.bind(ne),s.clearTimeoutFn=ne.clearTimeout.bind(ne))}const so=1.33;function ro(s){return typeof s=="string"?no(s):Math.ceil((s.byteLength||s.size)*so)}function no(s){let t=0,r=0;for(let n=0,a=s.length;n<a;n++)t=s.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function Fr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ao(s){let t="";for(let r in s)s.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(s[r]));return t}function io(s){let t={},r=s.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class oo extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class cs extends G{constructor(t){super(),this.writable=!1,Nt(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new oo(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=ls(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=ao(t);return r.length?"?"+r:""}}class lo extends cs{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Zi(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ji(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Fr()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Dr=!1;try{Dr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const co=Dr;function mo(){}class ho extends lo{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let Ce=class rt extends G{constructor(t,r,n){super(),this.createRequest=t,Nt(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=Br(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=rt.requestsCount++,rt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mo,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete rt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ce.requestsCount=0;Ce.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fs);else if(typeof addEventListener=="function"){const s="onpagehide"in ne?"pagehide":"unload";addEventListener(s,Fs,!1)}}function Fs(){for(let s in Ce.requests)Ce.requests.hasOwnProperty(s)&&Ce.requests[s].abort()}const uo=function(){const s=$r({xdomain:!1});return s&&s.responseType!==null}();class xo extends ho{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=uo&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ce($r,this.uri(),t)}}function $r(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||co))return new XMLHttpRequest}catch{}if(!t)try{return new ne[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ir=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class po extends cs{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=Ir?{}:Br(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;os(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&vt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Fr()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Lt=ne.WebSocket||ne.MozWebSocket;class fo extends po{createSocket(t,r,n){return Ir?new Lt(t,r,n):r?new Lt(t,r):new Lt(t)}doWrite(t,r){this.ws.send(r)}}class go extends cs{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=Yi(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=Ki();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&vt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const bo={websocket:fo,webtransport:go,polling:xo},yo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,jo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zt(s){if(s.length>8e3)throw"URI too long";const t=s,r=s.indexOf("["),n=s.indexOf("]");r!=-1&&n!=-1&&(s=s.substring(0,r)+s.substring(r,n).replace(/:/g,";")+s.substring(n,s.length));let a=yo.exec(s||""),i={},o=14;for(;o--;)i[jo[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=vo(i,i.path),i.queryKey=No(i,i.query),i}function vo(s,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function No(s,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const Kt=typeof addEventListener=="function"&&typeof removeEventListener=="function",nt=[];Kt&&addEventListener("offline",()=>{nt.forEach(s=>s())},!1);class fe extends G{constructor(t,r){if(super(),this.binaryType=Qi,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Zt(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Zt(r.host).host);Nt(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=io(this.opts.query)),Kt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},nt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Mr,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&fe.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",fe.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=ro(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,vt(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(fe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Kt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=nt.indexOf(this._offlineEventListener);n!==-1&&nt.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}fe.protocol=Mr;class wo extends fe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;fe.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;fe.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(h(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const g=new Error("probe error");g.transport=r.name,this.emitReserved("upgradeError",g)}}))};function i(){n||(n=!0,h(),r.close(),r=null)}const o=m=>{const g=new Error("probe error: "+m);g.transport=r.name,i(),this.emitReserved("upgradeError",g)};function l(){o("transport closed")}function c(){o("socket closed")}function d(m){r&&m.name!==r.name&&i()}const h=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};r.once("open",a),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let ko=class extends wo{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>bo[a]).filter(a=>!!a)),super(t,n)}};function _o(s,t="",r){let n=s;r=r||typeof location<"u"&&location,s==null&&(s=r.protocol+"//"+r.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=r.protocol+s:s=r.host+s),/^(https?|wss?):\/\//.test(s)||(typeof r<"u"?s=r.protocol+"//"+s:s="https://"+s),n=Zt(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const To=typeof ArrayBuffer=="function",Co=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,qr=Object.prototype.toString,So=typeof Blob=="function"||typeof Blob<"u"&&qr.call(Blob)==="[object BlobConstructor]",Ao=typeof File=="function"||typeof File<"u"&&qr.call(File)==="[object FileConstructor]";function ds(s){return To&&(s instanceof ArrayBuffer||Co(s))||So&&s instanceof Blob||Ao&&s instanceof File}function at(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let r=0,n=s.length;r<n;r++)if(at(s[r]))return!0;return!1}if(ds(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return at(s.toJSON(),!0);for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&at(s[r]))return!0;return!1}function Lo(s){const t=[],r=s.data,n=s;return n.data=Yt(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Yt(s,t){if(!s)return s;if(ds(s)){const r={_placeholder:!0,num:t.length};return t.push(s),r}else if(Array.isArray(s)){const r=new Array(s.length);for(let n=0;n<s.length;n++)r[n]=Yt(s[n],t);return r}else if(typeof s=="object"&&!(s instanceof Date)){const r={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=Yt(s[n],t));return r}return s}function Eo(s,t){return s.data=Xt(s.data,t),delete s.attachments,s}function Xt(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let r=0;r<s.length;r++)s[r]=Xt(s[r],t);else if(typeof s=="object")for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(s[r]=Xt(s[r],t));return s}const Po=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ro=5;var R;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(R||(R={}));class Oo{constructor(t){this.replacer=t}encode(t){return(t.type===R.EVENT||t.type===R.ACK)&&at(t)?this.encodeAsBinary({type:t.type===R.EVENT?R.BINARY_EVENT:R.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===R.BINARY_EVENT||t.type===R.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Lo(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function Ds(s){return Object.prototype.toString.call(s)==="[object Object]"}class ms extends G{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===R.BINARY_EVENT;n||r.type===R.BINARY_ACK?(r.type=n?R.EVENT:R.ACK,this.reconstructor=new Mo(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(ds(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(R[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===R.BINARY_EVENT||n.type===R.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(ms.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case R.CONNECT:return Ds(r);case R.DISCONNECT:return r===void 0;case R.CONNECT_ERROR:return typeof r=="string"||Ds(r);case R.EVENT:case R.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Po.indexOf(r[0])===-1);case R.ACK:case R.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Mo{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=Eo(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Bo=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ms,Encoder:Oo,get PacketType(){return R},protocol:Ro},Symbol.toStringTag,{value:"Module"}));function ae(s,t,r){return s.on(t,r),function(){s.off(t,r)}}const Fo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ur extends G{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ae(t,"open",this.onopen.bind(this)),ae(t,"packet",this.onpacket.bind(this)),ae(t,"error",this.onerror.bind(this)),ae(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,i;if(Fo.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:R.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const h=this.ids++,m=r.pop();this._registerAckCallback(h,m),o.id=h}const l=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,a)=>{const i=(o,l)=>o?a(o):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:R.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case R.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case R.EVENT:case R.BINARY_EVENT:this.onevent(t);break;case R.ACK:case R.BINARY_ACK:this.onack(t);break;case R.DISCONNECT:this.ondisconnect();break;case R.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:R.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:R.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Le(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Le.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*s);s=Math.floor(t*10)&1?s+r:s-r}return Math.min(s,this.max)|0};Le.prototype.reset=function(){this.attempts=0};Le.prototype.setMin=function(s){this.ms=s};Le.prototype.setMax=function(s){this.max=s};Le.prototype.setJitter=function(s){this.jitter=s};class Qt extends G{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Nt(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Le({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||Bo;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ko(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ae(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=ae(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ae(t,"ping",this.onping.bind(this)),ae(t,"data",this.ondata.bind(this)),ae(t,"error",this.onerror.bind(this)),ae(t,"close",this.onclose.bind(this)),ae(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){vt(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ur(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Re={};function it(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const r=_o(s,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=Re[a]&&i in Re[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new Qt(n,t):(Re[a]||(Re[a]=new Qt(n,t)),c=Re[a]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(it,{Manager:Qt,Socket:Ur,io:it,connect:it});const Do=(s,t,r,n)=>{if(s===t)return!0;const a=r.board.filter(l=>l.ownerId===n),i=new Set,o=[s];for(;o.length>0;){const l=o.shift();if(l===t)return!0;if(i.has(l))continue;i.add(l);const c=a.find(d=>d.id===l);if(c)for(const d of c.adjacentTerritories)i.has(d)||a.find(m=>m.id===d)&&o.push(d)}return!1},$o=(s,t,r)=>{var a;const n=s.board.find(i=>i.id===t);if(!n)return[];switch(s.phase){case"reinforcement":return n.ownerId===r?[t]:[];case"attack":return n.ownerId!==r||n.armies<=1?[]:n.adjacentTerritories.filter(o=>{const l=s.board.find(c=>c.id===o);return l&&l.ownerId!==r});case"fortify":if(n.ownerId!==r||n.armies<=1)return[];switch(((a=s.gameConfig)==null?void 0:a.movementType)||"classic_adjacent"){case"classic_adjacent":case"adjacent_multi":return n.adjacentTerritories.filter(o=>{const l=s.board.find(c=>c.id===o);return l&&l.ownerId===r});case"path_single":case"path_multi":return s.board.filter(o=>o.ownerId===r&&o.id!==t).filter(o=>Do(t,o.id,s,r)).map(o=>o.id);default:return[]}default:return[]}},Io={currentGame:null,isLoading:!1,error:null,selectedTerritory:null,selectedTargetTerritory:null,validTargets:[],pendingAction:null,territoryActionHistory:[],battleResult:null,reinforcementArmies:0},Gr=es({name:"game",initialState:Io,reducers:{setGameState:(s,t)=>{s.currentGame=t.payload},updateGameState:(s,t)=>{s.currentGame&&(s.currentGame={...s.currentGame,...t.payload})},setLoading:(s,t)=>{s.isLoading=t.payload},setError:(s,t)=>{s.error=t.payload},clearGame:s=>{s.currentGame=null,s.error=null,s.selectedTerritory=null,s.selectedTargetTerritory=null,s.validTargets=[],s.pendingAction=null,s.territoryActionHistory=[]},selectTerritory:(s,t)=>{if(s.selectedTerritory=t.payload,s.selectedTargetTerritory=null,t.payload&&s.currentGame){const r=s.currentGame.board.find(a=>a.id===t.payload),n=s.currentGame.players.find(a=>a.id===s.currentGame.currentPlayer);r&&n&&(s.validTargets=$o(s.currentGame,t.payload,n.id))}else s.validTargets=[]},selectTargetTerritory:(s,t)=>{s.selectedTargetTerritory=t.payload},setPendingAction:(s,t)=>{s.pendingAction=t.payload,t.payload||(s.selectedTerritory=null,s.selectedTargetTerritory=null,s.validTargets=[])},updateTerritory:(s,t)=>{if(s.currentGame){const r=s.currentGame.board.find(n=>n.id===t.payload.territoryId);r&&(t.payload.armies!==void 0&&(r.armies=t.payload.armies),t.payload.ownerId!==void 0&&(r.ownerId=t.payload.ownerId))}},addTerritoryAction:(s,t)=>{s.territoryActionHistory.push({territoryId:t.payload.territoryId,action:t.payload.action,timestamp:Date.now()}),s.territoryActionHistory.length>10&&(s.territoryActionHistory=s.territoryActionHistory.slice(-10))},setValidTargets:(s,t)=>{s.validTargets=t.payload},setBattleResult:(s,t)=>{s.battleResult=t.payload},setReinforcementArmies:(s,t)=>{s.reinforcementArmies=t.payload}}}),{setGameState:qo,updateGameState:Et,setLoading:Hl,setError:re,clearGame:Vl,selectTerritory:W,selectTargetTerritory:se,setPendingAction:H,updateTerritory:_e,addTerritoryAction:hs,setValidTargets:Jl,setBattleResult:Wr,setReinforcementArmies:Uo}=Gr.actions,Go=Gr.reducer,Wo="https://conquestk.com/api",Te=q.create({baseURL:Wo});Te.interceptors.request.use(s=>{const t=localStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});const wt={async getRooms(){return(await Te.get("/game/rooms")).data},async createRoom(s){return(await Te.post("/game/rooms",s)).data},async joinRoom(s){return(await Te.post(`/game/rooms/${s}/join`)).data},async leaveRoom(s){return(await Te.delete(`/game/rooms/${s}/leave`)).data},async getRoomDetails(s){return(await Te.get(`/game/rooms/${s}`)).data}},zo={rooms:[],currentRoom:null,isLoading:!1,error:null},Pt=X("room/fetchRooms",async()=>(await wt.getRooms()).rooms),$s=X("room/createRoom",async s=>(await wt.createRoom(s)).room);X("room/joinRoom",async s=>(await wt.joinRoom(s),s));X("room/leaveRoom",async s=>(await wt.leaveRoom(s),s));const zr=es({name:"room",initialState:zo,reducers:{setCurrentRoom:(s,t)=>{s.currentRoom=t.payload},updateRoom:(s,t)=>{s.currentRoom&&(s.currentRoom={...s.currentRoom,...t.payload});const r=s.rooms.findIndex(n=>n.id===t.payload.id);r!==-1&&(s.rooms[r]={...s.rooms[r],...t.payload})},addPlayerToRoom:(s,t)=>{const{roomId:r,player:n}=t.payload;s.currentRoom&&s.currentRoom.id===r&&(s.currentRoom.players=s.currentRoom.players||[],s.currentRoom.players.push(n))},removePlayerFromRoom:(s,t)=>{var a;const{roomId:r,playerId:n}=t.payload;s.currentRoom&&s.currentRoom.id===r&&(s.currentRoom.players=((a=s.currentRoom.players)==null?void 0:a.filter(i=>i.userId!==n))||[])},clearError:s=>{s.error=null}},extraReducers:s=>{s.addCase(Pt.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Pt.fulfilled,(t,r)=>{t.isLoading=!1,t.rooms=r.payload}).addCase(Pt.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message||"Failed to fetch rooms"}).addCase($s.fulfilled,(t,r)=>{t.rooms.unshift(r.payload),t.currentRoom=r.payload}).addCase($s.rejected,(t,r)=>{t.error=r.error.message||"Failed to create room"})}}),{setCurrentRoom:Zl,updateRoom:Ho,addPlayerToRoom:Vo,removePlayerFromRoom:Jo,clearError:Kl}=zr.actions,Zo=zr.reducer,$=sn({reducer:{auth:Mi,game:Go,room:Zo},middleware:s=>s({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}})});class Ko{constructor(){ps(this,"socket",null)}connect(){const t=localStorage.getItem("token");t&&(this.socket=it("https://conquestk.com",{auth:{token:t}}),this.setupEventListeners())}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}joinRoom(t){var r;(r=this.socket)==null||r.emit("join-room",t)}leaveRoom(t){var r;(r=this.socket)==null||r.emit("leave-room",t)}sendGameAction(t){var r;(r=this.socket)==null||r.emit("game-action",t)}sendChatMessage(t,r){var n;(n=this.socket)==null||n.emit("chat-message",{roomId:t,message:r})}emit(t,r){var n;(n=this.socket)==null||n.emit(t,r)}deployArmies(t,r,n){var a;(a=this.socket)==null||a.emit("deployArmies",{roomId:t,territoryId:r,armies:n})}attack(t,r,n){var a;(a=this.socket)==null||a.emit("attack",{roomId:t,fromTerritoryId:r,toTerritoryId:n})}fortify(t,r,n,a){var i;(i=this.socket)==null||i.emit("fortify",{roomId:t,fromTerritoryId:r,toTerritoryId:n,armies:a})}endTurn(t){var r;(r=this.socket)==null||r.emit("endTurn",{roomId:t})}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("Connected to server")}),this.socket.on("disconnect",()=>{console.log("Disconnected from server")}),this.socket.on("player-joined",t=>{$.dispatch(Vo({roomId:t.roomId,player:t.player}))}),this.socket.on("player-left",t=>{$.dispatch(Jo({roomId:t.roomId,playerId:t.userId}))}),this.socket.on("game-update",t=>{$.dispatch(qo(t))}),this.socket.on("room-update",t=>{$.dispatch(Ho(t))}),this.socket.on("territoryUpdated",t=>{$.dispatch(_e({territoryId:t.territoryId,armies:t.armies,ownerId:t.ownerId}))}),this.socket.on("gamePhaseChanged",t=>{$.dispatch(Et({phase:t.phase,currentPlayer:t.currentPlayer})),$.dispatch(W(null)),$.dispatch(se(null)),$.dispatch(H(null))}),this.socket.on("playerTurnChanged",t=>{$.dispatch(Et({currentPlayer:t.currentPlayer,turn:t.turn})),$.dispatch(W(null)),$.dispatch(se(null)),$.dispatch(H(null))}),this.socket.on("armiesDeployed",t=>{$.dispatch(_e({territoryId:t.territoryId,armies:t.armies}))}),this.socket.on("attackResult",t=>{$.dispatch(_e({territoryId:t.fromTerritory.id,armies:t.fromTerritory.armies})),$.dispatch(_e({territoryId:t.toTerritory.id,armies:t.toTerritory.armies,ownerId:t.toTerritory.ownerId})),$.dispatch(Wr(t)),$.dispatch(se(null))}),this.socket.on("phaseChanged",t=>{$.dispatch(Et({phase:t.phase,currentPlayer:t.currentPlayer})),t.phase==="reinforcement"&&t.reinforcementArmies&&$.dispatch(Uo(t.reinforcementArmies)),$.dispatch(W(null)),$.dispatch(se(null)),$.dispatch(H(null))}),this.socket.on("territoriesFortified",t=>{$.dispatch(_e({territoryId:t.fromTerritoryId,armies:t.fromArmies})),$.dispatch(_e({territoryId:t.toTerritoryId,armies:t.toArmies}))}),this.socket.on("gameError",t=>{$.dispatch(re(t.message)),console.error("Game error:",t)}),this.socket.on("chat-message",t=>{console.log("Chat message:",t)}),this.socket.on("error",t=>{console.error("Socket error:",t),$.dispatch(re("Connection error"))}))}}const we=new Ko;X("game/handleTerritoryClick",async(s,{getState:t,dispatch:r})=>{var d;const n=t(),{currentGame:a,selectedTerritory:i,validTargets:o}=n.game;if(!a)throw new Error("No active game");const l=a.board.find(h=>h.id===s);if(!(a.currentPlayer===((d=n.auth.user)==null?void 0:d.id))){r(re("Not your turn"));return}switch(a.phase){case"reinforcement":return r(Yo({territoryId:s,territory:l,selectedTerritory:i,state:n}));case"attack":return r(Xo({territoryId:s,territory:l,selectedTerritory:i,validTargets:o,state:n}));case"fortify":return r(Qo({territoryId:s,territory:l,selectedTerritory:i,validTargets:o,state:n}));default:r(W(s))}});const Yo=X("game/handleReinforcementClick",async({territoryId:s,territory:t,selectedTerritory:r,state:n},{dispatch:a})=>{var o;const i=(o=n.auth.user)==null?void 0:o.id;if((t==null?void 0:t.ownerId)===i){if(r===s)return a(Hr({territoryId:s,armies:1}));a(W(s)),a(H("deploy"))}else a(re("You can only deploy armies to your own territories"))}),Xo=X("game/handleAttackClick",async({territoryId:s,territory:t,selectedTerritory:r,validTargets:n,state:a},{dispatch:i})=>{var l;const o=(l=a.auth.user)==null?void 0:l.id;if(!r)(t==null?void 0:t.ownerId)===o&&t.armies>1?(i(W(s)),i(H("attack"))):(t==null?void 0:t.ownerId)===o?i(re("Need at least 2 armies to attack")):i(re("Select your own territory to attack from"));else if(n.includes(s)){if((t==null?void 0:t.ownerId)!==o)return i(Vr({fromTerritoryId:r,toTerritoryId:s}))}else(t==null?void 0:t.ownerId)===o&&t.armies>1?i(W(s)):(i(W(null)),i(H(null)))}),Qo=X("game/handleFortifyClick",async({territoryId:s,territory:t,selectedTerritory:r,validTargets:n,state:a},{dispatch:i})=>{var l;const o=(l=a.auth.user)==null?void 0:l.id;if(!r)(t==null?void 0:t.ownerId)===o&&t.armies>1?(i(W(s)),i(H("fortify"))):(t==null?void 0:t.ownerId)===o?i(re("Need at least 2 armies to fortify")):i(re("Select your own territory to fortify from"));else{if(n.includes(s))return i(Jr({fromTerritoryId:r,toTerritoryId:s,armies:1}));(t==null?void 0:t.ownerId)===o&&t.armies>1?i(W(s)):(i(W(null)),i(H(null)))}}),Hr=X("game/deployArmies",async({territoryId:s,armies:t},{getState:r,dispatch:n})=>{const a=r(),{currentGame:i}=a.game;if(!i)throw new Error("No active game");try{we.emit("deployArmies",{roomId:i.roomId,territoryId:s,armies:t}),n(hs({territoryId:s,action:`Deploy ${t} armies`})),n(W(null)),n(H(null))}catch{n(re("Failed to deploy armies"))}}),Vr=X("game/executeAttack",async({fromTerritoryId:s,toTerritoryId:t},{getState:r,dispatch:n})=>{const a=r(),{currentGame:i}=a.game;if(!i)throw new Error("No active game");try{we.emit("attack",{roomId:i.roomId,fromTerritoryId:s,toTerritoryId:t}),n(hs({territoryId:s,action:`Attack ${t}`})),n(se(t))}catch{n(re("Failed to execute attack"))}}),Jr=X("game/executeFortify",async({fromTerritoryId:s,toTerritoryId:t,armies:r},{getState:n,dispatch:a})=>{const i=n(),{currentGame:o}=i.game;if(!o)throw new Error("No active game");try{we.emit("fortify",{roomId:o.roomId,fromTerritoryId:s,toTerritoryId:t,armies:r}),a(hs({territoryId:s,action:`Fortify ${t} with ${r} armies`})),a(W(null)),a(se(null)),a(H(null))}catch{a(re("Failed to execute fortification"))}}),Zr=X("game/endTurn",async(s,{getState:t,dispatch:r})=>{const n=t(),{currentGame:a}=n.game;if(!a)throw new Error("No active game");try{we.endTurn(a.roomId),r(W(null)),r(se(null)),r(H(null))}catch{r(re("Failed to end turn"))}}),el=X("game/goBackToReinforcement",async(s,{getState:t,dispatch:r})=>{const n=t(),{currentGame:a}=n.game;if(!a)throw new Error("No active game");if(a.phase!=="attack")throw new Error("Can only go back from attack phase");if(a.hasAttackedThisTurn)throw new Error("Cannot go back after attacking");try{we.emit("goBackToReinforcement",{roomId:a.roomId}),r(W(null)),r(se(null)),r(H(null))}catch{r(re("Failed to go back to reinforcement phase"))}}),tl=({isOpen:s,battleResult:t,onClose:r,onContinueAttack:n})=>{const[a,i]=b.useState(!1);if(b.useEffect(()=>{if(s&&t&&(i(!0),!n)){const l=setTimeout(r,3e3);return()=>clearTimeout(l)}},[s,t,r,n]),!s||!t)return null;const o=(l,c)=>e.jsx("div",{className:"flex space-x-2",children:l.map((d,h)=>e.jsx("div",{className:`w-12 h-12 ${c} border-2 border-gray-300 rounded-lg flex items-center justify-center text-white font-bold text-lg ${a?"animate-bounce":""}`,style:{animationDelay:`${h*.1}s`},children:d},h))});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full m-4",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Battle Results"}),e.jsxs("p",{className:"text-gray-600",children:[t.fromTerritory.name," vs ",t.toTerritory.name]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-red-600 mb-3",children:"Attacker"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.fromTerritory.name}),o(t.attackerDice,"bg-red-500"),e.jsx("p",{className:"mt-2 text-sm",children:t.attackerLosses>0?e.jsxs("span",{className:"text-red-600 font-medium",children:["Lost ",t.attackerLosses," armies"]}):e.jsx("span",{className:"text-green-600 font-medium",children:"No losses"})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.fromTerritory.armies," armies remaining"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold text-blue-600 mb-3",children:"Defender"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.toTerritory.name}),o(t.defenderDice,"bg-blue-500"),e.jsx("p",{className:"mt-2 text-sm",children:t.defenderLosses>0?e.jsxs("span",{className:"text-red-600 font-medium",children:["Lost ",t.defenderLosses," armies"]}):e.jsx("span",{className:"text-green-600 font-medium",children:"No losses"})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.toTerritory.armies," armies remaining"]})]})]}),t.conquered&&e.jsx("div",{className:"bg-yellow-100 border border-yellow-400 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-bold text-yellow-800 text-lg mb-1",children:"Territory Conquered! 🎉"}),e.jsxs("p",{className:"text-yellow-700 text-sm",children:[t.toTerritory.name," is now under your control"]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 text-xs text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"How the battle was resolved:"}),e.jsxs("p",{children:["Highest dice are compared first. Ties go to the defender.",t.attackerDice.length>1&&t.defenderDice.length>1&&" Second highest dice are compared if both sides have multiple dice."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[n&&t.fromTerritory.armies>1&&!t.conquered&&e.jsx("button",{onClick:n,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded font-medium",children:"Continue Attack"}),e.jsx("button",{onClick:r,className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded font-medium",children:n&&t.fromTerritory.armies>1&&!t.conquered?"Stop Attacking":"Close"})]})]})})})},Kr=({onEndTurn:s})=>{var O,K,T,P,Z,U,me,Ge,We,ze,He;const t=dt(),r=z(B=>B.game.currentGame),n=z(B=>B.game.selectedTerritory),a=z(B=>B.game.selectedTargetTerritory),i=z(B=>B.game.pendingAction),o=z(B=>B.game.validTargets),l=z(B=>B.game.battleResult),c=z(B=>B.game.reinforcementArmies),d=z(B=>B.auth.user),[h,m]=b.useState(1),[g,f]=b.useState(1);if(!r||!d)return null;const u=r.currentPlayer===d.id,y=r.players.find(B=>B.id===d.id),x=()=>{if(c>0)return c;if(!y)return 0;const B=r.board.filter(Ee=>Ee.ownerId===y.id).length;return Math.max(3,Math.floor(B/3))},v=n?r.board.find(B=>B.id===n):null,N=a?r.board.find(B=>B.id===a):null,C=()=>{n&&h>0&&t(Hr({territoryId:n,armies:h}))},k=()=>{n&&a&&t(Vr({fromTerritoryId:n,toTerritoryId:a}))},_=()=>{n&&a&&g>0&&t(Jr({fromTerritoryId:n,toTerritoryId:a,armies:g}))},M=()=>{t(W(null)),t(se(null)),t(H(null))};return u?e.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[r.phase.charAt(0).toUpperCase()+r.phase.slice(1)," Phase"]}),e.jsx("button",{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-medium",disabled:!u,children:"End Turn"})]}),r.phase==="reinforcement"&&e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"bg-green-50 p-3 rounded border",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Deploy New Armies"}),e.jsxs("p",{className:"text-sm text-green-700 mb-3",children:["You have ",x()," new armies to deploy this turn"]}),n?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:["Deploying to: ",e.jsx("strong",{children:v==null?void 0:v.name}),"(Current: ",v==null?void 0:v.armies," armies)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm",children:"Armies to deploy:"}),e.jsx("input",{type:"number",min:"1",max:x(),value:h,onChange:B=>m(parseInt(B.target.value)||1),className:"w-20 px-2 py-1 border rounded text-center"}),e.jsx("button",{onClick:C,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm",children:"Deploy"})]})]}):e.jsx("p",{className:"text-sm text-green-600",children:"Click on one of your territories to deploy armies"})]})}),r.phase==="attack"&&e.jsxs("div",{className:"space-y-3",children:[!r.hasAttackedThisTurn&&e.jsxs("div",{className:"bg-yellow-50 p-2 rounded border border-yellow-300",children:[e.jsx("button",{onClick:()=>t(el()),className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded text-sm w-full",children:"← Go Back to Reinforcement Phase"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"You can return to deploy more armies before attacking"})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded border",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Attack Territories"}),n?a?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:v==null?void 0:v.name})," (",v==null?void 0:v.armies," armies) attacking ",e.jsx("strong",{children:N==null?void 0:N.name})," (",N==null?void 0:N.armies," armies)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm",children:"Attack!"}),e.jsx("button",{onClick:M,className:"bg-gray-400 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:["Attacking from: ",e.jsx("strong",{children:v==null?void 0:v.name}),"(",v==null?void 0:v.armies," armies)"]}),e.jsx("p",{className:"text-sm text-red-600",children:o.length>0?`Select a target territory (${o.length} available)`:"No adjacent enemy territories to attack"})]}):e.jsx("p",{className:"text-sm text-red-600",children:"Select one of your territories with 2+ armies to attack from"})]})]}),r.phase==="fortify"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-indigo-50 p-2 rounded border border-indigo-200",children:[e.jsx("div",{className:"text-xs font-medium text-indigo-800 mb-1",children:"Movement Rules:"}),e.jsxs("div",{className:"text-xs text-indigo-700",children:[((K=r.gameConfig)==null?void 0:K.movementType)==="classic_adjacent"&&"One territory → Adjacent only (1 move per turn)",((T=r.gameConfig)==null?void 0:T.movementType)==="adjacent_multi"&&"Multiple territories → Adjacent only",((P=r.gameConfig)==null?void 0:P.movementType)==="path_single"&&"One territory → Any connected territory (1 move per turn)",((Z=r.gameConfig)==null?void 0:Z.movementType)==="path_multi"&&"Multiple territories → Any connected territories"]})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded border",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Fortify Territories"}),(((U=r.gameConfig)==null?void 0:U.movementType)==="classic_adjacent"||((me=r.gameConfig)==null?void 0:me.movementType)==="path_single")&&Object.keys(r.movementTracking||{}).length>0&&e.jsx("div",{className:"bg-yellow-100 border border-yellow-300 rounded p-2 mb-3",children:e.jsx("p",{className:"text-xs text-yellow-800 font-medium",children:"⚠️ Only one move allowed per fortify phase (already used)"})}),n?a?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:["Moving from ",e.jsx("strong",{children:v==null?void 0:v.name})," (",v==null?void 0:v.armies," armies) to ",e.jsx("strong",{children:N==null?void 0:N.name})," (",N==null?void 0:N.armies," armies)"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm",children:"Armies to move:"}),e.jsx("input",{type:"number",min:"1",max:((v==null?void 0:v.armies)||1)-1,value:g,onChange:B=>f(parseInt(B.target.value)||1),className:"w-20 px-2 py-1 border rounded text-center"}),e.jsx("button",{onClick:_,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm",children:"Move"}),e.jsx("button",{onClick:M,className:"bg-gray-400 hover:bg-gray-500 text-white px-3 py-1 rounded text-sm",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm",children:["Moving from: ",e.jsx("strong",{children:v==null?void 0:v.name}),"(",v==null?void 0:v.armies," armies)",((Ge=r.movementTracking)==null?void 0:Ge[n])&&e.jsx("span",{className:"ml-2 text-xs bg-yellow-200 px-1 rounded",children:"Already moved"})]}),e.jsx("p",{className:"text-sm text-blue-600",children:o.length>0?`Select a destination territory (${o.length} available)`:(ze=(We=r.gameConfig)==null?void 0:We.movementType)!=null&&ze.includes("path")?"No connected territories to fortify":"No adjacent territories to fortify"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-blue-600",children:"Select one of your territories with 2+ armies to move armies from"}),Object.keys(r.movementTracking||{}).length>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("strong",{children:"Already moved:"})," ",Object.keys(r.movementTracking||{}).map(B=>{const ke=r.board.find(Ee=>Ee.id===B);return ke==null?void 0:ke.name}).join(", ")]})]})]})]}),e.jsx(tl,{isOpen:!!l,battleResult:l,onClose:()=>t(Wr(null)),onContinueAttack:n&&a&&((He=l==null?void 0:l.fromTerritory)==null?void 0:He.armies)>1&&!(l!=null&&l.conquered)?k:void 0}),(n||a)&&e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:[n&&e.jsxs("p",{children:["Selected: ",v==null?void 0:v.name]}),a&&e.jsxs("p",{children:["Target: ",N==null?void 0:N.name]}),i&&e.jsxs("p",{children:["Action: ",i]})]})]}):e.jsxs("div",{className:"bg-gray-100 border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-600",children:"Waiting for Turn"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["It's ",(O=r.players.find(B=>B.id===r.currentPlayer))==null?void 0:O.username,"'s turn"]})]})},sl=({isOpen:s,winner:t,eliminatedPlayers:r,onClose:n,onNewGame:a,onBackToMenu:i})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full m-4 overflow-hidden",children:[e.jsxs("div",{className:`p-6 text-center ${t?"bg-gradient-to-r from-yellow-400 to-orange-500":"bg-gradient-to-r from-gray-600 to-gray-700"}`,children:[e.jsx("div",{className:"text-6xl mb-4",children:t?"🏆":"🏳️"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:t?"Victory!":"Game Over"}),e.jsx("p",{className:"text-white/90",children:t?`${t.username} conquers the world!`:"All players have been eliminated"})]}),e.jsxs("div",{className:"p-6",children:[t&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl font-bold text-white shadow-lg",style:{backgroundColor:t.color},children:t.username.charAt(0).toUpperCase()}),e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:["Champion: ",t.username]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-yellow-800",children:"Final Territories:"}),e.jsx("div",{className:"text-yellow-700",children:t.territories.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-yellow-800",children:"Total Armies:"}),e.jsx("div",{className:"text-yellow-700",children:t.armies})]})]})})]}),r.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-center",children:"Players Eliminated This Turn"}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:r.map(o=>e.jsx("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm",children:"Player eliminated"},o))})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-3 text-center",children:"Game Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-600",children:"Duration"}),e.jsx("div",{className:"text-gray-800",children:"Epic Battle"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-600",children:"Final Turn"}),e.jsx("div",{className:"text-gray-800",children:"Turn Complete"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a&&e.jsx("button",{onClick:a,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:"🎮 New Game"}),i&&e.jsx("button",{onClick:i,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:"🏠 Back to Menu"}),e.jsx("button",{onClick:n,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 px-4 rounded-lg font-semibold transition-colors",children:"📊 View Final Board"})]})]})]})}):null,rl={northern_lands:{name:"Northern Lands",bonus:3,color:"#4CAF50"},central_kingdoms:{name:"Central Kingdoms",bonus:4,color:"#2196F3"},southern_realms:{name:"Southern Realms",bonus:2,color:"#FF9800"},eastern_empire:{name:"Eastern Empire",bonus:3,color:"#9C27B0"}},nl={frozen_wastes:{id:"frozen_wastes",name:"Frozen Wastes",continent:"northern_lands",adjacentTerritories:["ice_peaks","tundra_plains"],armyPosition:{x:150,y:80}},ice_peaks:{id:"ice_peaks",name:"Ice Peaks",continent:"northern_lands",adjacentTerritories:["frozen_wastes","tundra_plains","mountain_pass"],armyPosition:{x:300,y:80}},tundra_plains:{id:"tundra_plains",name:"Tundra Plains",continent:"northern_lands",adjacentTerritories:["frozen_wastes","ice_peaks","forest_realm","mountain_pass"],armyPosition:{x:225,y:140}},forest_realm:{id:"forest_realm",name:"Forest Realm",continent:"central_kingdoms",adjacentTerritories:["tundra_plains","mountain_pass","river_valley","crystal_caverns"],armyPosition:{x:150,y:200}},mountain_pass:{id:"mountain_pass",name:"Mountain Pass",continent:"central_kingdoms",adjacentTerritories:["ice_peaks","tundra_plains","forest_realm","golden_fields","dragon_spine"],armyPosition:{x:300,y:200}},river_valley:{id:"river_valley",name:"River Valley",continent:"central_kingdoms",adjacentTerritories:["forest_realm","crystal_caverns","coastal_haven"],armyPosition:{x:75,y:260}},golden_fields:{id:"golden_fields",name:"Golden Fields",continent:"central_kingdoms",adjacentTerritories:["mountain_pass","dragon_spine","trade_crossroads"],armyPosition:{x:375,y:260}},crystal_caverns:{id:"crystal_caverns",name:"Crystal Caverns",continent:"southern_realms",adjacentTerritories:["forest_realm","river_valley","coastal_haven","burning_sands"],armyPosition:{x:150,y:320}},coastal_haven:{id:"coastal_haven",name:"Coastal Haven",continent:"southern_realms",adjacentTerritories:["river_valley","crystal_caverns","burning_sands"],armyPosition:{x:75,y:380}},burning_sands:{id:"burning_sands",name:"Burning Sands",continent:"southern_realms",adjacentTerritories:["crystal_caverns","coastal_haven","trade_crossroads","jade_peaks"],armyPosition:{x:225,y:380}},trade_crossroads:{id:"trade_crossroads",name:"Trade Crossroads",continent:"southern_realms",adjacentTerritories:["golden_fields","burning_sands","dragon_spine","jade_peaks","mystic_isles"],armyPosition:{x:375,y:380}},dragon_spine:{id:"dragon_spine",name:"Dragon Spine",continent:"eastern_empire",adjacentTerritories:["mountain_pass","golden_fields","trade_crossroads","jade_peaks","mystic_isles"],armyPosition:{x:450,y:260}},jade_peaks:{id:"jade_peaks",name:"Jade Peaks",continent:"eastern_empire",adjacentTerritories:["burning_sands","trade_crossroads","dragon_spine","mystic_isles"],armyPosition:{x:450,y:350}},mystic_isles:{id:"mystic_isles",name:"Mystic Isles",continent:"eastern_empire",adjacentTerritories:["trade_crossroads","dragon_spine","jade_peaks"],armyPosition:{x:525,y:320}}},Be={continents:rl,territories:nl},al=(s,t)=>{const r={};return s.forEach(n=>{const a=t.territories[n.id];a&&(r[n.id]={id:n.id,name:a.name,continent:a.continent,adjacentTerritories:a.adjacentTerritories,armyPosition:a.armyPosition,owner:n.ownerId,armies:n.armies})}),r},il=({onTerritoryClick:s})=>{var O,K;const t=dt(),r=z(T=>T.game.currentGame),n=z(T=>T.game.selectedTerritory),a=z(T=>T.game.selectedTargetTerritory),i=z(T=>T.game.validTargets),o=z(T=>T.game.pendingAction),[l,c]=b.useState(null),[d,h]=b.useState(!1);if(b.useEffect(()=>{(r==null?void 0:r.phase)==="finished"&&h(!0)},[r==null?void 0:r.phase]),!r)return e.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-blue-50 to-green-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"🏰 Fantasy Realms"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"No Game in Progress"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Join a game room to start conquering the realms!"})]})});const m=al(r.board,Be),g=r.players,f=r.currentPlayer,u=r.phase,y=b.useCallback(T=>{const P=m[T];if(!P||!P.owner)return"#F5F5F5";const Z=g.find(U=>U.id===P.owner);return(Z==null?void 0:Z.color)||"#F5F5F5"},[m,g]),x=b.useCallback(T=>{if(n===T){t(W(null));return}n&&i.includes(T)?(t(se(T)),u==="reinforcement"?t(H("deploy")):u==="attack"?t(H("attack")):u==="fortify"&&t(H("fortify"))):(t(W(T)),t(se(null))),s==null||s(T)},[n,i,u,t,s]),v=b.useCallback(()=>{t(Zr())},[t]),N=b.useCallback(T=>{c(T)},[]),C=b.useCallback(()=>{h(!1)},[]),k=b.useCallback(()=>{console.log("Starting new game..."),h(!1)},[]),_=b.useCallback(()=>{console.log("Going back to menu..."),h(!1)},[]),M=g.find(T=>T.id===f);return e.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-indigo-50 to-purple-50 rounded-lg overflow-hidden shadow-lg",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-900 to-purple-900 text-white p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold flex items-center gap-2",children:"🏰 Fantasy Realms"}),e.jsxs("div",{className:"text-sm opacity-75 mt-1",children:["Phase: ",u.charAt(0).toUpperCase()+u.slice(1)," | Turn: ",r.turn]})]}),M&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm",children:"Current Turn:"}),e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-md",style:{backgroundColor:M.color}}),e.jsx("span",{className:"font-semibold text-lg",children:M.username})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"flex-1 relative p-4",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx(Ar,{territories:m,onTerritoryClick:x,onTerritoryHover:N,getTerritoryColor:y,hoveredTerritory:l,selectedTerritory:n,selectedTargetTerritory:a,validTargets:i,pendingAction:o}),Object.entries(m).map(([T,P])=>{var U;if(!P.armies)return null;const Z=((U=r.movementTracking)==null?void 0:U[T])||!1;return e.jsx("div",{className:"absolute pointer-events-none",style:{left:`${P.armyPosition.x/600*100}%`,top:`${P.armyPosition.y/450*100}%`,transform:"translate(-50%, -50%)"},children:e.jsxs("div",{className:`bg-white border-2 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold shadow-lg ${Z?"border-yellow-500 bg-yellow-100":"border-gray-800"}`,children:[P.armies,Z&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-500 rounded-full border border-white",children:e.jsx("div",{className:"text-xs text-white font-bold leading-none",children:"✓"})})]})},`army-${T}`)})]})}),e.jsxs("div",{className:"w-80 bg-white border-l border-gray-300 flex flex-col shadow-lg",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsx(Kr,{onEndTurn:v})}),e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:"👥 Players"}),e.jsx("div",{className:"space-y-2",children:g.map(T=>{const P=Object.values(m).filter(U=>U.owner===T.id).length,Z=Object.values(m).filter(U=>U.owner===T.id).reduce((U,me)=>U+(me.armies||0),0);return e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg transition-all ${T.id===f?"bg-gradient-to-r from-blue-100 to-purple-100 border-2 border-blue-300":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-400 shadow-sm",style:{backgroundColor:T.color}}),e.jsx("span",{className:"font-medium",children:T.username})]}),e.jsxs("div",{className:"text-sm text-gray-600 text-right",children:[e.jsx("span",{className:"font-medium",children:P})," realms",e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:Z})," armies"]})]},T.id)})})]}),(n||o)&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-yellow-50 to-orange-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:"⚔️ Current Action"}),n&&e.jsxs("div",{className:"mb-2 p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Selected: "}),e.jsx("span",{className:"text-sm font-semibold",children:(O=m[n])==null?void 0:O.name})]}),a&&e.jsxs("div",{className:"mb-2 p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Target: "}),e.jsx("span",{className:"text-sm font-semibold",children:(K=m[a])==null?void 0:K.name})]}),o&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Action: "}),e.jsx("span",{className:"text-sm font-bold capitalize bg-yellow-200 px-2 py-1 rounded",children:o})]}),i.length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-green-100 p-2 rounded",children:[i.length," valid target(s) available"]})]}),(l||n)&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:"🏯 Territory Info"}),(()=>{const P=m[l||n],Z=g.find(me=>me.id===(P==null?void 0:P.owner)),U=Be.continents[P==null?void 0:P.continent];return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-white rounded-lg",children:e.jsx("span",{className:"font-bold text-lg",children:P==null?void 0:P.name})}),e.jsxs("div",{className:"text-sm text-gray-700 p-2 bg-white rounded",children:[e.jsx("strong",{children:"Continent:"})," ",U==null?void 0:U.name,e.jsxs("span",{className:"text-green-600 font-semibold",children:[" (+",U==null?void 0:U.bonus," bonus)"]})]}),Z&&e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ruler:"}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400",style:{backgroundColor:Z.color}}),e.jsx("span",{className:"text-sm font-bold",children:Z.username})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-white rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Armies:"})," ",(P==null?void 0:P.armies)||0]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Borders:"})," ",P==null?void 0:P.adjacentTerritories.length]})]})]})})()]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:"🏆 Realm Bonuses"}),e.jsx("div",{className:"space-y-3",children:Object.entries(Be.continents).map(([T,P])=>e.jsxs("div",{className:"p-3 rounded-lg border-2 border-gray-200 bg-gradient-to-r from-white to-gray-50",children:[e.jsx("div",{className:"font-medium text-gray-800",children:P.name}),e.jsxs("div",{className:"text-sm text-green-600 font-semibold",children:["+",P.bonus," armies per turn"]})]},T))})]})]})]}),r&&e.jsx(sl,{isOpen:d,winner:r.players.find(T=>!T.isEliminated)||null,eliminatedPlayers:r.players.filter(T=>T.isEliminated).map(T=>T.id),onClose:C,onNewGame:k,onBackToMenu:_})]})},Is=()=>{const{gameId:s}=Hs(),[t,r]=b.useState("board"),[n,a]=b.useState(!1),i={name:"World Conquest",currentPlayer:"You",turn:12,players:[{id:"1",name:"You",color:"#3b82f6",territories:18,armies:45},{id:"2",name:"Player 2",color:"#ef4444",territories:12,armies:32},{id:"3",name:"Player 3",color:"#10b981",territories:8,armies:24},{id:"4",name:"Player 4",color:"#f59e0b",territories:4,armies:16}]},o=()=>{document.fullscreenElement?(document.exitFullscreen(),a(!1)):(document.documentElement.requestFullscreen(),a(!0))};return e.jsxs("div",{className:`${n?"fixed inset-0 z-50 bg-black":"min-h-screen"}`,children:[e.jsx("div",{className:`bg-gray-900 border-b border-gray-700 ${n?"h-12":"h-16"}`,children:e.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[!n&&e.jsx(L,{to:"/games/active",className:"btn btn-secondary btn-sm",children:"← My Games"}),e.jsxs("div",{children:[e.jsx("h1",{className:`font-bold ${n?"text-lg":"text-xl"}`,children:i.name}),!n&&e.jsxs("p",{className:"text-sm text-gray-400",children:["Turn ",i.turn," • ",i.currentPlayer,"'s turn"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{className:`px-3 py-1 rounded text-sm ${t==="board"?"bg-blue-600":"bg-gray-700"}`,onClick:()=>r("board"),children:"Board"}),e.jsx("button",{className:`px-3 py-1 rounded text-sm ${t==="chat"?"bg-blue-600":"bg-gray-700"}`,onClick:()=>r("chat"),children:"Chat"}),e.jsx("button",{className:`px-3 py-1 rounded text-sm ${t==="stats"?"bg-blue-600":"bg-gray-700"}`,onClick:()=>r("stats"),children:"Stats"})]}),e.jsx("button",{className:"btn btn-secondary btn-sm",children:"⚙️"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:o,children:n?"🗗":"🗖"}),e.jsx("button",{className:"btn btn-danger btn-sm",children:"🏳️"})]})]})}),e.jsxs("div",{className:"flex h-full",children:[!n&&e.jsxs("div",{className:"w-80 bg-gray-800 border-r border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"flex border-b border-gray-700",children:[e.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-medium ${t==="board"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>r("board"),children:"Board"}),e.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-medium ${t==="chat"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>r("chat"),children:"Chat"}),e.jsx("button",{className:`flex-1 py-3 px-4 text-sm font-medium ${t==="stats"?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,onClick:()=>r("stats"),children:"Stats"})]}),e.jsxs("div",{className:"flex-1 p-4",children:[t==="board"&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-4",children:"Game Controls"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-600 rounded",children:[e.jsx("div",{className:"font-bold",children:"ATTACK PHASE"}),e.jsx("div",{className:"text-sm",children:"Click territories to attack"})]}),e.jsx("button",{className:"btn btn-primary w-full",children:"End Attack Phase"}),e.jsx("button",{className:"btn btn-secondary w-full",children:"View Help"})]})]}),t==="chat"&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-4",children:"Game Chat"}),e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:"💬"}),e.jsx("p",{children:"Chat system will be implemented here"})]})]}),t==="stats"&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-4",children:"Live Statistics"}),e.jsx("div",{className:"space-y-3",children:i.players.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-700 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:l.color}}),e.jsx("span",{className:"font-medium",children:l.name})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[l.territories," territories"]})]},l.id))})]})]})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs("div",{className:"h-full relative overflow-hidden",children:[e.jsx(il,{onTerritoryClick:l=>{console.log("Territory clicked:",l)}}),n&&t!=="board"&&e.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center z-10",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[t==="chat"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Game Chat"}),e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:"💬"}),e.jsx("p",{children:"Chat system will be implemented here"})]})]}),t==="stats"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Live Statistics"}),e.jsx("div",{className:"space-y-3",children:i.players.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:l.color}}),e.jsx("span",{className:"font-medium",children:l.name})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[l.territories," territories"]})]},l.id))})]})]})})]})})]})]})},qs=()=>{const[s,t]=b.useState("quick"),[r,n]=b.useState(""),[a,i]=b.useState(6),[o,l]=b.useState("classic"),[c,d]=b.useState("classic_adjacent"),[h,m]=b.useState(!1);return e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Create Game"}),e.jsx("p",{className:"text-gray-400",children:"Set up a new game with custom rules and settings"})]}),e.jsx(L,{to:"/lobby",className:"btn btn-secondary",children:"← Back to Lobby"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:`card cursor-pointer transition-all ${s==="quick"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>t("quick"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"⚡"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Quick Game"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Standard settings, start immediately"})]})}),e.jsx("div",{className:`card cursor-pointer transition-all ${s==="custom"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>t("custom"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"⚙️"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Custom Game"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Full control over rules and settings"})]})}),e.jsx("div",{className:`card cursor-pointer transition-all ${s==="tournament"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>t("tournament"),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🏆"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Tournament"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Multi-round competitive format"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"card-title",children:"Game Settings"})}),e.jsxs("div",{className:"card-body",children:[s==="quick"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Game Name"}),e.jsx("input",{type:"text",placeholder:"Quick Game",className:"input w-full max-w-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map"}),e.jsxs("select",{className:"input w-full max-w-md",children:[e.jsx("option",{children:"Classic World"}),e.jsx("option",{children:"Europe"}),e.jsx("option",{children:"Asia"}),e.jsx("option",{children:"North America"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Players"}),e.jsxs("select",{className:"input w-full max-w-md",children:[e.jsx("option",{children:"2 Players"}),e.jsx("option",{children:"3 Players"}),e.jsx("option",{children:"4 Players"}),e.jsx("option",{children:"5 Players"}),e.jsx("option",{children:"6 Players"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{className:"btn btn-primary",children:"🎮 Create & Start Game"}),e.jsx("button",{className:"btn btn-secondary",children:"💾 Save as Template"})]})]}),s==="custom"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold border-b border-gray-700 pb-2",children:"Basic Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Game Name"}),e.jsx("input",{type:"text",placeholder:"My Custom Game",className:"input w-full",value:r,onChange:g=>n(g.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Players"}),e.jsxs("select",{className:"input w-full",value:a,onChange:g=>i(parseInt(g.target.value)),children:[e.jsx("option",{value:2,children:"2 Players"}),e.jsx("option",{value:3,children:"3 Players"}),e.jsx("option",{value:4,children:"4 Players"}),e.jsx("option",{value:5,children:"5 Players"}),e.jsx("option",{value:6,children:"6 Players"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Map"}),e.jsxs("select",{className:"input w-full max-w-md",value:o,onChange:g=>l(g.target.value),children:[e.jsx("option",{value:"classic",children:"Classic World"}),e.jsx("option",{value:"europe",children:"Europe"}),e.jsx("option",{value:"asia",children:"Asia"}),e.jsx("option",{value:"north_america",children:"North America"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold border-b border-gray-700 pb-2",children:"Movement Rules"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",children:"Reinforcement Movement Type"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:`card cursor-pointer transition-all p-4 ${c==="classic_adjacent"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>d("classic_adjacent"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"🔗"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Classic Adjacent"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One territory → Adjacent only (1 move per turn)"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Traditional Risk gameplay, simple and fast"})]})]})}),e.jsx("div",{className:`card cursor-pointer transition-all p-4 ${c==="adjacent_multi"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>d("adjacent_multi"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"🔗✨"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Adjacent Multi"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Multiple territories → Adjacent only"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"More flexible but still geographically constrained"})]})]})}),e.jsx("div",{className:`card cursor-pointer transition-all p-4 ${c==="path_single"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>d("path_single"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"🛤️"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Path Single"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One territory → Any connected territory (1 move per turn)"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Strategic repositioning across the map"})]})]})}),e.jsx("div",{className:`card cursor-pointer transition-all p-4 ${c==="path_multi"?"border-blue-500 bg-blue-500/10":""}`,onClick:()=>d("path_multi"),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:"🛤️✨"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"Path Multi"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Multiple territories → Any connected territories"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Maximum flexibility for complex strategies"})]})]})})]})]}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Universal Movement Rules"}),e.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("li",{children:"• Must leave exactly 1 army in source territory"}),e.jsx("li",{children:"• Cannot move from territories with only 1 army"}),e.jsxs("li",{children:["• ",c.includes("multi")?"Each territory can only move once per turn":"Only one move allowed per fortify phase"]}),c.includes("path")&&e.jsx("li",{children:"• Paths must go through connected owned territories"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold border-b border-gray-700 pb-2",children:"Advanced Options"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:"teamPlay",checked:h,onChange:g=>m(g.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"teamPlay",className:"text-sm font-medium",children:"Allow Team Play"}),e.jsx("div",{className:"text-xs text-gray-500",children:"(Teammates can move armies through each other's territories)"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-700",children:[e.jsx("button",{className:"btn btn-primary",children:"🎮 Create Custom Game"}),e.jsx("button",{className:"btn btn-secondary",children:"💾 Save as Template"}),e.jsx("button",{className:"btn btn-ghost",children:"👁️ Preview Rules"})]})]}),s==="tournament"&&e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),e.jsx("p",{className:"text-lg",children:"Tournament creation will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will include bracket setup, registration, and scheduling"})]})]})]})]})},Us=()=>{const[s,t]=b.useState("forum");return e.jsxs("div",{className:"container mx-auto px-8 py-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Community"}),e.jsx("p",{className:"text-gray-400",children:"Connect with other players and join discussions"})]})}),e.jsxs("div",{className:"flex gap-2 mb-8 border-b border-gray-700",children:[e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="forum"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("forum"),children:"💬 Forum"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="clans"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("clans"),children:"⚔️ Clans"}),e.jsx("button",{className:`px-6 py-3 font-medium transition-colors ${s==="events"?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>t("events"),children:"🎉 Events"})]}),e.jsxs("div",{className:"text-center text-gray-400 py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"👥"}),e.jsx("p",{className:"text-lg",children:"Community features will be implemented here"}),e.jsx("p",{className:"text-sm mt-2",children:"This will include forums, clans, events, and social features"})]})]})},ol=()=>{const[s,t]=b.useState(null),[r,n]=b.useState(null),[a,i]=b.useState([]),[o,l]=b.useState([]),[c,d]=b.useState(!0),[h,m]=b.useState(null);b.useEffect(()=>{const x={id:"1",username:"RiskCommander",email:"user@example.com",avatarUrl:"/avatars/default.png",bio:"Veteran Risk player with a passion for strategic warfare. Always looking for challenging opponents!",level:15,experiencePoints:12450,joinDate:"2024-01-15",lastActive:new Date().toISOString(),preferences:{theme:"dark",notifications:!0,publicProfile:!0}},v={gamesPlayed:147,gamesWon:89,gamesLost:58,winRate:60.5,averageGameDuration:45,favoriteMap:"Classic World",totalPlayTime:6825,ranking:342},N=[{id:"1",name:"First Victory",description:"Win your first game",iconUrl:"🏆",points:100,unlockedAt:"2024-01-20"},{id:"2",name:"World Conqueror",description:"Control all territories on the world map",iconUrl:"🌍",points:500,unlockedAt:"2024-02-15"},{id:"3",name:"Speed Demon",description:"Win a game in under 30 minutes",iconUrl:"⚡",points:200,unlockedAt:"2024-03-10"},{id:"4",name:"Marathon Master",description:"Play for 100 hours total",iconUrl:"⏰",points:300,progress:68,maxProgress:100},{id:"5",name:"Map Creator",description:"Create and publish 5 custom maps",iconUrl:"🗺️",points:400,progress:2,maxProgress:5}],C=[{id:"1",mapName:"Classic World",gameMode:"Classic",result:"won",duration:52,playedAt:"2024-08-17T20:30:00Z",playerCount:4},{id:"2",mapName:"Europe",gameMode:"Capital Conquest",result:"lost",duration:38,playedAt:"2024-08-16T19:15:00Z",playerCount:6},{id:"3",mapName:"Custom Islands",gameMode:"Naval Supremacy",result:"won",duration:41,playedAt:"2024-08-15T21:45:00Z",playerCount:3}];setTimeout(()=>{t(x),n(v),i(N),l(C),d(!1)},1e3)},[]);const g=x=>{const v=Math.floor(x/60),N=x%60;return v>0?`${v}h ${N}m`:`${N}m`},f=x=>{const v=Math.floor(x/24),N=x%24;return v>0?`${v}d ${N}h`:`${N}h`},u=(x,v)=>{const N=v*1e3;return Math.max(0,N-x)},y=(x,v)=>{const N=(v-1)*1e3,C=v*1e3,k=(x-N)/(C-N)*100;return Math.min(100,Math.max(0,k))};return c?e.jsx("div",{className:"profile-overview loading",children:e.jsx("div",{className:"loading-spinner",children:"🎲 Loading profile..."})}):h?e.jsx("div",{className:"profile-overview error",children:e.jsxs("div",{className:"error-message",children:["❌ ",h]})}):!s||!r?e.jsx("div",{className:"profile-overview error",children:e.jsx("div",{className:"error-message",children:"❌ Profile not found"})}):e.jsxs("div",{className:"profile-overview",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs("div",{className:"avatar-section",children:[e.jsx("div",{className:"avatar",children:s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:s.username}):e.jsx("div",{className:"avatar-placeholder",children:"👤"})}),e.jsx("button",{className:"edit-avatar-btn",children:"📷 Change"})]}),e.jsxs("div",{className:"profile-info",children:[e.jsx("h1",{className:"username",children:s.username}),e.jsxs("div",{className:"level-info",children:[e.jsxs("span",{className:"level",children:["Level ",s.level]}),e.jsx("div",{className:"xp-bar",children:e.jsx("div",{className:"xp-progress",style:{width:`${y(s.experiencePoints,s.level)}%`}})}),e.jsxs("span",{className:"xp-text",children:[s.experiencePoints," XP (",u(s.experiencePoints,s.level)," to next level)"]})]}),e.jsx("p",{className:"bio",children:s.bio}),e.jsxs("div",{className:"profile-meta",children:[e.jsxs("span",{className:"join-date",children:["⏰ Joined ",new Date(s.joinDate).toLocaleDateString()]}),e.jsxs("span",{className:"ranking",children:["🏆 Rank #",r.ranking]})]})]})]}),e.jsxs("div",{className:"quick-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🎮"}),e.jsx("div",{className:"stat-value",children:r.gamesPlayed}),e.jsx("div",{className:"stat-label",children:"Games Played"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🏆"}),e.jsxs("div",{className:"stat-value",children:[r.winRate,"%"]}),e.jsx("div",{className:"stat-label",children:"Win Rate"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⏱️"}),e.jsx("div",{className:"stat-value",children:f(r.totalPlayTime)}),e.jsx("div",{className:"stat-label",children:"Play Time"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🗺️"}),e.jsx("div",{className:"stat-value",children:r.favoriteMap}),e.jsx("div",{className:"stat-label",children:"Favorite Map"})]})]}),e.jsxs("div",{className:"recent-achievements",children:[e.jsx("h2",{children:"🏅 Recent Achievements"}),e.jsx("div",{className:"achievements-grid",children:a.slice(0,6).map(x=>e.jsxs("div",{className:`achievement-card ${x.unlockedAt?"unlocked":"locked"}`,children:[e.jsx("div",{className:"achievement-icon",children:x.iconUrl}),e.jsxs("div",{className:"achievement-info",children:[e.jsx("h3",{className:"achievement-name",children:x.name}),e.jsx("p",{className:"achievement-description",children:x.description}),x.unlockedAt?e.jsxs("div",{className:"achievement-unlocked",children:["✅ Unlocked ",new Date(x.unlockedAt).toLocaleDateString()]}):x.progress!==void 0?e.jsxs("div",{className:"achievement-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${x.progress/x.maxProgress*100}%`}})}),e.jsxs("span",{className:"progress-text",children:[x.progress,"/",x.maxProgress]})]}):e.jsx("div",{className:"achievement-locked",children:"🔒 Locked"}),e.jsxs("div",{className:"achievement-points",children:["+",x.points," XP"]})]})]},x.id))}),e.jsx("button",{className:"view-all-achievements",children:"View All Achievements"})]}),e.jsxs("div",{className:"recent-games",children:[e.jsx("h2",{children:"📊 Recent Games"}),e.jsx("div",{className:"games-list",children:o.map(x=>e.jsxs("div",{className:`game-card ${x.result}`,children:[e.jsx("div",{className:"game-result",children:x.result==="won"?"🏆":x.result==="lost"?"❌":"🤝"}),e.jsxs("div",{className:"game-info",children:[e.jsx("h3",{className:"game-map",children:x.mapName}),e.jsxs("div",{className:"game-details",children:[e.jsx("span",{className:"game-mode",children:x.gameMode}),e.jsxs("span",{className:"game-players",children:[x.playerCount," players"]}),e.jsx("span",{className:"game-duration",children:g(x.duration)})]})]}),e.jsx("div",{className:"game-date",children:new Date(x.playedAt).toLocaleDateString()})]},x.id))}),e.jsx("button",{className:"view-game-history",children:"View Full Game History"})]})]})},Rt=()=>e.jsx("div",{className:"profile-page",children:e.jsx(ol,{})}),ll=()=>{const[s,t]=b.useState("month"),[r,n]=b.useState(null),[a,i]=b.useState(!0),o=[{period:"week",label:"This Week"},{period:"month",label:"This Month"},{period:"year",label:"This Year"},{period:"all",label:"All Time"}];b.useEffect(()=>{const m={general:{gamesPlayed:147,gamesWon:89,gamesLost:58,winRate:60.5,averageGameDuration:45,totalPlayTime:6825,ranking:342,rankingChange:15,longestWinStreak:12,currentWinStreak:3},performance:{territoriesConquered:2834,territoriesLost:1967,armiesDeployed:15678,battlesWon:1834,battlesLost:1203,averageArmiesPerGame:106.7,quickestVictory:18,comebackWins:23},maps:{favoriteMap:"Classic World",mapStats:[{mapName:"Classic World",gamesPlayed:45,winRate:67},{mapName:"Europe",gamesPlayed:32,winRate:59},{mapName:"Asia",gamesPlayed:28,winRate:54},{mapName:"Custom Islands",gamesPlayed:23,winRate:61},{mapName:"North America",gamesPlayed:19,winRate:58}]},gameModes:{classicWins:52,capitalConquestWins:18,navalSupremacyWins:12,resourceWarWins:5,asymmetricWins:2},monthly:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug"],gamesPlayed:[8,12,15,18,22,19,25,28],winRate:[58,62,59,65,61,68,64,63]}};setTimeout(()=>{n(m),i(!1)},800)},[s]);const l=m=>{const g=Math.floor(m/60),f=m%60;return g>0?`${g}h ${f}m`:`${f}m`},c=m=>{const g=Math.floor(m/24),f=m%24;return g>0?`${g}d ${f}h`:`${f}h`},d=m=>m>=70?"#00ff88":m>=60?"#4a9eff":m>=50?"#ffd700":"#ff6b6b",h=m=>m>0?"📈":m<0?"📉":"➡️";return a?e.jsx("div",{className:"user-stats loading",children:e.jsx("div",{className:"loading-spinner",children:"🎲 Loading statistics..."})}):r?e.jsxs("div",{className:"user-stats",children:[e.jsxs("div",{className:"stats-header",children:[e.jsx("h1",{children:"📊 Statistics & Analytics"}),e.jsx("div",{className:"period-selector",children:o.map(m=>e.jsx("button",{className:`period-btn ${s===m.period?"active":""}`,onClick:()=>t(m.period),children:m.label},m.period))})]}),e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"🎮 General Statistics"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card large",children:[e.jsx("div",{className:"stat-icon",children:"🏆"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.general.gamesWon}),e.jsx("div",{className:"stat-label",children:"Games Won"}),e.jsxs("div",{className:"stat-sublabel",children:[r.general.gamesLost," lost • ",r.general.winRate,"% win rate"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🎲"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.general.gamesPlayed}),e.jsx("div",{className:"stat-label",children:"Total Games"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⏱️"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:l(r.general.averageGameDuration)}),e.jsx("div",{className:"stat-label",children:"Avg Game Time"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"📊"}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-value",children:["#",r.general.ranking]}),e.jsx("div",{className:"stat-label",children:"Global Rank"}),e.jsxs("div",{className:"stat-trend",children:[h(r.general.rankingChange)," ",Math.abs(r.general.rankingChange)]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🔥"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.general.currentWinStreak}),e.jsx("div",{className:"stat-label",children:"Current Streak"}),e.jsxs("div",{className:"stat-sublabel",children:["Best: ",r.general.longestWinStreak]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⏰"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:c(r.general.totalPlayTime)}),e.jsx("div",{className:"stat-label",children:"Total Play Time"})]})]})]})]}),e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"⚔️ Battle Performance"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🏰"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.performance.territoriesConquered}),e.jsx("div",{className:"stat-label",children:"Territories Conquered"}),e.jsxs("div",{className:"stat-sublabel",children:[r.performance.territoriesLost," lost"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⚔️"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.performance.battlesWon}),e.jsx("div",{className:"stat-label",children:"Battles Won"}),e.jsxs("div",{className:"stat-sublabel",children:[Math.round(r.performance.battlesWon/(r.performance.battlesWon+r.performance.battlesLost)*100),"% win rate"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"🪖"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.performance.armiesDeployed.toLocaleString()}),e.jsx("div",{className:"stat-label",children:"Armies Deployed"}),e.jsxs("div",{className:"stat-sublabel",children:[r.performance.averageArmiesPerGame," avg/game"]})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"⚡"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:l(r.performance.quickestVictory)}),e.jsx("div",{className:"stat-label",children:"Fastest Victory"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:"💪"}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:r.performance.comebackWins}),e.jsx("div",{className:"stat-label",children:"Comeback Wins"}),e.jsx("div",{className:"stat-sublabel",children:"From behind"})]})]})]})]}),e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"🗺️ Map Performance"}),e.jsxs("div",{className:"map-stats",children:[e.jsx("div",{className:"favorite-map",children:e.jsxs("h3",{children:["🌟 Favorite Map: ",r.maps.favoriteMap]})}),e.jsx("div",{className:"map-list",children:r.maps.mapStats.map((m,g)=>e.jsxs("div",{className:"map-stat-item",children:[e.jsxs("div",{className:"map-rank",children:["#",g+1]}),e.jsxs("div",{className:"map-info",children:[e.jsx("div",{className:"map-name",children:m.mapName}),e.jsxs("div",{className:"map-games",children:[m.gamesPlayed," games"]})]}),e.jsxs("div",{className:"map-winrate",style:{color:d(m.winRate)},children:[m.winRate,"%"]})]},m.mapName))})]})]}),e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"🎯 Game Mode Wins"}),e.jsxs("div",{className:"gamemode-stats",children:[e.jsxs("div",{className:"gamemode-item",children:[e.jsx("div",{className:"gamemode-icon",children:"🌍"}),e.jsx("div",{className:"gamemode-name",children:"Classic"}),e.jsxs("div",{className:"gamemode-wins",children:[r.gameModes.classicWins," wins"]})]}),e.jsxs("div",{className:"gamemode-item",children:[e.jsx("div",{className:"gamemode-icon",children:"👑"}),e.jsx("div",{className:"gamemode-name",children:"Capital Conquest"}),e.jsxs("div",{className:"gamemode-wins",children:[r.gameModes.capitalConquestWins," wins"]})]}),e.jsxs("div",{className:"gamemode-item",children:[e.jsx("div",{className:"gamemode-icon",children:"⚓"}),e.jsx("div",{className:"gamemode-name",children:"Naval Supremacy"}),e.jsxs("div",{className:"gamemode-wins",children:[r.gameModes.navalSupremacyWins," wins"]})]}),e.jsxs("div",{className:"gamemode-item",children:[e.jsx("div",{className:"gamemode-icon",children:"💰"}),e.jsx("div",{className:"gamemode-name",children:"Resource War"}),e.jsxs("div",{className:"gamemode-wins",children:[r.gameModes.resourceWarWins," wins"]})]}),e.jsxs("div",{className:"gamemode-item",children:[e.jsx("div",{className:"gamemode-icon",children:"⚖️"}),e.jsx("div",{className:"gamemode-name",children:"Asymmetric"}),e.jsxs("div",{className:"gamemode-wins",children:[r.gameModes.asymmetricWins," wins"]})]})]})]}),e.jsxs("div",{className:"stats-section",children:[e.jsx("h2",{children:"📈 Monthly Trends"}),e.jsxs("div",{className:"trends-chart",children:[e.jsxs("div",{className:"chart-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color games"}),e.jsx("span",{children:"Games Played"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color winrate"}),e.jsx("span",{children:"Win Rate %"})]})]}),e.jsx("div",{className:"chart-container",children:r.monthly.labels.map((m,g)=>e.jsxs("div",{className:"chart-bar",children:[e.jsxs("div",{className:"bar-container",children:[e.jsx("div",{className:"bar games",style:{height:`${r.monthly.gamesPlayed[g]/Math.max(...r.monthly.gamesPlayed)*100}%`}}),e.jsx("div",{className:"bar winrate",style:{height:`${r.monthly.winRate[g]}%`}})]}),e.jsx("div",{className:"bar-label",children:m}),e.jsxs("div",{className:"bar-values",children:[e.jsx("div",{className:"games-value",children:r.monthly.gamesPlayed[g]}),e.jsxs("div",{className:"winrate-value",children:[r.monthly.winRate[g],"%"]})]})]},m))})]})]})]}):e.jsx("div",{className:"user-stats error",children:e.jsx("div",{className:"error-message",children:"❌ Unable to load statistics"})})},cl=()=>e.jsx("div",{className:"statistics-page",children:e.jsx(ll,{})}),dl=({territories:s,onTerritoryClick:t,onTerritoryHover:r,getTerritoryColor:n,hoveredTerritory:a,selectedTerritory:i,selectedTargetTerritory:o,validTargets:l,pendingAction:c})=>{const d=m=>{const g="cursor-pointer transition-all duration-200";let f="",u="1",y="#333";return i===m?(f+=" drop-shadow-lg",u="3",y="#FFD700"):o===m?(f+=" drop-shadow-md",u="2",y="#FF4444"):l.includes(m)?(f+=" drop-shadow-sm",u="2",y="#44FF44"):a===m&&(f+=" brightness-110 stroke-2",u="2"),c&&(c==="attack"&&l.includes(m)||c==="deploy"&&i===m||c==="fortify"&&l.includes(m))&&(f+=" animate-pulse"),{className:`${g} ${f}`,strokeWidth:u,stroke:y}},h={alaska:"M 20 80 L 80 60 L 120 80 L 140 120 L 100 140 L 60 130 Z",northwest_territory:"M 140 60 L 200 50 L 240 80 L 220 120 L 180 130 L 140 120 Z",greenland:"M 250 40 L 320 30 L 340 70 L 320 100 L 280 110 L 240 80 Z",alberta:"M 100 120 L 140 120 L 180 130 L 180 170 L 140 180 L 100 170 Z",ontario:"M 140 120 L 220 120 L 240 140 L 220 180 L 180 170 L 140 180 Z",quebec:"M 220 120 L 280 110 L 300 140 L 280 180 L 240 180 L 220 140 Z",western_united_states:"M 100 170 L 180 170 L 220 180 L 200 220 L 160 230 L 120 220 Z",eastern_united_states:"M 180 170 L 240 180 L 260 200 L 240 230 L 200 220 L 180 190 Z",central_america:"M 120 220 L 200 220 L 240 230 L 220 270 L 180 280 L 140 270 Z",venezuela:"M 180 270 L 220 270 L 240 300 L 220 320 L 180 310 L 160 290 Z",brazil:"M 200 300 L 280 290 L 300 340 L 280 370 L 240 380 L 200 360 L 180 330 Z",peru:"M 160 320 L 200 330 L 220 360 L 200 380 L 160 370 L 140 340 Z",argentina:"M 180 370 L 240 380 L 250 420 L 220 450 L 180 440 L 160 410 Z",iceland:"M 300 90 L 340 80 L 360 110 L 340 130 L 300 120 L 280 100 Z",great_britain:"M 320 140 L 360 130 L 380 160 L 360 180 L 320 170 L 300 150 Z",scandinavia:"M 360 80 L 420 70 L 440 110 L 420 140 L 380 130 L 360 100 Z",ukraine:"M 420 120 L 480 110 L 500 150 L 480 180 L 440 170 L 420 140 Z",northern_europe:"M 360 140 L 420 130 L 440 160 L 420 180 L 380 170 L 360 150 Z",western_europe:"M 320 180 L 380 170 L 400 200 L 380 220 L 340 210 L 320 190 Z",southern_europe:"M 380 180 L 440 170 L 460 200 L 440 220 L 400 210 L 380 190 Z",north_africa:"M 320 240 L 400 230 L 420 270 L 400 300 L 360 310 L 340 280 Z",egypt:"M 400 250 L 440 240 L 460 270 L 440 290 L 420 280 L 400 260 Z",east_africa:"M 420 300 L 460 290 L 480 330 L 460 360 L 440 350 L 420 320 Z",congo:"M 360 320 L 420 310 L 440 340 L 420 370 L 380 380 L 360 350 Z",south_africa:"M 380 370 L 440 360 L 460 390 L 440 420 L 400 430 L 380 400 Z",madagascar:"M 460 350 L 480 340 L 490 370 L 480 390 L 460 380 L 450 360 Z",middle_east:"M 460 210 L 500 200 L 520 240 L 500 270 L 480 260 L 460 230 Z",afghanistan:"M 480 180 L 520 170 L 540 200 L 520 230 L 500 220 L 480 190 Z",ural:"M 480 110 L 540 100 L 560 140 L 540 160 L 520 150 L 480 120 Z",siberia:"M 540 80 L 600 70 L 620 110 L 600 140 L 560 130 L 540 100 Z",yakutsk:"M 600 60 L 660 50 L 680 80 L 660 110 L 620 100 L 600 70 Z",kamchatka:"M 660 80 L 720 70 L 740 110 L 720 140 L 680 130 L 660 100 Z",irkutsk:"M 600 120 L 660 110 L 680 140 L 660 160 L 620 150 L 600 130 Z",mongolia:"M 600 150 L 660 140 L 680 180 L 660 200 L 620 190 L 600 170 Z",japan:"M 680 180 L 720 170 L 740 200 L 720 220 L 700 210 L 680 190 Z",china:"M 560 170 L 620 160 L 640 200 L 620 230 L 580 220 L 560 190 Z",india:"M 520 240 L 580 230 L 600 270 L 580 300 L 540 290 L 520 260 Z",siam:"M 580 260 L 620 250 L 640 280 L 620 310 L 600 300 L 580 280 Z",indonesia:"M 600 320 L 640 310 L 660 340 L 640 360 L 620 350 L 600 330 Z",new_guinea:"M 640 340 L 680 330 L 700 360 L 680 380 L 660 370 L 640 350 Z",western_australia:"M 600 360 L 640 350 L 660 390 L 640 420 L 600 430 L 580 400 Z",eastern_australia:"M 640 380 L 680 370 L 700 410 L 680 440 L 640 430 L 620 400 Z"};return e.jsx("svg",{viewBox:"0 0 800 500",className:"w-full h-full",style:{maxHeight:"70vh"},children:Object.keys(s).map(m=>{const g=d(m),f=h[m];return f?e.jsx("path",{id:m,d:f,fill:n(m),stroke:g.stroke,strokeWidth:g.strokeWidth,className:g.className,onClick:()=>t(m),onMouseEnter:()=>r(m),onMouseLeave:()=>r(null)},m):null})})},ml={north_america:{name:"North America",bonus:5,color:"#4CAF50"},south_america:{name:"South America",bonus:2,color:"#FF9800"},europe:{name:"Europe",bonus:5,color:"#2196F3"},africa:{name:"Africa",bonus:3,color:"#9C27B0"},asia:{name:"Asia",bonus:7,color:"#F44336"},australia:{name:"Australia",bonus:2,color:"#FFEB3B"}},hl={alaska:{id:"alaska",name:"Alaska",continent:"north_america",adjacentTerritories:["northwest_territory","alberta","kamchatka"],armyPosition:{x:80,y:120}},northwest_territory:{id:"northwest_territory",name:"Northwest Territory",continent:"north_america",adjacentTerritories:["alaska","alberta","ontario","greenland"],armyPosition:{x:160,y:100}},greenland:{id:"greenland",name:"Greenland",continent:"north_america",adjacentTerritories:["northwest_territory","ontario","quebec","iceland"],armyPosition:{x:280,y:80}},alberta:{id:"alberta",name:"Alberta",continent:"north_america",adjacentTerritories:["alaska","northwest_territory","ontario","western_united_states"],armyPosition:{x:140,y:140}},ontario:{id:"ontario",name:"Ontario",continent:"north_america",adjacentTerritories:["northwest_territory","greenland","quebec","alberta","western_united_states","eastern_united_states"],armyPosition:{x:180,y:160}},quebec:{id:"quebec",name:"Quebec",continent:"north_america",adjacentTerritories:["greenland","ontario","eastern_united_states"],armyPosition:{x:220,y:160}},western_united_states:{id:"western_united_states",name:"Western United States",continent:"north_america",adjacentTerritories:["alberta","ontario","eastern_united_states","central_america"],armyPosition:{x:140,y:200}},eastern_united_states:{id:"eastern_united_states",name:"Eastern United States",continent:"north_america",adjacentTerritories:["ontario","quebec","western_united_states","central_america"],armyPosition:{x:180,y:200}},central_america:{id:"central_america",name:"Central America",continent:"north_america",adjacentTerritories:["western_united_states","eastern_united_states","venezuela"],armyPosition:{x:160,y:240}},venezuela:{id:"venezuela",name:"Venezuela",continent:"south_america",adjacentTerritories:["central_america","brazil","peru"],armyPosition:{x:200,y:280}},brazil:{id:"brazil",name:"Brazil",continent:"south_america",adjacentTerritories:["venezuela","peru","argentina","north_africa"],armyPosition:{x:240,y:320}},peru:{id:"peru",name:"Peru",continent:"south_america",adjacentTerritories:["venezuela","brazil","argentina"],armyPosition:{x:200,y:340}},argentina:{id:"argentina",name:"Argentina",continent:"south_america",adjacentTerritories:["peru","brazil"],armyPosition:{x:220,y:380}},iceland:{id:"iceland",name:"Iceland",continent:"europe",adjacentTerritories:["greenland","great_britain","scandinavia"],armyPosition:{x:320,y:120}},great_britain:{id:"great_britain",name:"Great Britain",continent:"europe",adjacentTerritories:["iceland","scandinavia","northern_europe","western_europe"],armyPosition:{x:340,y:160}},scandinavia:{id:"scandinavia",name:"Scandinavia",continent:"europe",adjacentTerritories:["iceland","great_britain","northern_europe","ukraine"],armyPosition:{x:380,y:120}},ukraine:{id:"ukraine",name:"Ukraine",continent:"europe",adjacentTerritories:["scandinavia","northern_europe","southern_europe","ural","afghanistan","middle_east"],armyPosition:{x:420,y:160}},northern_europe:{id:"northern_europe",name:"Northern Europe",continent:"europe",adjacentTerritories:["great_britain","scandinavia","ukraine","southern_europe","western_europe"],armyPosition:{x:380,y:160}},western_europe:{id:"western_europe",name:"Western Europe",continent:"europe",adjacentTerritories:["great_britain","northern_europe","southern_europe","north_africa"],armyPosition:{x:340,y:200}},southern_europe:{id:"southern_europe",name:"Southern Europe",continent:"europe",adjacentTerritories:["ukraine","northern_europe","western_europe","north_africa","egypt","middle_east"],armyPosition:{x:380,y:200}},north_africa:{id:"north_africa",name:"North Africa",continent:"africa",adjacentTerritories:["brazil","western_europe","southern_europe","egypt","east_africa","congo"],armyPosition:{x:360,y:260}},egypt:{id:"egypt",name:"Egypt",continent:"africa",adjacentTerritories:["southern_europe","north_africa","east_africa","middle_east"],armyPosition:{x:400,y:280}},east_africa:{id:"east_africa",name:"East Africa",continent:"africa",adjacentTerritories:["north_africa","egypt","congo","south_africa","madagascar","middle_east"],armyPosition:{x:420,y:320}},congo:{id:"congo",name:"Congo",continent:"africa",adjacentTerritories:["north_africa","east_africa","south_africa"],armyPosition:{x:380,y:340}},south_africa:{id:"south_africa",name:"South Africa",continent:"africa",adjacentTerritories:["congo","east_africa","madagascar"],armyPosition:{x:400,y:380}},madagascar:{id:"madagascar",name:"Madagascar",continent:"africa",adjacentTerritories:["east_africa","south_africa"],armyPosition:{x:440,y:360}},middle_east:{id:"middle_east",name:"Middle East",continent:"asia",adjacentTerritories:["ukraine","southern_europe","egypt","east_africa","afghanistan","india"],armyPosition:{x:460,y:240}},afghanistan:{id:"afghanistan",name:"Afghanistan",continent:"asia",adjacentTerritories:["ukraine","middle_east","ural","china","india"],armyPosition:{x:480,y:200}},ural:{id:"ural",name:"Ural",continent:"asia",adjacentTerritories:["ukraine","afghanistan","siberia","china"],armyPosition:{x:480,y:140}},siberia:{id:"siberia",name:"Siberia",continent:"asia",adjacentTerritories:["ural","china","mongolia","irkutsk","yakutsk"],armyPosition:{x:520,y:120}},yakutsk:{id:"yakutsk",name:"Yakutsk",continent:"asia",adjacentTerritories:["siberia","irkutsk","kamchatka"],armyPosition:{x:560,y:100}},kamchatka:{id:"kamchatka",name:"Kamchatka",continent:"asia",adjacentTerritories:["yakutsk","irkutsk","mongolia","japan","alaska"],armyPosition:{x:600,y:120}},irkutsk:{id:"irkutsk",name:"Irkutsk",continent:"asia",adjacentTerritories:["siberia","yakutsk","kamchatka","mongolia"],armyPosition:{x:560,y:140}},mongolia:{id:"mongolia",name:"Mongolia",continent:"asia",adjacentTerritories:["siberia","irkutsk","kamchatka","china","japan"],armyPosition:{x:560,y:180}},japan:{id:"japan",name:"Japan",continent:"asia",adjacentTerritories:["kamchatka","mongolia"],armyPosition:{x:600,y:200}},china:{id:"china",name:"China",continent:"asia",adjacentTerritories:["ural","siberia","mongolia","afghanistan","india","siam"],armyPosition:{x:520,y:200}},india:{id:"india",name:"India",continent:"asia",adjacentTerritories:["middle_east","afghanistan","china","siam"],armyPosition:{x:500,y:260}},siam:{id:"siam",name:"Siam",continent:"asia",adjacentTerritories:["china","india","indonesia"],armyPosition:{x:540,y:280}},indonesia:{id:"indonesia",name:"Indonesia",continent:"australia",adjacentTerritories:["siam","new_guinea","western_australia"],armyPosition:{x:560,y:320}},new_guinea:{id:"new_guinea",name:"New Guinea",continent:"australia",adjacentTerritories:["indonesia","western_australia","eastern_australia"],armyPosition:{x:600,y:340}},western_australia:{id:"western_australia",name:"Western Australia",continent:"australia",adjacentTerritories:["indonesia","new_guinea","eastern_australia"],armyPosition:{x:560,y:380}},eastern_australia:{id:"eastern_australia",name:"Eastern Australia",continent:"australia",adjacentTerritories:["new_guinea","western_australia"],armyPosition:{x:600,y:380}}},Ot={continents:ml,territories:hl},ul=(s,t)=>{const r={};return s.forEach(n=>{const a=t.territories[n.id];a&&(r[n.id]={id:n.id,name:a.name,continent:a.continent,adjacentTerritories:a.adjacentTerritories,armyPosition:a.armyPosition,owner:n.ownerId,armies:n.armies})}),r},Gs=({onTerritoryClick:s})=>{var N,C;const t=dt(),r=z(k=>k.game.currentGame),n=z(k=>k.game.selectedTerritory),a=z(k=>k.game.selectedTargetTerritory),i=z(k=>k.game.validTargets),o=z(k=>k.game.pendingAction),[l,c]=b.useState(null);if(!r)return e.jsx("div",{className:"flex items-center justify-center h-full bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-600 mb-2",children:"No Game in Progress"}),e.jsx("p",{className:"text-gray-500",children:"Join a game room to start playing!"})]})});const d=ul(r.board,Ot),h=r.players,m=r.currentPlayer,g=r.phase,f=b.useCallback(k=>{const _=d[k];if(!_||!_.owner)return"#E0E0E0";const M=h.find(O=>O.id===_.owner);return(M==null?void 0:M.color)||"#E0E0E0"},[d,h]),u=b.useCallback(k=>{if(n===k){t(W(null));return}n&&i.includes(k)?(t(se(k)),g==="reinforcement"?t(H("deploy")):g==="attack"?t(H("attack")):g==="fortify"&&t(H("fortify"))):(t(W(k)),t(se(null))),s==null||s(k)},[n,i,g,t,s]),y=b.useCallback(()=>{t(Zr())},[t]),x=b.useCallback(k=>{c(k)},[]),v=h.find(k=>k.id===m);return e.jsxs("div",{className:"flex flex-col h-full bg-blue-50 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-blue-900 text-white p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Risk Game Board"}),e.jsxs("div",{className:"text-sm opacity-75 mt-1",children:["Phase: ",g.charAt(0).toUpperCase()+g.slice(1)," | Turn: ",r.turn]})]}),v&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Current Turn:"}),e.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:v.color}}),e.jsx("span",{className:"font-semibold",children:v.username})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"flex-1 relative bg-blue-100 p-4",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx(dl,{territories:d,onTerritoryClick:u,onTerritoryHover:x,getTerritoryColor:f,hoveredTerritory:l,selectedTerritory:n,selectedTargetTerritory:a,validTargets:i,pendingAction:o}),Object.entries(d).map(([k,_])=>_.armies?e.jsx("div",{className:"absolute pointer-events-none",style:{left:`${_.armyPosition.x/800*100}%`,top:`${_.armyPosition.y/500*100}%`,transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"bg-white border-2 border-gray-800 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold shadow-lg",children:_.armies})},`army-${k}`):null)]})}),e.jsxs("div",{className:"w-80 bg-white border-l border-gray-300 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx(Kr,{onEndTurn:y})}),e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Players"}),e.jsx("div",{className:"space-y-2",children:h.map(k=>{const _=Object.values(d).filter(O=>O.owner===k.id).length,M=Object.values(d).filter(O=>O.owner===k.id).reduce((O,K)=>O+(K.armies||0),0);return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${k.id===m?"bg-blue-100 border border-blue-300":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400",style:{backgroundColor:k.color}}),e.jsx("span",{className:"font-medium",children:k.username})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("span",{children:[_," territories"]}),e.jsx("br",{}),e.jsxs("span",{children:[M," armies"]})]})]},k.id)})})]}),(n||o)&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Current Action"}),n&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Selected: "}),e.jsx("span",{className:"text-sm",children:(N=d[n])==null?void 0:N.name})]}),a&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Target: "}),e.jsx("span",{className:"text-sm",children:(C=d[a])==null?void 0:C.name})]}),o&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Action: "}),e.jsx("span",{className:"text-sm capitalize bg-yellow-200 px-2 py-1 rounded",children:o})]}),i.length>0&&e.jsxs("div",{className:"text-xs text-gray-600",children:[i.length," valid target(s) available"]})]}),(l||n)&&e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Territory Info"}),(()=>{const _=d[l||n],M=h.find(K=>K.id===(_==null?void 0:_.owner)),O=Ot.continents[_==null?void 0:_.continent];return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:_==null?void 0:_.name})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Continent: ",O==null?void 0:O.name," (+",O==null?void 0:O.bonus," bonus)"]}),M&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm",children:"Owner:"}),e.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-400",style:{backgroundColor:M.color}}),e.jsx("span",{className:"text-sm font-medium",children:M.username})]}),e.jsxs("div",{className:"text-sm",children:["Armies: ",(_==null?void 0:_.armies)||0]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Adjacent to: ",_==null?void 0:_.adjacentTerritories.length," territories"]})]})})()]}),e.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Continent Bonuses"}),e.jsx("div",{className:"space-y-2",children:Object.entries(Ot.continents).map(([k,_])=>e.jsxs("div",{className:"p-2 rounded border border-gray-200",children:[e.jsx("div",{className:"font-medium",children:_.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["+",_.bonus," armies per turn"]})]},k))})]})]})]})]})};function xl(){var o,l;const{roomId:s}=Hs(),t=nn(),{currentRoom:r}=ue(c=>c.room),{currentGame:n}=ue(c=>c.game),{user:a}=ue(c=>c.auth);b.useEffect(()=>{if(!s){t("/lobby");return}return we.joinRoom(s),()=>{s&&we.leaveRoom(s)}},[s,t]);const i=()=>{t("/lobby")};return r?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:r.name}),e.jsx("button",{onClick:i,className:"bg-red-600 hover:bg-red-700 px-4 py-2 rounded",children:"Leave Room"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"h-[600px]",children:n?e.jsx(Gs,{onTerritoryClick:c=>{console.log("Territory clicked:",c)}}):e.jsx("div",{className:"bg-gray-800 rounded-lg p-6 h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Waiting for game to start..."}),e.jsx("p",{children:"Need at least 2 players to begin"}),e.jsx("div",{className:"mt-6",children:e.jsx(Gs,{onTerritoryClick:c=>{console.log("Preview territory clicked:",c)}})})]})})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3",children:["Players (",((o=r.players)==null?void 0:o.length)||0,"/",r.maxPlayers,")"]}),e.jsx("div",{className:"space-y-2",children:(l=r.players)==null?void 0:l.map(c=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:c.userId===(a==null?void 0:a.id)?"font-bold":"",children:c.username}),c.userId===r.hostId&&e.jsx("span",{className:"text-xs bg-yellow-600 px-2 py-1 rounded",children:"HOST"})]},c.userId))})]}),n&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Game Controls"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 px-3 py-2 rounded text-sm",children:"Deploy Armies"}),e.jsx("button",{className:"w-full bg-red-600 hover:bg-red-700 px-3 py-2 rounded text-sm",children:"Attack"}),e.jsx("button",{className:"w-full bg-green-600 hover:bg-green-700 px-3 py-2 rounded text-sm",children:"Fortify"}),e.jsx("button",{className:"w-full bg-gray-600 hover:bg-gray-700 px-3 py-2 rounded text-sm",children:"End Turn"})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Chat"}),e.jsx("div",{className:"h-32 bg-gray-700 rounded p-2 mb-2 overflow-y-auto",children:e.jsx("div",{className:"text-sm text-gray-400",children:"Chat messages will appear here..."})}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",placeholder:"Type a message...",className:"flex-1 px-2 py-1 bg-gray-700 border border-gray-600 rounded-l text-sm"}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded-r text-sm",children:"Send"})]})]})]})]})]}):e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-xl",children:"Loading room..."})})}const Yr="https://conquestk.com/api",te=q.create({baseURL:Yr});te.interceptors.request.use(s=>{const t=localStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s});const be={async searchMaps(s={}){const t=new URLSearchParams;return s.search&&t.append("search",s.search),s.tags&&t.append("tags",s.tags.join(",")),s.creator&&t.append("creator",s.creator),s.isFeatured!==void 0&&t.append("featured",s.isFeatured.toString()),s.minRating&&t.append("minRating",s.minRating.toString()),s.sortBy&&t.append("sortBy",s.sortBy),s.sortOrder&&t.append("sortOrder",s.sortOrder),s.limit&&t.append("limit",s.limit.toString()),s.offset&&t.append("offset",s.offset.toString()),(await te.get(`/maps?${t.toString()}`)).data},async getMap(s){return(await te.get(`/maps/${s}`)).data},async createMap(s,t){const r=new FormData;return r.append("name",s.name),s.description&&r.append("description",s.description),s.isPublic!==void 0&&r.append("isPublic",s.isPublic.toString()),s.tags&&r.append("tags",JSON.stringify(s.tags)),t&&r.append("image",t),(await te.post("/maps",r,{headers:{"Content-Type":"multipart/form-data"}})).data},async updateMap(s,t,r){const n=new FormData;return t.name&&n.append("name",t.name),t.description!==void 0&&n.append("description",t.description),t.isPublic!==void 0&&n.append("isPublic",t.isPublic.toString()),t.tags&&n.append("tags",JSON.stringify(t.tags)),r&&n.append("image",r),(await te.put(`/maps/${s}`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},async deleteMap(s){await te.delete(`/maps/${s}`)},async getMyMaps(s={}){const t=new URLSearchParams;return s.sortBy&&t.append("sortBy",s.sortBy),s.sortOrder&&t.append("sortOrder",s.sortOrder),s.limit&&t.append("limit",s.limit.toString()),s.offset&&t.append("offset",s.offset.toString()),(await te.get(`/maps/my/maps?${t.toString()}`)).data},async createTerritory(s){return(await te.post(`/maps/${s.mapId}/territories`,s)).data},async createContinent(s,t){return(await te.post(`/maps/${s}/continents`,t)).data},async createAdjacency(s){return(await te.post("/maps/adjacencies",s)).data},async getGameModes(){return(await te.get("/maps/game-modes/list")).data},async getTerritoryAbilityTypes(){return(await te.get("/maps/abilities/list")).data},async rateMap(s,t,r){return(await te.post(`/maps/${s}/rate`,{rating:t,review:r})).data},getImageUrl(s){return s?s.startsWith("http")?s:`${Yr.replace("/api","")}${s}`:""},validateMapData(s,t){const r=[],n=new Set;if(t.forEach(a=>{n.add(a.fromTerritoryId),n.add(a.toTerritoryId)}),s.forEach(a=>{n.has(a.id)||r.push(`Territory "${a.name}" has no connections`)}),s.length>0){const a=new Set,i=[s[0].id];for(;i.length>0;){const o=i.shift();a.has(o)||(a.add(o),t.forEach(l=>{l.fromTerritoryId===o&&!a.has(l.toTerritoryId)&&i.push(l.toTerritoryId),l.isBidirectional&&l.toTerritoryId===o&&!a.has(l.fromTerritoryId)&&i.push(l.fromTerritoryId)}))}a.size!==s.length&&r.push("Map is not fully connected - some territories are unreachable")}return{isValid:r.length===0,errors:r}}};function Mt(){const s=b.useRef(null),t=b.useRef(null),[r,n]=b.useState({selectedTool:"select",territories:[],continents:[],isDrawing:!1,currentPolygon:[],imageWidth:800,imageHeight:600}),[a,i]=b.useState([]),[o,l]=b.useState([]),[c,d]=b.useState(""),[h,m]=b.useState(""),[g,f]=b.useState(""),[u,y]=b.useState(""),[x,v]=b.useState(2),[N,C]=b.useState("#3B82F6"),[k,_]=b.useState(!1),[M,O]=b.useState("idle");b.useEffect(()=>{K()},[]);const K=async()=>{try{const[j,w]=await Promise.all([be.getTerritoryAbilityTypes(),be.getGameModes()]);i(j),l(w)}catch(j){console.error("Error loading metadata:",j)}};b.useEffect(()=>{const j=s.current;if(!j)return;const w=j.getContext("2d");if(w)if(w.clearRect(0,0,j.width,j.height),r.imageUrl){const S=new Image;S.onload=()=>{w.drawImage(S,0,0,j.width,j.height),P(w)},S.src=be.getImageUrl(r.imageUrl)}else T(w),P(w)},[r.imageUrl,r.territories,r.continents,r.selectedTerritory]);const T=j=>{const w=j.canvas;j.strokeStyle="#374151",j.lineWidth=1;for(let S=0;S<=w.width;S+=50)j.beginPath(),j.moveTo(S,0),j.lineTo(S,w.height),j.stroke();for(let S=0;S<=w.height;S+=50)j.beginPath(),j.moveTo(0,S),j.lineTo(w.width,S),j.stroke()},P=j=>{r.territories.forEach(w=>{const S=r.continents.find(E=>E.id===w.continentId),I=r.selectedTerritory===w.id;j.fillStyle=S?`${S.color}80`:"#6B728080",j.strokeStyle=I?"#FFD700":"#374151",j.lineWidth=I?3:2,w.boundaryCoords.length>0&&(j.beginPath(),j.moveTo(w.boundaryCoords[0].x,w.boundaryCoords[0].y),w.boundaryCoords.slice(1).forEach(E=>{j.lineTo(E.x,E.y)}),j.closePath(),j.fill(),j.stroke(),j.fillStyle="#FFFFFF",j.font="12px sans-serif",j.textAlign="center",j.fillText(w.name,w.armyPosition.x,w.armyPosition.y))}),r.isDrawing&&r.currentPolygon.length>0&&(j.strokeStyle="#60A5FA",j.lineWidth=2,j.setLineDash([5,5]),j.beginPath(),j.moveTo(r.currentPolygon[0].x,r.currentPolygon[0].y),r.currentPolygon.slice(1).forEach(w=>{j.lineTo(w.x,w.y)}),j.stroke(),j.setLineDash([]))},Z=b.useCallback(j=>{const w=s.current;if(!w)return;const S=w.getBoundingClientRect(),I=j.clientX-S.left,E=j.clientY-S.top;if(r.selectedTool==="territory")r.isDrawing?n(V=>({...V,currentPolygon:[...V.currentPolygon,{x:I,y:E}]})):n(V=>({...V,isDrawing:!0,currentPolygon:[{x:I,y:E}]}));else if(r.selectedTool==="select"){const V=Ge(I,E);n(kt=>({...kt,selectedTerritory:V==null?void 0:V.id}))}},[r.selectedTool,r.isDrawing,r.territories]),U=b.useCallback(()=>{r.selectedTool==="territory"&&r.isDrawing&&r.currentPolygon.length>=3&&me()},[r.selectedTool,r.isDrawing,r.currentPolygon]),me=()=>{var I;if(!g.trim()||r.currentPolygon.length<3)return;const j=r.currentPolygon.reduce((E,V)=>E+V.x,0)/r.currentPolygon.length,w=r.currentPolygon.reduce((E,V)=>E+V.y,0)/r.currentPolygon.length,S={id:`temp_${Date.now()}`,mapId:((I=r.currentMap)==null?void 0:I.id)||"temp",territoryId:g.toLowerCase().replace(/\s+/g,"_"),name:g,continentId:r.selectedContinent,boundaryCoords:r.currentPolygon,armyPosition:{x:j,y:w},startingArmies:1,createdAt:new Date().toISOString()};n(E=>({...E,territories:[...E.territories,S],isDrawing:!1,currentPolygon:[],selectedTerritory:S.id})),f("")},Ge=(j,w)=>r.territories.find(S=>We({x:j,y:w},S.boundaryCoords)),We=(j,w)=>{let S=!1;for(let I=0,E=w.length-1;I<w.length;E=I++)w[I].y>j.y!=w[E].y>j.y&&j.x<(w[E].x-w[I].x)*(j.y-w[I].y)/(w[E].y-w[I].y)+w[I].x&&(S=!S);return S},ze=async j=>{var E;const w=(E=j.target.files)==null?void 0:E[0];if(!w)return;const S=URL.createObjectURL(w),I=new Image;I.onload=()=>{n(V=>({...V,imageUrl:S,imageWidth:I.width,imageHeight:I.height}))},I.src=S},He=()=>{var w;if(!u.trim())return;const j={id:`temp_${Date.now()}`,mapId:((w=r.currentMap)==null?void 0:w.id)||"temp",name:u,bonusArmies:x,color:N,createdAt:new Date().toISOString()};n(S=>({...S,continents:[...S.continents,j]})),y("")},B=async()=>{var j;if(!c.trim()){alert("Please enter a map name");return}O("saving");try{const w={name:c,description:h,isPublic:k,tags:["custom"]},S=await be.createMap(w),I=[];for(const E of r.continents){const V=await be.createContinent(S.id,{name:E.name,bonusArmies:E.bonusArmies,color:E.color});I.push(V)}for(const E of r.territories){const V=(j=I.find(kt=>{var xs;return kt.name===((xs=r.continents.find(Xr=>Xr.id===E.continentId))==null?void 0:xs.name)}))==null?void 0:j.id;await be.createTerritory({mapId:S.id,territoryId:E.territoryId,name:E.name,continentId:V,boundaryCoords:E.boundaryCoords,armyPosition:E.armyPosition,startingArmies:E.startingArmies})}n(E=>({...E,currentMap:S})),O("saved"),setTimeout(()=>O("idle"),2e3)}catch(w){console.error("Error saving map:",w),O("error"),setTimeout(()=>O("idle"),2e3)}},ke=()=>{confirm("Are you sure you want to clear the entire map? This cannot be undone.")&&(n(j=>({...j,territories:[],continents:[],currentPolygon:[],isDrawing:!1,selectedTerritory:void 0,selectedContinent:void 0,imageUrl:void 0})),d(""),m(""))},Ee=()=>{const j=be.validateMapData(r.territories,[]);j.isValid?alert("✅ Map validation passed! Your map is ready to use."):alert(`❌ Map validation failed:

${j.errors.join(`
`)}`)};return r.territories.find(j=>j.id===r.selectedTerritory),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"🗺️ Map Editor"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:B,disabled:M==="saving",className:`px-4 py-2 rounded font-medium ${M==="saving"?"bg-gray-600 cursor-not-allowed":M==="saved"?"bg-green-600 hover:bg-green-700":M==="error"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:M==="saving"?"💾 Saving...":M==="saved"?"✅ Saved":M==="error"?"❌ Error":"💾 Save Map"}),e.jsx("input",{ref:t,type:"file",accept:"image/*",onChange:ze,className:"hidden"}),e.jsx("button",{onClick:()=>{var j;return(j=t.current)==null?void 0:j.click()},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-medium",children:"📷 Upload Image"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Map Canvas"}),e.jsx("div",{className:"bg-gray-700 rounded overflow-hidden",children:e.jsx("canvas",{ref:s,width:800,height:600,onClick:Z,onDoubleClick:U,className:"w-full cursor-crosshair border border-gray-600",style:{maxHeight:"600px"}})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:[e.jsx("p",{children:e.jsx("strong",{children:"Instructions:"})}),e.jsx("p",{children:'• Select "Territory Tool" to draw territories by clicking to add points'}),e.jsx("p",{children:"• Double-click to finish drawing a territory"}),e.jsx("p",{children:'• Use "Select Tool" to click and select existing territories'}),e.jsx("p",{children:"• Upload a background image to trace territories over"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Map Info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Map Name"}),e.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm",placeholder:"Enter map name..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{value:h,onChange:j=>m(j.target.value),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm",rows:2,placeholder:"Describe your map..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isPublic",checked:k,onChange:j=>_(j.target.checked),className:"rounded"}),e.jsx("label",{htmlFor:"isPublic",className:"text-sm",children:"Make Public"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Tools"}),e.jsx("div",{className:"space-y-2",children:[{id:"select",name:"👆 Select Tool",desc:"Select territories"},{id:"territory",name:"🗺️ Territory Tool",desc:"Draw territories"},{id:"continent",name:"🌍 Continent Tool",desc:"Group territories"},{id:"adjacency",name:"🔗 Connection Tool",desc:"Connect territories"}].map(j=>e.jsxs("button",{onClick:()=>n(w=>({...w,selectedTool:j.id})),className:`w-full px-3 py-2 rounded text-sm text-left ${r.selectedTool===j.id?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx("div",{className:"font-medium",children:j.name}),e.jsx("div",{className:"text-xs opacity-75",children:j.desc})]},j.id))})]}),r.selectedTool==="territory"&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"New Territory"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Territory Name"}),e.jsx("input",{type:"text",value:g,onChange:j=>f(j.target.value),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm",placeholder:"Enter name..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Continent"}),e.jsxs("select",{value:r.selectedContinent||"",onChange:j=>n(w=>({...w,selectedContinent:j.target.value||void 0})),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm",children:[e.jsx("option",{value:"",children:"No continent"}),r.continents.map(j=>e.jsx("option",{value:j.id,children:j.name},j.id))]})]}),r.isDrawing&&e.jsxs("div",{className:"text-sm text-blue-400",children:["Drawing... (",r.currentPolygon.length," points)",e.jsx("br",{}),e.jsx("button",{onClick:me,className:"mt-2 bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-xs",children:"Finish Territory"})]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Continents"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:j=>y(j.target.value),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm",placeholder:"Name..."}),e.jsx("input",{type:"number",value:x,onChange:j=>v(parseInt(j.target.value)||2),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm",placeholder:"Bonus",min:"1",max:"10"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"color",value:N,onChange:j=>C(j.target.value),className:"flex-1 h-8 bg-gray-700 border border-gray-600 rounded"}),e.jsx("button",{onClick:He,className:"bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-sm",children:"Add"})]}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:r.continents.length===0?e.jsx("div",{className:"text-sm text-gray-400",children:"No continents created"}):r.continents.map(j=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded border border-gray-500",style:{backgroundColor:j.color}}),e.jsx("span",{children:j.name})]}),e.jsxs("span",{className:"text-gray-400",children:["+",j.bonusArmies]})]},j.id))})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-3",children:["Territories (",r.territories.length,")"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:r.territories.length===0?e.jsx("div",{className:"text-sm text-gray-400",children:"No territories created yet"}):r.territories.map(j=>{const w=r.continents.find(S=>S.id===j.continentId);return e.jsxs("div",{onClick:()=>n(S=>({...S,selectedTerritory:j.id})),className:`text-sm p-2 rounded cursor-pointer ${r.selectedTerritory===j.id?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx("div",{className:"font-medium",children:j.name}),w&&e.jsx("div",{className:"text-xs opacity-75",children:w.name})]},j.id)})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-bold mb-3",children:"Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:Ee,className:"w-full bg-yellow-600 hover:bg-yellow-700 px-3 py-2 rounded text-sm",children:"🔍 Validate Map"}),e.jsx("button",{onClick:ke,className:"w-full bg-red-600 hover:bg-red-700 px-3 py-2 rounded text-sm",children:"🗑️ Clear Map"})]})]})]})]})]})}const le={frozen_wastes:{id:"frozen_wastes",name:"Frozen Wastes",continent:"northern_lands",adjacentTerritories:["ice_peaks","tundra_plains"],armyPosition:{x:150,y:80},owner:"player1",armies:3},ice_peaks:{id:"ice_peaks",name:"Ice Peaks",continent:"northern_lands",adjacentTerritories:["frozen_wastes","tundra_plains","mountain_pass"],armyPosition:{x:300,y:80},owner:"player2",armies:5},tundra_plains:{id:"tundra_plains",name:"Tundra Plains",continent:"northern_lands",adjacentTerritories:["frozen_wastes","ice_peaks","forest_realm","mountain_pass"],armyPosition:{x:225,y:140},owner:"player1",armies:2},forest_realm:{id:"forest_realm",name:"Forest Realm",continent:"central_kingdoms",adjacentTerritories:["tundra_plains","mountain_pass","river_valley","crystal_caverns"],armyPosition:{x:150,y:200},owner:"player3",armies:4},mountain_pass:{id:"mountain_pass",name:"Mountain Pass",continent:"central_kingdoms",adjacentTerritories:["ice_peaks","tundra_plains","forest_realm","golden_fields","dragon_spine"],armyPosition:{x:300,y:200},owner:"player2",armies:6},river_valley:{id:"river_valley",name:"River Valley",continent:"central_kingdoms",adjacentTerritories:["forest_realm","crystal_caverns","coastal_haven"],armyPosition:{x:75,y:260},owner:"player3",armies:1},golden_fields:{id:"golden_fields",name:"Golden Fields",continent:"central_kingdoms",adjacentTerritories:["mountain_pass","dragon_spine","trade_crossroads"],armyPosition:{x:375,y:260},owner:"player4",armies:3},crystal_caverns:{id:"crystal_caverns",name:"Crystal Caverns",continent:"southern_realms",adjacentTerritories:["forest_realm","river_valley","coastal_haven","burning_sands"],armyPosition:{x:150,y:320},owner:"player3",armies:2},coastal_haven:{id:"coastal_haven",name:"Coastal Haven",continent:"southern_realms",adjacentTerritories:["river_valley","crystal_caverns","burning_sands"],armyPosition:{x:75,y:380},owner:"player1",armies:4},burning_sands:{id:"burning_sands",name:"Burning Sands",continent:"southern_realms",adjacentTerritories:["crystal_caverns","coastal_haven","trade_crossroads","jade_peaks"],armyPosition:{x:225,y:380},owner:"player4",armies:2},trade_crossroads:{id:"trade_crossroads",name:"Trade Crossroads",continent:"southern_realms",adjacentTerritories:["golden_fields","burning_sands","dragon_spine","jade_peaks","mystic_isles"],armyPosition:{x:375,y:380},owner:"player4",armies:7},dragon_spine:{id:"dragon_spine",name:"Dragon Spine",continent:"eastern_empire",adjacentTerritories:["mountain_pass","golden_fields","trade_crossroads","jade_peaks","mystic_isles"],armyPosition:{x:450,y:260},owner:"player2",armies:5},jade_peaks:{id:"jade_peaks",name:"Jade Peaks",continent:"eastern_empire",adjacentTerritories:["burning_sands","trade_crossroads","dragon_spine","mystic_isles"],armyPosition:{x:450,y:350},owner:"player4",armies:3},mystic_isles:{id:"mystic_isles",name:"Mystic Isles",continent:"eastern_empire",adjacentTerritories:["trade_crossroads","dragon_spine","jade_peaks"],armyPosition:{x:525,y:320},owner:"player2",armies:1}},Bt=[{id:"player1",username:"IceQueen",color:"#3B82F6"},{id:"player2",username:"DragonLord",color:"#EF4444"},{id:"player3",username:"ForestWarden",color:"#10B981"},{id:"player4",username:"DesertKing",color:"#F59E0B"}];function pl(){var m,g;const[s,t]=b.useState(null),[r,n]=b.useState(null),[a,i]=b.useState(null),[o,l]=b.useState(null),c=f=>{const u=le[f];if(!(u!=null&&u.owner))return"#F5F5F5";const y=Bt.find(x=>x.id===u.owner);return(y==null?void 0:y.color)||"#F5F5F5"},d=f=>{s===f?(t(null),i(null),l(null)):s&&s!==f?(i(f),l("attack")):(t(f),i(null),l(null))},h=()=>{if(!s)return[];const f=le[s];return f?f.adjacentTerritories.filter(u=>{const y=le[u];return y&&y.owner!==f.owner}):[]};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 to-blue-100 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"🏰 Fantasy Realms - Simple Map Demo"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Interactive 14-territory Risk-style game map"}),e.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg shadow-md",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Instructions:"})," Click territories to select them. Click adjacent enemy territories to attack. Hover for territory names."]})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[e.jsx("div",{className:"xl:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 h-[600px]",children:[e.jsx(Ar,{territories:le,onTerritoryClick:d,onTerritoryHover:n,getTerritoryColor:c,hoveredTerritory:r,selectedTerritory:s,selectedTargetTerritory:a,validTargets:h(),pendingAction:o}),Object.entries(le).map(([f,u])=>e.jsx("div",{className:"absolute pointer-events-none",style:{position:"relative",left:`${u.armyPosition.x/600*100}%`,top:`${u.armyPosition.y/450*100}%`,transform:"translate(-50%, -50%)",marginTop:"-500px"},children:e.jsx("div",{className:"bg-white border-2 border-gray-800 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold shadow-lg",children:u.armies})},`army-${f}`))]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:"👥 Players"}),e.jsx("div",{className:"space-y-3",children:Bt.map(f=>{const u=Object.values(le).filter(x=>x.owner===f.id).length,y=Object.values(le).filter(x=>x.owner===f.id).reduce((x,v)=>x+v.armies,0);return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-400",style:{backgroundColor:f.color}}),e.jsx("span",{className:"font-medium",children:f.username})]}),e.jsxs("div",{className:"text-sm text-gray-600 text-right",children:[e.jsx("span",{className:"font-medium",children:u})," realms",e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:y})," armies"]})]},f.id)})})]}),(s||r)&&e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:"🏯 Territory Info"}),(()=>{const u=le[r||s],y=Bt.find(v=>v.id===(u==null?void 0:u.owner)),x=Be.continents[u==null?void 0:u.continent];return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("span",{className:"font-bold text-lg",children:u==null?void 0:u.name})}),e.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[e.jsx("strong",{children:"Continent:"})," ",x==null?void 0:x.name,e.jsxs("span",{className:"text-green-600 font-semibold",children:[" (+",x==null?void 0:x.bonus," bonus)"]})]}),y&&e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:"Ruler:"}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-400",style:{backgroundColor:y.color}}),e.jsx("span",{className:"text-sm font-bold",children:y.username})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"Armies:"})," ",u==null?void 0:u.armies]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Borders:"})," ",u==null?void 0:u.adjacentTerritories.length]})]})]})})()]}),(s||o)&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-yellow-800 flex items-center gap-2",children:"⚔️ Current Action"}),s&&e.jsxs("div",{className:"mb-2 p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Selected: "}),e.jsx("span",{className:"text-sm font-semibold",children:(m=le[s])==null?void 0:m.name})]}),a&&e.jsxs("div",{className:"mb-2 p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Target: "}),e.jsx("span",{className:"text-sm font-semibold",children:(g=le[a])==null?void 0:g.name})]}),o&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Action: "}),e.jsx("span",{className:"text-sm font-bold capitalize bg-yellow-200 px-2 py-1 rounded",children:o})]}),h().length>0&&e.jsxs("div",{className:"text-xs text-gray-600 bg-green-100 p-2 rounded",children:[h().length," valid target(s) available"]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:"🏆 Realm Bonuses"}),e.jsx("div",{className:"space-y-3",children:Object.entries(Be.continents).map(([f,u])=>e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[e.jsx("div",{className:"font-medium",children:u.name}),e.jsxs("div",{className:"text-sm text-green-600 font-semibold",children:["+",u.bonus," armies per turn"]})]},f))})]})]})]})]})})}const fl=[{id:"alaska",name:"Alaska",x:8,y:15,continent:"north-america",connections:["kamchatka","alberta","northwest-territory"]},{id:"alberta",name:"Alberta",x:18,y:20,continent:"north-america",connections:["alaska","northwest-territory","ontario","western-united-states"]},{id:"northwest-territory",name:"Northwest Territory",x:20,y:15,continent:"north-america",connections:["alaska","alberta","ontario","greenland"]},{id:"ontario",name:"Ontario",x:25,y:22,continent:"north-america",connections:["alberta","northwest-territory","quebec","eastern-united-states","western-united-states"]},{id:"quebec",name:"Quebec",x:30,y:22,continent:"north-america",connections:["ontario","eastern-united-states","greenland"]},{id:"greenland",name:"Greenland",x:35,y:10,continent:"north-america",connections:["northwest-territory","quebec","iceland"]},{id:"western-united-states",name:"Western United States",x:18,y:28,continent:"north-america",connections:["alberta","ontario","eastern-united-states","central-america"]},{id:"eastern-united-states",name:"Eastern United States",x:25,y:28,continent:"north-america",connections:["ontario","quebec","western-united-states","central-america"]},{id:"central-america",name:"Central America",x:20,y:35,continent:"north-america",connections:["western-united-states","eastern-united-states","venezuela"]},{id:"venezuela",name:"Venezuela",x:25,y:42,continent:"south-america",connections:["central-america","brazil","peru"]},{id:"brazil",name:"Brazil",x:30,y:50,continent:"south-america",connections:["venezuela","peru","argentina","north-africa"]},{id:"peru",name:"Peru",x:22,y:50,continent:"south-america",connections:["venezuela","brazil","argentina"]},{id:"argentina",name:"Argentina",x:25,y:58,continent:"south-america",connections:["peru","brazil"]},{id:"iceland",name:"Iceland",x:42,y:15,continent:"europe",connections:["greenland","great-britain","scandinavia"]},{id:"great-britain",name:"Great Britain",x:45,y:22,continent:"europe",connections:["iceland","scandinavia","northern-europe","western-europe"]},{id:"scandinavia",name:"Scandinavia",x:50,y:18,continent:"europe",connections:["iceland","great-britain","northern-europe","ukraine"]},{id:"northern-europe",name:"Northern Europe",x:50,y:25,continent:"europe",connections:["great-britain","scandinavia","ukraine","southern-europe","western-europe"]},{id:"western-europe",name:"Western Europe",x:45,y:28,continent:"europe",connections:["great-britain","northern-europe","southern-europe","north-africa"]},{id:"southern-europe",name:"Southern Europe",x:52,y:30,continent:"europe",connections:["northern-europe","ukraine","western-europe","north-africa","egypt","middle-east"]},{id:"ukraine",name:"Ukraine",x:55,y:22,continent:"europe",connections:["scandinavia","northern-europe","southern-europe","ural","afghanistan","middle-east"]},{id:"north-africa",name:"North Africa",x:48,y:38,continent:"africa",connections:["western-europe","southern-europe","egypt","east-africa","congo","brazil"]},{id:"egypt",name:"Egypt",x:52,y:38,continent:"africa",connections:["southern-europe","north-africa","east-africa","middle-east"]},{id:"east-africa",name:"East Africa",x:55,y:45,continent:"africa",connections:["north-africa","egypt","congo","south-africa","madagascar","middle-east"]},{id:"congo",name:"Congo",x:50,y:48,continent:"africa",connections:["north-africa","east-africa","south-africa"]},{id:"south-africa",name:"South Africa",x:52,y:55,continent:"africa",connections:["congo","east-africa","madagascar"]},{id:"madagascar",name:"Madagascar",x:58,y:52,continent:"africa",connections:["east-africa","south-africa"]},{id:"middle-east",name:"Middle East",x:58,y:35,continent:"asia",connections:["southern-europe","ukraine","egypt","east-africa","afghanistan","india"]},{id:"afghanistan",name:"Afghanistan",x:62,y:30,continent:"asia",connections:["ukraine","middle-east","ural","china","india"]},{id:"ural",name:"Ural",x:62,y:22,continent:"asia",connections:["ukraine","afghanistan","siberia","china"]},{id:"siberia",name:"Siberia",x:70,y:18,continent:"asia",connections:["ural","china","mongolia","irkutsk","yakutsk"]},{id:"yakutsk",name:"Yakutsk",x:78,y:15,continent:"asia",connections:["siberia","irkutsk","kamchatka"]},{id:"irkutsk",name:"Irkutsk",x:75,y:22,continent:"asia",connections:["siberia","yakutsk","mongolia","kamchatka"]},{id:"kamchatka",name:"Kamchatka",x:82,y:18,continent:"asia",connections:["yakutsk","irkutsk","mongolia","japan","alaska"]},{id:"mongolia",name:"Mongolia",x:72,y:28,continent:"asia",connections:["siberia","irkutsk","kamchatka","china","japan"]},{id:"japan",name:"Japan",x:80,y:32,continent:"asia",connections:["kamchatka","mongolia"]},{id:"china",name:"China",x:68,y:32,continent:"asia",connections:["ural","siberia","mongolia","afghanistan","india","siam"]},{id:"india",name:"India",x:65,y:38,continent:"asia",connections:["middle-east","afghanistan","china","siam"]},{id:"siam",name:"Siam",x:70,y:42,continent:"asia",connections:["china","india","indonesia"]},{id:"indonesia",name:"Indonesia",x:72,y:48,continent:"australia",connections:["siam","new-guinea","western-australia"]},{id:"new-guinea",name:"New Guinea",x:78,y:48,continent:"australia",connections:["indonesia","western-australia","eastern-australia"]},{id:"western-australia",name:"Western Australia",x:75,y:58,continent:"australia",connections:["indonesia","new-guinea","eastern-australia"]},{id:"eastern-australia",name:"Eastern Australia",x:80,y:58,continent:"australia",connections:["new-guinea","western-australia"]}],gl={territories:fl},Ft={player1:"#ff4444",player2:"#4444ff",player3:"#44ff44",player4:"#ffff44",player5:"#ff44ff",player6:"#44ffff",neutral:"#888888"},bl=()=>{const s=gl.territories,[t,r]=b.useState({territories:s.reduce((o,l)=>(o[l.id]={owner:Math.random()>.7?"neutral":`player${Math.floor(Math.random()*3)+1}`,armies:Math.floor(Math.random()*5)+1},o),{}),currentPlayer:"player1",selectedTerritory:null}),n=b.useCallback(o=>{r(l=>({...l,selectedTerritory:l.selectedTerritory===o?null:o}))},[]),a=o=>{const l=t.territories[o.id],c=t.selectedTerritory===o.id;return{position:"absolute",left:`${o.x}%`,top:`${o.y}%`,transform:"translate(-50%, -50%)",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:Ft[l.owner]||Ft.neutral,border:c?"3px solid #000":"2px solid #fff",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#fff",textShadow:"1px 1px 1px rgba(0,0,0,0.8)",zIndex:c?1e3:100,boxShadow:c?"0 0 10px rgba(0,0,0,0.5)":"0 2px 4px rgba(0,0,0,0.3)",transition:"all 0.2s ease"}},i=t.selectedTerritory?s.find(o=>o.id===t.selectedTerritory):null;return e.jsxs("div",{style:{position:"relative",width:"100%",height:"600px",backgroundImage:'url("https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Risk_game_map_fixed.png/1024px-Risk_game_map_fixed.png")',backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",border:"2px solid #333",borderRadius:"8px",overflow:"hidden"},children:[s.map(o=>e.jsx("div",{style:a(o),onClick:()=>n(o.id),title:`${o.name} (${t.territories[o.id].armies} armies)`,children:t.territories[o.id].armies},o.id)),i&&e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"15px",borderRadius:"8px",border:"2px solid #333",minWidth:"200px",zIndex:2e3},children:[e.jsx("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:i.name}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Owner:"})," ",t.territories[i.id].owner]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Armies:"})," ",t.territories[i.id].armies]}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{children:"Continent:"})," ",i.continent]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Connections:"}),e.jsx("div",{style:{fontSize:"12px",marginTop:"4px"},children:i.connections.map(o=>{const l=s.find(c=>c.id===o);return e.jsxs("div",{style:{padding:"2px 0"},children:["• ",(l==null?void 0:l.name)||o]},o)})})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:"10px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"10px",borderRadius:"8px",border:"2px solid #333"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px"},children:"Players:"}),Object.entries(Ft).slice(0,4).map(([o,l])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:l,borderRadius:"50%",marginRight:"8px",border:"1px solid #fff"}}),e.jsx("span",{style:{fontSize:"12px"},children:o==="neutral"?"Neutral":o.replace("player","Player ")})]},o))]}),e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"10px",borderRadius:"8px",fontSize:"14px",maxWidth:"250px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Simple Risk Map Demo"}),e.jsxs("div",{style:{fontSize:"12px"},children:["• Click territory markers to select them",e.jsx("br",{}),"• Numbers show army count",e.jsx("br",{}),"• Colors indicate territory owner",e.jsx("br",{}),"• Info panel shows connections"]})]})]})},yl=()=>e.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("h1",{style:{textAlign:"center",marginBottom:"20px",color:"#333"},children:"Simple Risk Map Demo"}),e.jsxs("div",{style:{backgroundColor:"#f5f5f5",padding:"15px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ddd"},children:[e.jsx("h3",{style:{margin:"0 0 10px 0"},children:"Features:"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px"},children:[e.jsx("li",{children:"Static background image from Wikipedia"}),e.jsx("li",{children:"Clickable territory markers positioned with coordinates"}),e.jsx("li",{children:"Territory information panel showing connections"}),e.jsx("li",{children:"Color-coded ownership with army counts"}),e.jsx("li",{children:"Hover tooltips for quick info"})]})]}),e.jsx(bl,{}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e8f4f8",borderRadius:"8px",border:"1px solid #b8d4e3"},children:[e.jsx("h3",{style:{margin:"0 0 10px 0"},children:"How it Works:"}),e.jsxs("ol",{style:{margin:"0",paddingLeft:"20px"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Background Image:"})," Uses a static Risk map image as CSS background"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Territory Coordinates:"})," Each territory has x,y percentage coordinates"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Clickable Markers:"})," Circular markers positioned absolutely over territories"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Visual Feedback:"})," Selected territories get highlighted borders"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Territory Info:"})," Click to see connections and details"]})]})]})]}),us=({items:s,className:t=""})=>s.length===0?null:e.jsx("nav",{className:`flex items-center space-x-2 text-sm ${t}`,"aria-label":"Breadcrumb",children:e.jsx("div",{className:"flex items-center space-x-2",children:s.map((r,n)=>e.jsxs(zs.Fragment,{children:[e.jsx("div",{className:"flex items-center space-x-1",children:r.link?e.jsxs(L,{to:r.link,className:"flex items-center space-x-1 text-blue-400 hover:text-blue-300 transition-colors duration-150",children:[r.icon&&e.jsx("span",{className:"text-sm",children:r.icon}),e.jsx("span",{className:"hover:underline",children:r.label})]}):e.jsxs("div",{className:"flex items-center space-x-1 text-gray-400",children:[r.icon&&e.jsx("span",{className:"text-sm",children:r.icon}),e.jsx("span",{children:r.label})]})}),n<s.length-1&&e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},n))})}),jl=()=>{const{user:s}=ue(u=>u.auth),[t,r]=b.useState(null),[n,a]=b.useState([]),[i,o]=b.useState([]),[l,c]=b.useState(3);b.useEffect(()=>{r({gamesPlayed:127,gamesWon:89,winRate:70,favoriteMap:"Classic World",totalPlaytime:2340,currentStreak:3}),a([{id:"1",mapName:"Classic World",players:6,status:"completed",result:"won",lastPlayed:new Date(Date.now()-2*60*60*1e3)},{id:"2",mapName:"Europe",players:4,status:"in_progress",lastPlayed:new Date(Date.now()-30*60*1e3)},{id:"3",mapName:"Fantasy Realms",players:5,status:"completed",result:"lost",lastPlayed:new Date(Date.now()-24*60*60*1e3)}]),o([{id:"1",username:"DragonLord",activity:"Won a game on Classic World",timestamp:new Date(Date.now()-15*60*1e3),online:!0},{id:"2",username:"IceQueen",activity:"Created a new map: Arctic Wasteland",timestamp:new Date(Date.now()-45*60*1e3),online:!0},{id:"3",username:"ForestWarden",activity:"Joined a tournament",timestamp:new Date(Date.now()-2*60*60*1e3),online:!1}])},[]);const d=u=>{const x=Math.floor((new Date().getTime()-u.getTime())/(1e3*60));return x<1?"Just now":x<60?`${x}m ago`:x<1440?`${Math.floor(x/60)}h ago`:`${Math.floor(x/1440)}d ago`},h=u=>`${Math.floor(u/60)}h ${u%60}m`,m=(u,y)=>u==="in_progress"?"text-yellow-400":u==="completed"&&y==="won"?"text-green-400":u==="completed"&&y==="lost"?"text-red-400":"text-blue-400",g=(u,y)=>u==="in_progress"?"In Progress":u==="completed"&&y==="won"?"Victory":u==="completed"&&y==="lost"?"Defeat":"Waiting",f=[{label:"Dashboard",icon:"🏠"}];return e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsx(us,{items:f,className:"mb-6"}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Welcome back, ",s==null?void 0:s.username,"! 👋"]}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Ready to conquer some territories?"})]}),l>0&&e.jsxs("div",{className:"bg-red-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:[l," new notifications"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(L,{to:"/play/quick-match",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 rounded-xl p-6 transition-all duration-200 transform hover:scale-105 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-3",children:"🚀"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Quick Match"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Find a game instantly"})]})}),e.jsx(L,{to:"/play/create",className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 rounded-xl p-6 transition-all duration-200 transform hover:scale-105 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-3",children:"➕"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Create Lobby"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Host a custom game"})]})}),e.jsx(L,{to:"/maps",className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 rounded-xl p-6 transition-all duration-200 transform hover:scale-105 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-3",children:"🗺️"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Explore Maps"}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Discover new territories"})]})}),e.jsx(L,{to:"/community/tournaments",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 rounded-xl p-6 transition-all duration-200 transform hover:scale-105 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-3",children:"🏆"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Tournaments"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Compete for glory"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📊"}),"Your Stats"]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Games Played"}),e.jsx("span",{className:"text-white font-bold",children:t.gamesPlayed})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Games Won"}),e.jsx("span",{className:"text-green-400 font-bold",children:t.gamesWon})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Win Rate"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:[t.winRate,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Current Streak"}),e.jsx("span",{className:"text-yellow-400 font-bold",children:t.currentStreak})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Playtime"}),e.jsx("span",{className:"text-purple-400 font-bold",children:h(t.totalPlaytime)})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-700",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Favorite Map"}),e.jsx("div",{className:"text-white font-medium",children:t.favoriteMap})]})]}),e.jsx(L,{to:"/profile/stats",className:"block mt-4 text-center text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View Detailed Stats →"})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🎮"}),"Recent Games"]}),e.jsx("div",{className:"space-y-4",children:n.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-600 to-gray-800 rounded-lg flex items-center justify-center",children:"🗺️"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:u.mapName}),e.jsxs("div",{className:"text-sm text-gray-400",children:[u.players," players • ",d(u.lastPlayed)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`font-bold ${m(u.status,u.result)}`,children:g(u.status,u.result)}),u.status==="in_progress"&&e.jsx(L,{to:`/room/${u.id}`,className:"text-sm text-blue-400 hover:text-blue-300",children:"Continue →"})]})]},u.id))}),e.jsx(L,{to:"/profile/history",className:"block mt-4 text-center text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View All Games →"})]}),e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"👥"}),"Friends Activity"]}),e.jsx("div",{className:"space-y-4",children:i.map(u=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-700/30 rounded-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-sm font-bold text-white",children:u.username.charAt(0)}),u.online&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-gray-800"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium",children:u.username}),e.jsx("div",{className:"text-gray-400 text-sm",children:u.activity})]}),e.jsx("div",{className:"text-gray-500 text-xs",children:d(u.timestamp)})]},u.id))}),e.jsx(L,{to:"/community/friends",className:"block mt-4 text-center text-blue-400 hover:text-blue-300 text-sm font-medium",children:"View All Friends →"})]})]})]})]})},vl=()=>{const s=[{label:"Dashboard",link:"/dashboard",icon:"🏠"},{label:"Play",icon:"🎮"}],t=[{title:"Quick Match",description:"Jump into a game instantly",icon:"🚀",path:"/play/quick-match",color:"from-blue-600 to-purple-600"},{title:"Ranked",description:"Competitive ladder games",icon:"🏆",path:"/play/ranked",color:"from-yellow-600 to-orange-600"},{title:"Create Lobby",description:"Host a custom game",icon:"➕",path:"/play/create",color:"from-green-600 to-teal-600"},{title:"Browse Lobbies",description:"Join existing games",icon:"🔍",path:"/play/browse",color:"from-indigo-600 to-blue-600"},{title:"vs AI",description:"Single player practice",icon:"🤖",path:"/play/ai",color:"from-purple-600 to-pink-600"},{title:"Tutorial",description:"Learn to play Risk",icon:"📚",path:"/play/tutorial",color:"from-red-600 to-pink-600"}];return e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsx(us,{items:s,className:"mb-6"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"🎮 Choose Your Battle"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Select a game mode and begin your conquest"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>e.jsx(L,{to:r.path,className:`group bg-gradient-to-br ${r.color} rounded-xl p-6 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-2xl`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-4 group-hover:scale-110 transition-transform duration-300",children:r.icon}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:r.title}),e.jsx("p",{className:"text-gray-100 text-sm opacity-90",children:r.description})]})},r.path))}),e.jsxs("div",{className:"mt-12 bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📊"}),"Recent Activity"]}),e.jsxs("div",{className:"text-gray-400 text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🎯"}),e.jsx("p",{children:"No recent games found. Start a game to see your activity here!"})]})]})]})},Ws=()=>{const[s,t]=b.useState("official"),r=[{label:"Dashboard",link:"/dashboard",icon:"🏠"},{label:"Maps",icon:"🗺️"}],n=[{id:"official",label:"Official Maps",icon:"🌎"},{id:"featured",label:"Featured",icon:"⭐"},{id:"trending",label:"Trending",icon:"🔥"},{id:"recent",label:"Recent",icon:"🆕"},{id:"my-maps",label:"My Maps",icon:"💝"}],a=[{id:"1",name:"Classic World",description:"The original Risk world map with 42 territories",territories:42,rating:4.9,games:1234,thumbnail:"🌍"},{id:"2",name:"Europe",description:"Strategic battles across European nations",territories:32,rating:4.7,games:892,thumbnail:"🏰"},{id:"3",name:"Asia",description:"Conquer the vast Asian continent",territories:28,rating:4.6,games:667,thumbnail:"🏯"},{id:"4",name:"Americas",description:"From Alaska to Argentina",territories:30,rating:4.8,games:445,thumbnail:"🗽"}],i=o=>{const l=Math.floor(o);return"⭐".repeat(l)+(o%1>=.5?"⭐":"")};return e.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[e.jsx(us,{items:r,className:"mb-6"}),e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"🗺️ Maps Gallery"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Discover battlefields from around the world"})]}),e.jsx(L,{to:"/map-editor",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 px-6 py-3 rounded-lg font-medium transition-all duration-200 text-white shadow-lg hover:shadow-xl",children:"✏️ Create Map"})]}),e.jsxs("div",{className:"mb-8 flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("input",{type:"text",placeholder:"Search maps...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{className:"absolute right-3 top-3 text-gray-400",children:"🔍"})]}),e.jsxs("select",{className:"bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:"Sort by Popularity"}),e.jsx("option",{children:"Sort by Rating"}),e.jsx("option",{children:"Sort by Date"})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex space-x-1 bg-gray-800/50 rounded-lg p-1",children:n.map(o=>e.jsxs("button",{onClick:()=>t(o.id),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 text-sm ${s===o.id?"bg-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[e.jsx("span",{children:o.icon}),e.jsx("span",{children:o.label})]},o.id))})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(o=>e.jsxs(L,{to:`/maps/${o.id}`,className:"group bg-gray-800/50 backdrop-blur-sm rounded-xl overflow-hidden border border-gray-700 hover:border-blue-500 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-2xl",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center text-6xl group-hover:scale-110 transition-transform duration-300",children:o.thumbnail}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2 group-hover:text-blue-400 transition-colors",children:o.name}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:o.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Territories"}),e.jsx("span",{className:"text-white font-medium",children:o.territories})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Rating"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-yellow-400 text-xs",children:i(o.rating)}),e.jsx("span",{className:"text-white font-medium",children:o.rating})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Games Played"}),e.jsx("span",{className:"text-green-400 font-medium",children:o.games})]})]})]})]},o.id))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsx("button",{className:"bg-gray-800 hover:bg-gray-700 px-8 py-3 rounded-lg font-medium transition-all duration-200 text-white border border-gray-600",children:"Load More Maps"})})]})};function Nl(){const s=xt();return b.useEffect(()=>{s(Vt())},[s]),e.jsx(Di,{children:e.jsxs(an,{children:[e.jsx(F,{path:"/",element:e.jsx(D,{requireAuth:!1,children:e.jsx($i,{})})}),e.jsx(F,{path:"/login",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Ii,{})})}),e.jsx(F,{path:"/register",element:e.jsx(D,{requireAuth:!1,children:e.jsx(qi,{})})}),e.jsx(F,{path:"/leaderboard",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Es,{})})}),e.jsx(F,{path:"/leaderboard/:type",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Es,{})})}),e.jsx(F,{path:"/learn",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Ps,{})})}),e.jsx(F,{path:"/learn/:section",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Ps,{})})}),e.jsx(F,{path:"/profile/:userId",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Rt,{})})}),e.jsx(F,{path:"/profile/:userId/:section",element:e.jsx(D,{requireAuth:!1,children:e.jsx(Rt,{})})}),e.jsx(F,{path:"/lobby",element:e.jsx(D,{children:e.jsx(Rs,{})})}),e.jsx(F,{path:"/lobby/:section",element:e.jsx(D,{children:e.jsx(Rs,{})})}),e.jsx(F,{path:"/games",element:e.jsx(D,{children:e.jsx(je,{to:"/games/active",replace:!0})})}),e.jsx(F,{path:"/games/:section",element:e.jsx(D,{children:e.jsx(Gi,{})})}),e.jsx(F,{path:"/game/:gameId",element:e.jsx(D,{children:e.jsx(Is,{})})}),e.jsx(F,{path:"/game/:gameId/:section",element:e.jsx(D,{children:e.jsx(Is,{})})}),e.jsx(F,{path:"/create",element:e.jsx(D,{children:e.jsx(qs,{})})}),e.jsx(F,{path:"/create/:type",element:e.jsx(D,{children:e.jsx(qs,{})})}),e.jsx(F,{path:"/editor",element:e.jsx(D,{children:e.jsx(je,{to:"/editor/new",replace:!0})})}),e.jsx(F,{path:"/editor/new",element:e.jsx(D,{children:e.jsx(Mt,{})})}),e.jsx(F,{path:"/editor/:mapId",element:e.jsx(D,{children:e.jsx(Mt,{})})}),e.jsx(F,{path:"/editor/browse",element:e.jsx(D,{children:e.jsx(Ws,{})})}),e.jsx(F,{path:"/community",element:e.jsx(D,{children:e.jsx(Us,{})})}),e.jsx(F,{path:"/community/:section",element:e.jsx(D,{children:e.jsx(Us,{})})}),e.jsx(F,{path:"/profile",element:e.jsx(D,{children:e.jsx(Rt,{})})}),e.jsx(F,{path:"/profile/stats",element:e.jsx(D,{children:e.jsx(cl,{})})}),e.jsx(F,{path:"/dashboard",element:e.jsx(D,{children:e.jsx(jl,{})})}),e.jsx(F,{path:"/play",element:e.jsx(D,{children:e.jsx(vl,{})})}),e.jsx(F,{path:"/maps",element:e.jsx(D,{children:e.jsx(Ws,{})})}),e.jsx(F,{path:"/map-editor",element:e.jsx(D,{children:e.jsx(Mt,{})})}),e.jsx(F,{path:"/room/:roomId",element:e.jsx(D,{children:e.jsx(xl,{})})}),e.jsx(F,{path:"/simple-map",element:e.jsx(D,{requireAuth:!1,children:e.jsx(pl,{})})}),e.jsx(F,{path:"/risk-map",element:e.jsx(D,{requireAuth:!1,children:e.jsx(yl,{})})}),e.jsx(F,{path:"*",element:e.jsx(Ui,{})})]})})}Dt.createRoot(document.getElementById("root")).render(e.jsx(zs.StrictMode,{children:e.jsx(rn,{store:$,children:e.jsxs(on,{children:[e.jsx(Nl,{}),e.jsx(ta,{position:"top-right"})]})})}));
